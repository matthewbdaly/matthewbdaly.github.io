<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta http-equiv="Content-Security-Policy" content="base-uri &#x27;self&#x27;; default-src &#x27;self&#x27; *.google-analytics.com disqus.com *.disqus.com *.disquscdn.com; script-src &#x27;self&#x27; localhost:* *.addthis.com *.google-analytics.com *.disquscdn.com *.disqus.com disqus.com *.addthisedge.com graph.facebook.com &#x27;unsafe-inline&#x27; &#x27;unsafe-eval&#x27;; style-src &#x27;self&#x27; fonts.googleapis.com *.addthis.com google-analytics.com *.disquscdn.com *.disqus.com &#x27;unsafe-inline&#x27;; object-src &#x27;none&#x27;; form-action &#x27;self&#x27;; font-src &#x27;self&#x27; data: fonts.google-apis.com fonts.gstatic.com; connect-src &#x27;self&#x27; ws://localhost:* *.google-analytics.com stats.g.doubleclick.net; img-src &#x27;self&#x27; *.google-analytics.com *.disquscdn.com *.disqus.com stats.g.doubleclick.net; child-src &#x27;self&#x27;; frame-src disqus.com *.addthis.com;"/><style data-href="/styles.e5cc34bd7c5d349dba6d.css" data-identity="gatsby-global-css">/*! tailwindcss v2.2.15 | MIT License | https://tailwindcss.com */

/*! modern-normalize v1.1.0 | MIT License | https://github.com/sindresorhus/modern-normalize */html{-webkit-text-size-adjust:100%;line-height:1.15;-moz-tab-size:4;-o-tab-size:4;tab-size:4}body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;margin:0}hr{color:inherit;height:0}abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{border-color:inherit;text-indent:0}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,select{text-transform:none}[type=button],[type=submit],button{-webkit-appearance:button}legend{padding:0}progress{vertical-align:baseline}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}button{background-color:transparent;background-image:none}fieldset,ol,ul{margin:0;padding:0}ol,ul{list-style:none}html{font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;line-height:1.5}body{font-family:inherit;line-height:inherit}*,:after,:before{border:0 solid;box-sizing:border-box}hr{border-top-width:1px}img{border-style:solid}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:#9ca3af;opacity:1}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:#9ca3af;opacity:1}input::placeholder,textarea::placeholder{color:#9ca3af;opacity:1}button{cursor:pointer}table{border-collapse:collapse}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}button,input,optgroup,select,textarea{color:inherit;line-height:inherit;padding:0}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{height:auto;max-width:100%}[hidden]{display:none}*,:after,:before{--tw-border-opacity:1;border-color:rgba(229,231,235,var(--tw-border-opacity))}.float-right{float:right}.float-left{float:left}.float-none{float:none}.clear-both{clear:both}.m-0{margin:0}.mx-0{margin-left:0;margin-right:0}.mx-auto{margin-left:auto;margin-right:auto}.my-2{margin-bottom:.5rem;margin-top:.5rem}.my-4{margin-bottom:1rem;margin-top:1rem}.mt-2{margin-top:.5rem}.mt-16{margin-top:4rem}.mr-2{margin-right:.5rem}.mr-8{margin-right:2rem}.-mb-4{margin-bottom:-1rem}.-mb-8{margin-bottom:-2rem}.box-border{box-sizing:border-box}.block{display:block}.inline-block{display:inline-block}.flex{display:flex}.table{display:table}.hidden{display:none}.h-2{height:.5rem}.h-4{height:1rem}.min-h-screen{min-height:100vh}.w-1\/2{width:50%}.w-1\/3{width:33.333333%}.w-1\/4{width:25%}.w-3\/4{width:75%}.w-full{width:100%}.flex-grow{flex-grow:1}@-webkit-keyframes spin{to{transform:rotate(1turn)}}@keyframes spin{to{transform:rotate(1turn)}}@-webkit-keyframes ping{75%,to{opacity:0;transform:scale(2)}}@keyframes ping{75%,to{opacity:0;transform:scale(2)}}@-webkit-keyframes pulse{50%{opacity:.5}}@keyframes pulse{50%{opacity:.5}}@-webkit-keyframes bounce{0%,to{-webkit-animation-timing-function:cubic-bezier(.8,0,1,1);animation-timing-function:cubic-bezier(.8,0,1,1);transform:translateY(-25%)}50%{-webkit-animation-timing-function:cubic-bezier(0,0,.2,1);animation-timing-function:cubic-bezier(0,0,.2,1);transform:none}}@keyframes bounce{0%,to{-webkit-animation-timing-function:cubic-bezier(.8,0,1,1);animation-timing-function:cubic-bezier(.8,0,1,1);transform:translateY(-25%)}50%{-webkit-animation-timing-function:cubic-bezier(0,0,.2,1);animation-timing-function:cubic-bezier(0,0,.2,1);transform:none}}.list-disc{list-style-type:disc}.flex-row{flex-direction:row}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.justify-center{justify-content:center}.space-y-8>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-bottom:calc(2rem*var(--tw-space-y-reverse));margin-top:calc(2rem*(1 - var(--tw-space-y-reverse)))}.space-y-16>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-bottom:calc(4rem*var(--tw-space-y-reverse));margin-top:calc(4rem*(1 - var(--tw-space-y-reverse)))}.space-y-32>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-bottom:calc(8rem*var(--tw-space-y-reverse));margin-top:calc(8rem*(1 - var(--tw-space-y-reverse)))}.divide-y>:not([hidden])~:not([hidden]){--tw-divide-y-reverse:0;border-bottom-width:calc(1px*var(--tw-divide-y-reverse));border-top-width:calc(1px*(1 - var(--tw-divide-y-reverse)))}.divide-gray-800>:not([hidden])~:not([hidden]){--tw-divide-opacity:1;border-color:rgba(31,41,55,var(--tw-divide-opacity))}@media (prefers-color-scheme:dark){.dark\:divide-gray-200>:not([hidden])~:not([hidden]){--tw-divide-opacity:1;border-color:rgba(229,231,235,var(--tw-divide-opacity))}}.overflow-x-auto{overflow-x:auto}.overflow-x-scroll{overflow-x:scroll}.rounded-full{border-radius:9999px}.rounded-t-lg{border-top-left-radius:.5rem;border-top-right-radius:.5rem}.border-2{border-width:2px}.border-b-2{border-bottom-width:2px}.border-b-4{border-bottom-width:4px}.border-l-8{border-left-width:8px}.border-transparent{border-color:transparent}.border-gray-100{--tw-border-opacity:1;border-color:rgba(243,244,246,var(--tw-border-opacity))}.border-gray-500{--tw-border-opacity:1;border-color:rgba(107,114,128,var(--tw-border-opacity))}.border-gray-800{--tw-border-opacity:1;border-color:rgba(31,41,55,var(--tw-border-opacity))}.border-green-400,.hover\:border-green-400:hover{--tw-border-opacity:1;border-color:rgba(52,211,153,var(--tw-border-opacity))}.focus\:border-blue-300:focus{--tw-border-opacity:1;border-color:rgba(147,197,253,var(--tw-border-opacity))}.bg-gray-50{--tw-bg-opacity:1;background-color:rgba(249,250,251,var(--tw-bg-opacity))}.bg-gray-100{--tw-bg-opacity:1;background-color:rgba(243,244,246,var(--tw-bg-opacity))}.bg-gray-300{--tw-bg-opacity:1;background-color:rgba(209,213,219,var(--tw-bg-opacity))}.bg-gray-800{--tw-bg-opacity:1;background-color:rgba(31,41,55,var(--tw-bg-opacity))}.bg-purple-200{--tw-bg-opacity:1;background-color:rgba(221,214,254,var(--tw-bg-opacity))}.hover\:bg-gray-200:hover{--tw-bg-opacity:1;background-color:rgba(229,231,235,var(--tw-bg-opacity))}.hover\:bg-purple-800:hover{--tw-bg-opacity:1;background-color:rgba(91,33,182,var(--tw-bg-opacity))}@media (prefers-color-scheme:dark){.dark\:bg-gray-700{--tw-bg-opacity:1;background-color:rgba(55,65,81,var(--tw-bg-opacity))}.dark\:bg-gray-800{--tw-bg-opacity:1;background-color:rgba(31,41,55,var(--tw-bg-opacity))}.dark\:bg-gray-900{--tw-bg-opacity:1;background-color:rgba(17,24,39,var(--tw-bg-opacity))}.dark\:hover\:bg-gray-800:hover{--tw-bg-opacity:1;background-color:rgba(31,41,55,var(--tw-bg-opacity))}}.bg-gradient-to-r{background-image:linear-gradient(to right,var(--tw-gradient-stops))}.bg-gradient-to-b{background-image:linear-gradient(to bottom,var(--tw-gradient-stops))}.from-gray-200{--tw-gradient-from:#e5e7eb;--tw-gradient-stops:var(--tw-gradient-from),var(--tw-gradient-to,rgba(229,231,235,0))}.from-green-400{--tw-gradient-from:#34d399;--tw-gradient-stops:var(--tw-gradient-from),var(--tw-gradient-to,rgba(52,211,153,0))}.via-blue-500{--tw-gradient-stops:var(--tw-gradient-from),#3b82f6,var(--tw-gradient-to,rgba(59,130,246,0))}.to-gray-300{--tw-gradient-to:#d1d5db}.to-purple-500{--tw-gradient-to:#8b5cf6}.p-2{padding:.5rem}.p-4{padding:1rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-4{padding-left:1rem;padding-right:1rem}.px-8{padding-left:2rem;padding-right:2rem}.py-2{padding-bottom:.5rem;padding-top:.5rem}.py-4{padding-bottom:1rem}.pt-4,.py-4{padding-top:1rem}.pb-16{padding-bottom:4rem}.pl-4{padding-left:1rem}.pl-6{padding-left:1.5rem}.text-center{text-align:center}.font-sans{font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji}.font-mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.text-sm{font-size:.875rem;line-height:1.25rem}.text-lg{font-size:1.125rem}.text-lg,.text-xl{line-height:1.75rem}.text-xl{font-size:1.25rem}.text-2xl{font-size:1.5rem;line-height:2rem}.text-4xl{font-size:2.25rem;line-height:2.5rem}.font-semibold{font-weight:600}.font-bold{font-weight:700}.lowercase{text-transform:lowercase}.italic{font-style:italic}.leading-6{line-height:1.5rem}.text-gray-100{--tw-text-opacity:1;color:rgba(243,244,246,var(--tw-text-opacity))}.text-gray-200{--tw-text-opacity:1;color:rgba(229,231,235,var(--tw-text-opacity))}.text-gray-800{--tw-text-opacity:1;color:rgba(31,41,55,var(--tw-text-opacity))}.text-gray-900{--tw-text-opacity:1;color:rgba(17,24,39,var(--tw-text-opacity))}.hover\:text-gray-200:hover{--tw-text-opacity:1;color:rgba(229,231,235,var(--tw-text-opacity))}@media (prefers-color-scheme:dark){.dark\:text-gray-100{--tw-text-opacity:1;color:rgba(243,244,246,var(--tw-text-opacity))}.dark\:text-gray-200{--tw-text-opacity:1;color:rgba(229,231,235,var(--tw-text-opacity))}.dark\:text-gray-300{--tw-text-opacity:1;color:rgba(209,213,219,var(--tw-text-opacity))}}.antialiased{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}*,:after,:before{--tw-shadow:0 0 #0000}.shadow-sm{--tw-shadow:0 1px 2px 0 rgba(0,0,0,0.05)}.shadow-lg,.shadow-sm{box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.shadow-lg{--tw-shadow:0 10px 15px -3px rgba(0,0,0,0.1),0 4px 6px -2px rgba(0,0,0,0.05)}.focus\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}*,:after,:before{--tw-ring-inset:var(--tw-empty,/*!*/ /*!*/);--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000}.focus\:ring:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(3px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.filter{--tw-blur:var(--tw-empty,/*!*/ /*!*/);--tw-brightness:var(--tw-empty,/*!*/ /*!*/);--tw-contrast:var(--tw-empty,/*!*/ /*!*/);--tw-grayscale:var(--tw-empty,/*!*/ /*!*/);--tw-hue-rotate:var(--tw-empty,/*!*/ /*!*/);--tw-invert:var(--tw-empty,/*!*/ /*!*/);--tw-saturate:var(--tw-empty,/*!*/ /*!*/);--tw-sepia:var(--tw-empty,/*!*/ /*!*/);--tw-drop-shadow:var(--tw-empty,/*!*/ /*!*/);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.transition{transition-duration:.15s;transition-property:background-color,border-color,color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:background-color,border-color,color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:background-color,border-color,color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1)}.transition-colors{transition-duration:.15s;transition-property:background-color,border-color,color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1)}.duration-300{transition-duration:.3s}.duration-500{transition-duration:.5s}.ease-in-out{transition-timing-function:cubic-bezier(.4,0,.2,1)}code[class*=language-],pre[class*=language-]{display:block}@media (min-width:768px){.md\:float-none{float:none}.md\:block{display:block}.md\:w-2\/3{width:66.666667%}.md\:w-1\/5{width:20%}}@media (min-width:1024px){.lg\:float-right{float:right}.lg\:float-left{float:left}.lg\:mt-4{margin-top:1rem}.lg\:text-left{text-align:left}}.prism-code{-webkit-overflow-scrolling:touch;background-color:transparent;border-radius:.2em;float:left;font-size:1rem;margin-bottom:1rem;margin-top:1rem;overflow:initial;padding-bottom:1rem;padding-top:1rem;position:relative}.prism-code.title{border-radius:0 0 .2em .2em}pre.prism-code{float:left;min-width:100%;overflow:initial;padding:20px}.token{display:inline-block}li>code,p>code{word-wrap:break-word;background:#011627;border-radius:.2em;color:#d6deeb;padding:.2em;white-space:pre-wrap}.gatsby-highlight{-webkit-overflow-scrolling:touch;font-size:1rem;overflow:auto;position:relative}.gatsby-highlight::-webkit-scrollbar{display:none}.gatsby-highlight>code[class*=language-],.gatsby>pre[class*=language-]{-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;line-height:1.5;overflow-wrap:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-break:normal;word-spacing:normal}.gatsby-highlight .token-line{border-left:4px solid transparent;margin-left:-20px;margin-right:-20px}.line-number-style{display:inline-block;opacity:.3;padding-left:1em;padding-right:2em;position:relative;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1.2em}.gatsby-highlight .token-line.highlight-line{background-color:#023751;border-left:4px solid #029bce}.gatsby-highlight .token-line.highlight-line .line-number-style{left:0;opacity:.5;width:calc(1.2em - 4px)}</style><meta name="generator" content="Gatsby 3.14.0"/><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){if(void 0===e.target.dataset.mainImage)return;if(void 0===e.target.dataset.gatsbyImageSsr)return;const t=e.target;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link rel="search" type="application/opensearchdescription+xml" crossorigin="anonymous" href="/opensearch.xml"/><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><title data-react-helmet="true">Lightweight Laravel - deconstructing a full stack framework | Matthew Daly</title><link data-react-helmet="true" href="https://matthewdaly.co.uk/blog/2020/12/30/lightweight-laravel-deconstructing-a-full-stack-framework/" rel="canonical"/><link data-react-helmet="true" href="https://twitter.com/mattbd" rel="me"/><link data-react-helmet="true" href="https://github.com/matthewbdaly" rel="me"/><link data-react-helmet="true" href="mailto:matthew@matthewdaly.co.uk" rel="me"/><link data-react-helmet="true" href="/key.pub" rel="pgpkey"/><link data-react-helmet="true" href="https://webmention.io/matthewdaly.co.uk/xmlrpc" rel="pingback"/><link data-react-helmet="true" href="https://webmention.io/matthewdaly.co.uk/webmention" rel="webmention"/><link data-react-helmet="true" rel="authorization_endpoint" href="https://indieauth.com/auth"/><link data-react-helmet="true" rel="token_endpoint" href="https://tokens.indieauth.com/token"/><link data-react-helmet="true" rel="openid.delegate" href="https://matthewdaly.co.uk"/><link data-react-helmet="true" rel="openid.server" href="https://openid.indieauth.com/openid"/><link data-react-helmet="true" rel="alternate" type="application/rss+xml" title="Matthew Daly - feed" href="/rss.xml"/><link data-react-helmet="true" rel="alternate" type="application/atom+xml" title="Matthew Daly - feed" href="/atom.xml"/><link data-react-helmet="true" rel="alternate" type="application/feed+json" title="Matthew Daly - feed" href="/feed.json"/><meta data-react-helmet="true" name="description" content="Back when I used to work with Django, I read the book  Lightweight Django , and it completely changed the way I thought about building web applications. For years I&#x27;d heard the…"/><meta data-react-helmet="true" property="og:title" content="Lightweight Laravel - deconstructing a full stack framework"/><meta data-react-helmet="true" property="og:description" content="Back when I used to work with Django, I read the book  Lightweight Django , and it completely changed the way I thought about building web applications. For years I&#x27;d heard the…"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="mattbd"/><meta data-react-helmet="true" name="twitter:title" content="Lightweight Laravel - deconstructing a full stack framework"/><meta data-react-helmet="true" name="twitter:description" content="Back when I used to work with Django, I read the book  Lightweight Django , and it completely changed the way I thought about building web applications. For years I&#x27;d heard the…"/><link rel="sitemap" type="application/xml" href="/sitemap/sitemap-index.xml"/><link rel="icon" href="/favicon-32x32.png?v=53aa06cf17e4239d0dba6ffd09854e02" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#3b82f6"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link as="script" rel="preload" href="/webpack-runtime-4a2499c827fd9e45dd88.js"/><link as="script" rel="preload" href="/framework-aeedefbd40854c93cd6e.js"/><link as="script" rel="preload" href="/app-ee7d5025f6bfd6d08ba0.js"/><link as="script" rel="preload" href="/f0e45107-1ab5e6e9877396d2cf44.js"/><link as="script" rel="preload" href="/e87769ff526c098a69bffbfff9ee9d57397fcb93-6fc590b5171c38a50826.js"/><link as="script" rel="preload" href="/15a3be27178e285ff113e12c60c30466a8f4d4c5-05c94d59cdf70f961f79.js"/><link as="script" rel="preload" href="/7840d69eefded84ab93ff6e879351e9a3a16821f-3cc77dc4aa7437d407dd.js"/><link as="script" rel="preload" href="/component---src-templates-post-tsx-cc8c6bdbcd5a1c0c91b6.js"/><link as="fetch" rel="preload" href="/page-data/blog/2020/12/30/lightweight-laravel-deconstructing-a-full-stack-framework/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/290055352.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2909664151.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="flex flex-col min-h-screen pb-16 font-sans text-lg antialiased text-gray-800 bg-gray-50 dark:text-gray-100 dark:bg-gray-700 leading-6"><div class="w-full h-2 bg-gradient-to-r from-green-400 via-blue-500 to-purple-500"></div><nav class="w-full p-4 mx-auto lowercase md:w-2/3"><h1 class="block float-none py-4 text-4xl text-center lg:float-left lg:text-left"><a href="/">Matthew Daly</a></h1><ul class="py-2 text-center lg:float-right md:block lg:text-left"><li class="inline-block pr py-2 mr-8 lg:mt-4 text-sm text-gray-900 dark:text-gray-200 border-b-4 border-transparent hover:border-green-400 transition-colors duration-500"><a href="/blog/archives">Archives</a></li><li class="inline-block pr py-2 mr-8 lg:mt-4 text-sm text-gray-900 dark:text-gray-200 border-b-4 border-transparent hover:border-green-400 transition-colors duration-500"><a href="/about">About</a></li><li class="inline-block pr py-2 mr-8 lg:mt-4 text-sm text-gray-900 dark:text-gray-200 border-b-4 border-transparent hover:border-green-400 transition-colors duration-500"><a href="/uses">Uses</a></li><li class="inline-block pr py-2 mr-8 lg:mt-4 text-sm text-gray-900 dark:text-gray-200 border-b-4 border-transparent hover:border-green-400 transition-colors duration-500"><a href="/posts/1">Blog</a></li><li class="inline-block pr py-2 mr-8 lg:mt-4 text-sm text-gray-900 dark:text-gray-200 border-b-4 border-transparent hover:border-green-400 transition-colors duration-500"><a href="/blog/categories">Categories</a></li><li class="inline-block pr py-2 mr-8 lg:mt-4 text-sm text-gray-900 dark:text-gray-200 border-b-4 border-transparent hover:border-green-400 transition-colors duration-500"><a href="/search">Search</a></li></ul></nav><div class="w-full h-4 clear"></div><main class="flex-grow w-full p-4 mx-auto md:w-2/3"><article class="h-entry"><header><h2 class="py-4 text-2xl font-bold e-content p-name"><a class="u-url" href="https://matthewdaly.co.uk/blog/2020/12/30/lightweight-laravel-deconstructing-a-full-stack-framework/">Lightweight Laravel - deconstructing a full stack framework</a></h2><p class="my-4 text-lg font-semibold">Published by <a href="/" rel="author">Matthew Daly</a> at <!-- -->30th December 2020 5:00 pm</p><time class="hidden dt-published">2020-12-30T17:00:00+00:00</time></header><section><p class="py-2">Back when I used to work with Django, I read the book <a href="https://www.oreilly.com/library/view/lightweight-django/9781491946275/" class="border-b-2 border-green-400">Lightweight Django</a>, and it completely changed the way I thought about building web applications. For years I&#x27;d heard the same lines parroted about how Django was too large and bloated, and something like Flask was a better bet for many applications, and this book completely blew this misconception away. By demonstrating how it was possible to break the framework apart, use just what you need, and leave out what you don&#x27;t, it showed how I could benefit from my familiarity with Django, while making it more suitable for smaller applications.</p><p class="py-2">Laravel, like Django, is a full stack framework, and is often subject to similar misconceptions about bloat. But just because the framework ships with all this stuff, doesn&#x27;t mean you&#x27;re obliged to use it all. If you know you aren&#x27;t going to need all of a framework&#x27;s functionality, there&#x27;s nothing stopping you getting rid of what you don&#x27;t need, or even replacing it with something else. In this article, I&#x27;ll show you how to apply the same methodology to a Laravel application to remove what you don&#x27;t need. As part of this, we&#x27;ll be building a simple placeholder image service. This was used in Lightweight Django as it&#x27;s a good example of an application that is completely stateless, and doesn&#x27;t need sessions or a database, so it&#x27;s often seen as a bad fit for a full stack framework. Since the same applies here, it&#x27;s a good example for us too.</p><h2 class="py-4 text-2xl font-bold">Getting started</h2><p class="py-2">Run the following command in the shell to create a new Laravel application:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style"></span><span class="token plain">$ </span><span class="token function" style="color:#79b6f2">composer</span><span class="token plain"> create-project --prefer-dist laravel/laravel lightweight-laravel</span></div></pre></div></pre><p class="py-2">What this actually does is as follows:</p><ul class="py-2 pl-4"><li class="list-disc">Resolve the latest release of the package <code>laravel/laravel</code> that will work on your system</li><li class="list-disc">Copy it from the <a href="https://github.com/laravel/laravel" class="border-b-2 border-green-400">repository</a> to the specified location</li><li class="list-disc">Carry out any post-install scripts specified, such as creating the <code>.env</code> file and generating a key</li></ul><p class="py-2">However, that&#x27;s just a standardised boilerplate for Laravel applications. Most of the functionality of the framework is in the package <code>laravel/framework</code>, which is included as a dependency in your <code>composer.json</code>. This makes sense, because by keeping as much of the actual framework out of the starter boilerplate and in a separate repository, it minimises the work required to update the application to a new version. It also means you can strip that boilerplate down to remove references to things you don&#x27;t need, and even create your own custom boilerplates to save you work in future.</p><h2 class="py-4 text-2xl font-bold">Stripping down the boilerplate</h2><p class="py-2">Let&#x27;s start stripping out the things we don&#x27;t need. Since our application is stateless, we have no need whatsoever of a database, so we can delete the <code>app/Models</code> and <code>database</code> folders. We&#x27;ll want to support Redis for the cache, so we can&#x27;t delete the file <code>config/database.php</code>, but we can remove any references to the database other than Redis from that file. We can delete some other files from the <code>config/</code> folder, namely <code>auth.php</code>, <code>broadcasting.php</code>, <code>filesystems.php</code>, <code>mail.php</code>, <code>queue.php</code>, <code>services.php</code> and <code>session.php</code>.</p><p class="py-2">We also don&#x27;t need a lot of the middleware that ships with Laravel. If you go into the file <code>app/Http/Kernel.php</code> you&#x27;ll see that it assigns some middleware as global, some to the <code>web</code> and <code>api</code> groups, and some as optional route middleware. In this file:</p><ul class="py-2 pl-4"><li class="list-disc">We don&#x27;t need to make any POST requests to this application, so we can lose the <code>ValidatePostSize</code> middleware from the global middleware entirely</li><li class="list-disc">The <code>web</code> group relates to cookies, sessions, CSRF, authentication and handling routing with substitute bindings. Since we don&#x27;t need any of that we can empty this group entirely</li><li class="list-disc">The <code>auth</code>, <code>auth.basic</code>, <code>can</code>, <code>guest</code>, <code>password.confirm</code>, and <code>verified</code> route middleware is also surplus to requirements and can go</li></ul><p class="py-2">As this change is a bit fiddly, here&#x27;s a patch, which may be easier to read:</p><pre><div class="gatsby-highlight" data-language="diff"><pre class="prism-code language-diff" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">From 6bc87e9602e839d5635963b6d740279b2dbcf16b Mon Sep 17 00:00:00 2001</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">From: Matthew Daly &lt;Matthew Daly 450801+matthewbdaly@users.noreply.github.com&gt;</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">Date: Wed, 30 Dec 2020 11:54:56 +0000</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">Subject: [PATCH] Removed unwanted middleware</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain"></span><span class="token coord">---</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">app/Http/Kernel.php | 14 --------------</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">1 file changed, 14 deletions(-)</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token unchanged line"></span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain">diff --git a/app/Http/Kernel.php b/app/Http/Kernel.php</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain">index 30020a5..10e150d 100644</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain"></span><span class="token coord">--- a/app/Http/Kernel.php</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain"></span><span class="token coord">+++ b/app/Http/Kernel.php</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain">@@ -18,7 +18,6 @@ class Kernel extends HttpKernel</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">        \App\Http\Middleware\TrustProxies::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">        \Fruitcake\Cors\HandleCors::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">        \App\Http\Middleware\PreventRequestsDuringMaintenance::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token unchanged line"></span><span class="token deleted-sign deleted prefix deleted" style="color:#5a9bcf">-</span><span class="token deleted-sign deleted line" style="color:#5a9bcf">        \Illuminate\Foundation\Http\Middleware\ValidatePostSize::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token deleted-sign deleted line" style="color:#5a9bcf"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">        \App\Http\Middleware\TrimStrings::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">        \Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">21</span><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">    ];</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">22</span><span class="token unchanged line"></span><span class="token plain">@@ -30,13 +29,6 @@ class Kernel extends HttpKernel</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">23</span><span class="token plain"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">     */</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">24</span><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">    protected $middlewareGroups = [</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">25</span><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">        &#x27;web&#x27; =&gt; [</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">26</span><span class="token unchanged line"></span><span class="token deleted-sign deleted prefix deleted" style="color:#5a9bcf">-</span><span class="token deleted-sign deleted line" style="color:#5a9bcf">            \App\Http\Middleware\EncryptCookies::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">27</span><span class="token deleted-sign deleted line" style="color:#5a9bcf"></span><span class="token deleted-sign deleted prefix deleted" style="color:#5a9bcf">-</span><span class="token deleted-sign deleted line" style="color:#5a9bcf">            \Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">28</span><span class="token deleted-sign deleted line" style="color:#5a9bcf"></span><span class="token deleted-sign deleted prefix deleted" style="color:#5a9bcf">-</span><span class="token deleted-sign deleted line" style="color:#5a9bcf">            \Illuminate\Session\Middleware\StartSession::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">29</span><span class="token deleted-sign deleted line" style="color:#5a9bcf"></span><span class="token deleted-sign deleted prefix deleted" style="color:#5a9bcf">-</span><span class="token deleted-sign deleted line" style="color:#5a9bcf">            // \Illuminate\Session\Middleware\AuthenticateSession::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">30</span><span class="token deleted-sign deleted line" style="color:#5a9bcf"></span><span class="token deleted-sign deleted prefix deleted" style="color:#5a9bcf">-</span><span class="token deleted-sign deleted line" style="color:#5a9bcf">            \Illuminate\View\Middleware\ShareErrorsFromSession::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">31</span><span class="token deleted-sign deleted line" style="color:#5a9bcf"></span><span class="token deleted-sign deleted prefix deleted" style="color:#5a9bcf">-</span><span class="token deleted-sign deleted line" style="color:#5a9bcf">            \App\Http\Middleware\VerifyCsrfToken::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">32</span><span class="token deleted-sign deleted line" style="color:#5a9bcf"></span><span class="token deleted-sign deleted prefix deleted" style="color:#5a9bcf">-</span><span class="token deleted-sign deleted line" style="color:#5a9bcf">            \Illuminate\Routing\Middleware\SubstituteBindings::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">33</span><span class="token deleted-sign deleted line" style="color:#5a9bcf"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">        ],</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">34</span><span class="token unchanged line"></span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">35</span><span class="token plain"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">        &#x27;api&#x27; =&gt; [</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">36</span><span class="token unchanged line"></span><span class="token plain">@@ -53,14 +45,8 @@ class Kernel extends HttpKernel</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">37</span><span class="token plain"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">     * @var array</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">38</span><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">     */</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">39</span><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">    protected $routeMiddleware = [</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">40</span><span class="token unchanged line"></span><span class="token deleted-sign deleted prefix deleted" style="color:#5a9bcf">-</span><span class="token deleted-sign deleted line" style="color:#5a9bcf">        &#x27;auth&#x27; =&gt; \App\Http\Middleware\Authenticate::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">41</span><span class="token deleted-sign deleted line" style="color:#5a9bcf"></span><span class="token deleted-sign deleted prefix deleted" style="color:#5a9bcf">-</span><span class="token deleted-sign deleted line" style="color:#5a9bcf">        &#x27;auth.basic&#x27; =&gt; \Illuminate\Auth\Middleware\AuthenticateWithBasicAuth::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">42</span><span class="token deleted-sign deleted line" style="color:#5a9bcf"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">        &#x27;cache.headers&#x27; =&gt; \Illuminate\Http\Middleware\SetCacheHeaders::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">43</span><span class="token unchanged line"></span><span class="token deleted-sign deleted prefix deleted" style="color:#5a9bcf">-</span><span class="token deleted-sign deleted line" style="color:#5a9bcf">        &#x27;can&#x27; =&gt; \Illuminate\Auth\Middleware\Authorize::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">44</span><span class="token deleted-sign deleted line" style="color:#5a9bcf"></span><span class="token deleted-sign deleted prefix deleted" style="color:#5a9bcf">-</span><span class="token deleted-sign deleted line" style="color:#5a9bcf">        &#x27;guest&#x27; =&gt; \App\Http\Middleware\RedirectIfAuthenticated::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">45</span><span class="token deleted-sign deleted line" style="color:#5a9bcf"></span><span class="token deleted-sign deleted prefix deleted" style="color:#5a9bcf">-</span><span class="token deleted-sign deleted line" style="color:#5a9bcf">        &#x27;password.confirm&#x27; =&gt; \Illuminate\Auth\Middleware\RequirePassword::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">46</span><span class="token deleted-sign deleted line" style="color:#5a9bcf"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">        &#x27;signed&#x27; =&gt; \Illuminate\Routing\Middleware\ValidateSignature::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">47</span><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">        &#x27;throttle&#x27; =&gt; \Illuminate\Routing\Middleware\ThrottleRequests::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">48</span><span class="token unchanged line"></span><span class="token deleted-sign deleted prefix deleted" style="color:#5a9bcf">-</span><span class="token deleted-sign deleted line" style="color:#5a9bcf">        &#x27;verified&#x27; =&gt; \Illuminate\Auth\Middleware\EnsureEmailIsVerified::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">49</span><span class="token deleted-sign deleted line" style="color:#5a9bcf"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">    ];</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">50</span><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">}</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">51</span><span class="token unchanged line"></span><span class="token deleted-sign deleted prefix deleted" style="color:#5a9bcf">-</span><span class="token deleted-sign deleted line" style="color:#5a9bcf">-</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">52</span><span class="token deleted-sign deleted line" style="color:#5a9bcf"></span><span class="token coord">2.28.0</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">53</span><span class="token plain" style="display:inline-block">
</span></div></pre></div></pre><p class="py-2">These changes also mean a lot of the service providers and facades are now redundant and can be removed from the application. If you go into <code>config/app.php</code> you can remove <code>AuthServiceProvider</code>, <code>BroadcastServiceProvider</code>, <code>CookieServiceProvider</code>, <code>MailServiceProvider</code>, <code>NotificationServiceProvider</code>, <code>PaginationServiceProvider</code>, <code>PasswordResetServiceProvider</code>, <code>SessionServiceProvider</code> and <code>TranslationServiceProvider</code> from the providers section, as well as the commented-out local <code>BroadcastServiceProvider</code>. You can also delete the facades for <code>Auth</code>, <code>Cookie</code>, <code>DB</code>, <code>Eloquent</code>, <code>Gate</code>, <code>Lang</code>, <code>Mail</code>, <code>Notification</code>, <code>Password</code>, <code>Queue</code>, <code>Schema</code>, <code>Session</code>, and <code>Storage</code>.</p><p class="py-2">Again, here&#x27;s a patch of the required changes:</p><pre><div class="gatsby-highlight" data-language="diff"><pre class="prism-code language-diff" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">From 66be3b836706ef488b890cdae6e97d4fc6195dd6 Mon Sep 17 00:00:00 2001</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">From: Matthew Daly &lt;Matthew Daly 450801+matthewbdaly@users.noreply.github.com&gt;</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">Date: Wed, 30 Dec 2020 12:10:25 +0000</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">Subject: [PATCH] Removed unused service providers and facades</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain"></span><span class="token coord">---</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">config/app.php | 26 --------------------------</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">1 file changed, 26 deletions(-)</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token unchanged line"></span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain">diff --git a/config/app.php b/config/app.php</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain">index 2a2f0eb..b7a38c8 100644</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain"></span><span class="token coord">--- a/config/app.php</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain"></span><span class="token coord">+++ b/config/app.php</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain">@@ -139,26 +139,17 @@ return [</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">        /*</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">         * Laravel Framework Service Providers...</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">         */</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token unchanged line"></span><span class="token deleted-sign deleted prefix deleted" style="color:#5a9bcf">-</span><span class="token deleted-sign deleted line" style="color:#5a9bcf">        Illuminate\Auth\AuthServiceProvider::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token deleted-sign deleted line" style="color:#5a9bcf"></span><span class="token deleted-sign deleted prefix deleted" style="color:#5a9bcf">-</span><span class="token deleted-sign deleted line" style="color:#5a9bcf">        Illuminate\Broadcasting\BroadcastServiceProvider::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token deleted-sign deleted line" style="color:#5a9bcf"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">        Illuminate\Bus\BusServiceProvider::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">21</span><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">        Illuminate\Cache\CacheServiceProvider::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">22</span><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">        Illuminate\Foundation\Providers\ConsoleSupportServiceProvider::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">23</span><span class="token unchanged line"></span><span class="token deleted-sign deleted prefix deleted" style="color:#5a9bcf">-</span><span class="token deleted-sign deleted line" style="color:#5a9bcf">        Illuminate\Cookie\CookieServiceProvider::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">24</span><span class="token deleted-sign deleted line" style="color:#5a9bcf"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">        Illuminate\Database\DatabaseServiceProvider::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">25</span><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">        Illuminate\Encryption\EncryptionServiceProvider::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">26</span><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">        Illuminate\Filesystem\FilesystemServiceProvider::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">27</span><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">        Illuminate\Foundation\Providers\FoundationServiceProvider::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">28</span><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">        Illuminate\Hashing\HashServiceProvider::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">29</span><span class="token unchanged line"></span><span class="token deleted-sign deleted prefix deleted" style="color:#5a9bcf">-</span><span class="token deleted-sign deleted line" style="color:#5a9bcf">        Illuminate\Mail\MailServiceProvider::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">30</span><span class="token deleted-sign deleted line" style="color:#5a9bcf"></span><span class="token deleted-sign deleted prefix deleted" style="color:#5a9bcf">-</span><span class="token deleted-sign deleted line" style="color:#5a9bcf">        Illuminate\Notifications\NotificationServiceProvider::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">31</span><span class="token deleted-sign deleted line" style="color:#5a9bcf"></span><span class="token deleted-sign deleted prefix deleted" style="color:#5a9bcf">-</span><span class="token deleted-sign deleted line" style="color:#5a9bcf">        Illuminate\Pagination\PaginationServiceProvider::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">32</span><span class="token deleted-sign deleted line" style="color:#5a9bcf"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">        Illuminate\Pipeline\PipelineServiceProvider::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">33</span><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">        Illuminate\Queue\QueueServiceProvider::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">34</span><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">        Illuminate\Redis\RedisServiceProvider::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">35</span><span class="token unchanged line"></span><span class="token deleted-sign deleted prefix deleted" style="color:#5a9bcf">-</span><span class="token deleted-sign deleted line" style="color:#5a9bcf">        Illuminate\Auth\Passwords\PasswordResetServiceProvider::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">36</span><span class="token deleted-sign deleted line" style="color:#5a9bcf"></span><span class="token deleted-sign deleted prefix deleted" style="color:#5a9bcf">-</span><span class="token deleted-sign deleted line" style="color:#5a9bcf">        Illuminate\Session\SessionServiceProvider::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">37</span><span class="token deleted-sign deleted line" style="color:#5a9bcf"></span><span class="token deleted-sign deleted prefix deleted" style="color:#5a9bcf">-</span><span class="token deleted-sign deleted line" style="color:#5a9bcf">        Illuminate\Translation\TranslationServiceProvider::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">38</span><span class="token deleted-sign deleted line" style="color:#5a9bcf"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">        Illuminate\Validation\ValidationServiceProvider::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">39</span><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">        Illuminate\View\ViewServiceProvider::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">40</span><span class="token unchanged line"></span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">41</span><span class="token plain">@@ -170,9 +161,6 @@ return [</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">42</span><span class="token plain"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">         * Application Service Providers...</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">43</span><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">         */</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">44</span><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">        App\Providers\AppServiceProvider::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">45</span><span class="token unchanged line"></span><span class="token deleted-sign deleted prefix deleted" style="color:#5a9bcf">-</span><span class="token deleted-sign deleted line" style="color:#5a9bcf">        App\Providers\AuthServiceProvider::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">46</span><span class="token deleted-sign deleted line" style="color:#5a9bcf"></span><span class="token deleted-sign deleted prefix deleted" style="color:#5a9bcf">-</span><span class="token deleted-sign deleted line" style="color:#5a9bcf">        // App\Providers\BroadcastServiceProvider::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">47</span><span class="token deleted-sign deleted line" style="color:#5a9bcf"></span><span class="token deleted-sign deleted prefix deleted" style="color:#5a9bcf">-</span><span class="token deleted-sign deleted line" style="color:#5a9bcf">        App\Providers\EventServiceProvider::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">48</span><span class="token deleted-sign deleted line" style="color:#5a9bcf"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">        App\Providers\RouteServiceProvider::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">49</span><span class="token unchanged line"></span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">50</span><span class="token plain"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">    ],</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">51</span><span class="token unchanged line"></span><span class="token plain">@@ -193,35 +181,21 @@ return [</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">52</span><span class="token plain"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">        &#x27;App&#x27; =&gt; Illuminate\Support\Facades\App::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">53</span><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">        &#x27;Arr&#x27; =&gt; Illuminate\Support\Arr::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">54</span><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">        &#x27;Artisan&#x27; =&gt; Illuminate\Support\Facades\Artisan::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">55</span><span class="token unchanged line"></span><span class="token deleted-sign deleted prefix deleted" style="color:#5a9bcf">-</span><span class="token deleted-sign deleted line" style="color:#5a9bcf">        &#x27;Auth&#x27; =&gt; Illuminate\Support\Facades\Auth::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">56</span><span class="token deleted-sign deleted line" style="color:#5a9bcf"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">        &#x27;Blade&#x27; =&gt; Illuminate\Support\Facades\Blade::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">57</span><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">        &#x27;Broadcast&#x27; =&gt; Illuminate\Support\Facades\Broadcast::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">58</span><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">        &#x27;Bus&#x27; =&gt; Illuminate\Support\Facades\Bus::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">59</span><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">        &#x27;Cache&#x27; =&gt; Illuminate\Support\Facades\Cache::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">60</span><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">        &#x27;Config&#x27; =&gt; Illuminate\Support\Facades\Config::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">61</span><span class="token unchanged line"></span><span class="token deleted-sign deleted prefix deleted" style="color:#5a9bcf">-</span><span class="token deleted-sign deleted line" style="color:#5a9bcf">        &#x27;Cookie&#x27; =&gt; Illuminate\Support\Facades\Cookie::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">62</span><span class="token deleted-sign deleted line" style="color:#5a9bcf"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">        &#x27;Crypt&#x27; =&gt; Illuminate\Support\Facades\Crypt::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">63</span><span class="token unchanged line"></span><span class="token deleted-sign deleted prefix deleted" style="color:#5a9bcf">-</span><span class="token deleted-sign deleted line" style="color:#5a9bcf">        &#x27;DB&#x27; =&gt; Illuminate\Support\Facades\DB::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">64</span><span class="token deleted-sign deleted line" style="color:#5a9bcf"></span><span class="token deleted-sign deleted prefix deleted" style="color:#5a9bcf">-</span><span class="token deleted-sign deleted line" style="color:#5a9bcf">        &#x27;Eloquent&#x27; =&gt; Illuminate\Database\Eloquent\Model::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">65</span><span class="token deleted-sign deleted line" style="color:#5a9bcf"></span><span class="token deleted-sign deleted prefix deleted" style="color:#5a9bcf">-</span><span class="token deleted-sign deleted line" style="color:#5a9bcf">        &#x27;Event&#x27; =&gt; Illuminate\Support\Facades\Event::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">66</span><span class="token deleted-sign deleted line" style="color:#5a9bcf"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">        &#x27;File&#x27; =&gt; Illuminate\Support\Facades\File::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">67</span><span class="token unchanged line"></span><span class="token deleted-sign deleted prefix deleted" style="color:#5a9bcf">-</span><span class="token deleted-sign deleted line" style="color:#5a9bcf">        &#x27;Gate&#x27; =&gt; Illuminate\Support\Facades\Gate::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">68</span><span class="token deleted-sign deleted line" style="color:#5a9bcf"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">        &#x27;Hash&#x27; =&gt; Illuminate\Support\Facades\Hash::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">69</span><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">        &#x27;Http&#x27; =&gt; Illuminate\Support\Facades\Http::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">70</span><span class="token unchanged line"></span><span class="token deleted-sign deleted prefix deleted" style="color:#5a9bcf">-</span><span class="token deleted-sign deleted line" style="color:#5a9bcf">        &#x27;Lang&#x27; =&gt; Illuminate\Support\Facades\Lang::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">71</span><span class="token deleted-sign deleted line" style="color:#5a9bcf"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">        &#x27;Log&#x27; =&gt; Illuminate\Support\Facades\Log::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">72</span><span class="token unchanged line"></span><span class="token deleted-sign deleted prefix deleted" style="color:#5a9bcf">-</span><span class="token deleted-sign deleted line" style="color:#5a9bcf">        &#x27;Mail&#x27; =&gt; Illuminate\Support\Facades\Mail::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">73</span><span class="token deleted-sign deleted line" style="color:#5a9bcf"></span><span class="token deleted-sign deleted prefix deleted" style="color:#5a9bcf">-</span><span class="token deleted-sign deleted line" style="color:#5a9bcf">        &#x27;Notification&#x27; =&gt; Illuminate\Support\Facades\Notification::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">74</span><span class="token deleted-sign deleted line" style="color:#5a9bcf"></span><span class="token deleted-sign deleted prefix deleted" style="color:#5a9bcf">-</span><span class="token deleted-sign deleted line" style="color:#5a9bcf">        &#x27;Password&#x27; =&gt; Illuminate\Support\Facades\Password::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">75</span><span class="token deleted-sign deleted line" style="color:#5a9bcf"></span><span class="token deleted-sign deleted prefix deleted" style="color:#5a9bcf">-</span><span class="token deleted-sign deleted line" style="color:#5a9bcf">        &#x27;Queue&#x27; =&gt; Illuminate\Support\Facades\Queue::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">76</span><span class="token deleted-sign deleted line" style="color:#5a9bcf"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">        &#x27;Redirect&#x27; =&gt; Illuminate\Support\Facades\Redirect::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">77</span><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">        // &#x27;Redis&#x27; =&gt; Illuminate\Support\Facades\Redis::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">78</span><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">        &#x27;Request&#x27; =&gt; Illuminate\Support\Facades\Request::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">79</span><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">        &#x27;Response&#x27; =&gt; Illuminate\Support\Facades\Response::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">80</span><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">        &#x27;Route&#x27; =&gt; Illuminate\Support\Facades\Route::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">81</span><span class="token unchanged line"></span><span class="token deleted-sign deleted prefix deleted" style="color:#5a9bcf">-</span><span class="token deleted-sign deleted line" style="color:#5a9bcf">        &#x27;Schema&#x27; =&gt; Illuminate\Support\Facades\Schema::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">82</span><span class="token deleted-sign deleted line" style="color:#5a9bcf"></span><span class="token deleted-sign deleted prefix deleted" style="color:#5a9bcf">-</span><span class="token deleted-sign deleted line" style="color:#5a9bcf">        &#x27;Session&#x27; =&gt; Illuminate\Support\Facades\Session::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">83</span><span class="token deleted-sign deleted line" style="color:#5a9bcf"></span><span class="token deleted-sign deleted prefix deleted" style="color:#5a9bcf">-</span><span class="token deleted-sign deleted line" style="color:#5a9bcf">        &#x27;Storage&#x27; =&gt; Illuminate\Support\Facades\Storage::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">84</span><span class="token deleted-sign deleted line" style="color:#5a9bcf"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">        &#x27;Str&#x27; =&gt; Illuminate\Support\Str::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">85</span><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">        &#x27;URL&#x27; =&gt; Illuminate\Support\Facades\URL::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">86</span><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">        &#x27;Validator&#x27; =&gt; Illuminate\Support\Facades\Validator::class,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">87</span><span class="token unchanged line"></span><span class="token deleted-sign deleted prefix deleted" style="color:#5a9bcf">-</span><span class="token deleted-sign deleted line" style="color:#5a9bcf">-</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">88</span><span class="token deleted-sign deleted line" style="color:#5a9bcf"></span><span class="token coord">2.28.0</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">89</span><span class="token plain" style="display:inline-block">
</span></div></pre></div></pre><p class="py-2">There are a few service providers that ideally we&#x27;d strip out but are tightly integrated into the framework. For instance, the database and queue service providers are both used by some Artisan commands, and it&#x27;s not very practical to disable only those commands, so removing them will stop Artisan from working. If you don&#x27;t mind running the development server manually, you can go ahead and remove these.</p><h2 class="py-4 text-2xl font-bold">Building the application</h2><p class="py-2">Now, let&#x27;s set out how our application will work. We will have two routes:</p><ul class="py-2 pl-4"><li class="list-disc">A route that accepts width and height parameters in the route itself, and responds with a PNG response sized accordingly</li><li class="list-disc">A route that returns a simple HTML homepage</li></ul><p class="py-2">You&#x27;ve no doubt seen various novelty placeholder sites like <a href="http://placekitten.com/" class="border-b-2 border-green-400">placekitten.com</a> for use in web projects, and this will be similar to that. We&#x27;ll use a simple black image with the dimensions in white text, but you should be able to use this as the basis of a more sophisticated placeholder service, such as if you wanted to use branded images for a particular client.</p><p class="py-2">Since the home page will be fairly straightforward, let&#x27;s do that first. Delete the existing <code>resources/views/welcome.blade.php</code> file and save this to <code>resources/views/home.blade.php</code>:</p><pre><span class="block w-full p-2 px-8 m-0 mt-2 -mb-4 overflow-x-auto font-mono text-sm text-gray-800 bg-gray-300 border-gray-800 rounded-t-lg shadow-lg bg-gradient-to-b from-gray-200 to-gray-300">resources/views/home.blade.php</span><div class="gatsby-highlight" data-language="html"><pre class="prism-code language-htmlresources/views/home.blade.php title" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token doctype punctuation" style="color:#8dc891">&lt;!</span><span class="token doctype doctype-tag" style="color:#999999">DOCTYPE</span><span class="token doctype" style="color:#999999"> </span><span class="token doctype name" style="color:#999999">html</span><span class="token doctype punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain"></span><span class="token tag punctuation" style="color:#8dc891">&lt;</span><span class="token tag" style="color:#fc929e">html</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">lang</span><span class="token tag attr-value punctuation attr-equals" style="color:#8dc891">=</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag attr-value" style="color:#8dc891">en</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain"></span><span class="token tag punctuation" style="color:#8dc891">&lt;</span><span class="token tag" style="color:#fc929e">head</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">    </span><span class="token tag punctuation" style="color:#8dc891">&lt;</span><span class="token tag" style="color:#fc929e">meta</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">charset</span><span class="token tag attr-value punctuation attr-equals" style="color:#8dc891">=</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag attr-value" style="color:#8dc891">utf-8</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">    </span><span class="token tag punctuation" style="color:#8dc891">&lt;</span><span class="token tag" style="color:#fc929e">title</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain">Laravel Placeholder Images</span><span class="token tag punctuation" style="color:#8dc891">&lt;/</span><span class="token tag" style="color:#fc929e">title</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">    </span><span class="token tag punctuation" style="color:#8dc891">&lt;</span><span class="token tag" style="color:#fc929e">link</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">href</span><span class="token tag attr-value punctuation attr-equals" style="color:#8dc891">=</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag attr-value" style="color:#8dc891">{{ mix(</span><span class="token tag attr-value punctuation" style="color:#8dc891">&#x27;</span><span class="token tag attr-value" style="color:#8dc891">css/app.css</span><span class="token tag attr-value punctuation" style="color:#8dc891">&#x27;</span><span class="token tag attr-value" style="color:#8dc891">) }}</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">rel</span><span class="token tag attr-value punctuation attr-equals" style="color:#8dc891">=</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag attr-value" style="color:#8dc891">stylesheet</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain"></span><span class="token tag punctuation" style="color:#8dc891">&lt;/</span><span class="token tag" style="color:#fc929e">head</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain"></span><span class="token tag punctuation" style="color:#8dc891">&lt;</span><span class="token tag" style="color:#fc929e">body</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">    </span><span class="token tag punctuation" style="color:#8dc891">&lt;</span><span class="token tag" style="color:#fc929e">h1</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain">Laravel Placeholder Images</span><span class="token tag punctuation" style="color:#8dc891">&lt;/</span><span class="token tag" style="color:#fc929e">h1</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain">    </span><span class="token tag punctuation" style="color:#8dc891">&lt;</span><span class="token tag" style="color:#fc929e">p</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain">This server can be used for serving placeholder</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain">    images for any web page.</span><span class="token tag punctuation" style="color:#8dc891">&lt;/</span><span class="token tag" style="color:#fc929e">p</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain">    </span><span class="token tag punctuation" style="color:#8dc891">&lt;</span><span class="token tag" style="color:#fc929e">p</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain">To request a placeholder image of a given width and height</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain">    simply include an image with the source pointing to</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain">    </span><span class="token tag punctuation" style="color:#8dc891">&lt;</span><span class="token tag" style="color:#fc929e">b</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain">/image/</span><span class="token entity named-entity" style="color:#d7deea">&amp;lt;</span><span class="token plain">width</span><span class="token entity named-entity" style="color:#d7deea">&amp;gt;</span><span class="token plain">x</span><span class="token entity named-entity" style="color:#d7deea">&amp;lt;</span><span class="token plain">height</span><span class="token entity named-entity" style="color:#d7deea">&amp;gt;</span><span class="token plain">/</span><span class="token tag punctuation" style="color:#8dc891">&lt;/</span><span class="token tag" style="color:#fc929e">b</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain">    on this server such as:</span><span class="token tag punctuation" style="color:#8dc891">&lt;/</span><span class="token tag" style="color:#fc929e">p</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token plain">    </span><span class="token tag punctuation" style="color:#8dc891">&lt;</span><span class="token tag" style="color:#fc929e">pre</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token plain">        </span><span class="token entity named-entity" style="color:#d7deea">&amp;lt;</span><span class="token plain">img src=&quot;{{ $example }}&quot; </span><span class="token entity named-entity" style="color:#d7deea">&amp;gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token plain">    </span><span class="token tag punctuation" style="color:#8dc891">&lt;/</span><span class="token tag" style="color:#fc929e">pre</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token plain">    </span><span class="token tag punctuation" style="color:#8dc891">&lt;</span><span class="token tag" style="color:#fc929e">h2</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain">Examples</span><span class="token tag punctuation" style="color:#8dc891">&lt;/</span><span class="token tag" style="color:#fc929e">h2</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token plain">    </span><span class="token tag punctuation" style="color:#8dc891">&lt;</span><span class="token tag" style="color:#fc929e">ul</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">21</span><span class="token plain">        </span><span class="token tag punctuation" style="color:#8dc891">&lt;</span><span class="token tag" style="color:#fc929e">li</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token tag punctuation" style="color:#8dc891">&lt;</span><span class="token tag" style="color:#fc929e">img</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#8dc891">=</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag attr-value" style="color:#8dc891">{{{ route(</span><span class="token tag attr-value punctuation" style="color:#8dc891">&#x27;</span><span class="token tag attr-value" style="color:#8dc891">placeholder</span><span class="token tag attr-value punctuation" style="color:#8dc891">&#x27;</span><span class="token tag attr-value" style="color:#8dc891">, [</span><span class="token tag attr-value punctuation" style="color:#8dc891">&#x27;</span><span class="token tag attr-value" style="color:#8dc891">width</span><span class="token tag attr-value punctuation" style="color:#8dc891">&#x27;</span><span class="token tag attr-value" style="color:#8dc891"> =&gt; 50, </span><span class="token tag attr-value punctuation" style="color:#8dc891">&#x27;</span><span class="token tag attr-value" style="color:#8dc891">height</span><span class="token tag attr-value punctuation" style="color:#8dc891">&#x27;</span><span class="token tag attr-value" style="color:#8dc891"> =&gt; 50]) }}}</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token tag punctuation" style="color:#8dc891">&lt;/</span><span class="token tag" style="color:#fc929e">li</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">22</span><span class="token plain">        </span><span class="token tag punctuation" style="color:#8dc891">&lt;</span><span class="token tag" style="color:#fc929e">li</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token tag punctuation" style="color:#8dc891">&lt;</span><span class="token tag" style="color:#fc929e">img</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#8dc891">=</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag attr-value" style="color:#8dc891">{{{ route(</span><span class="token tag attr-value punctuation" style="color:#8dc891">&#x27;</span><span class="token tag attr-value" style="color:#8dc891">placeholder</span><span class="token tag attr-value punctuation" style="color:#8dc891">&#x27;</span><span class="token tag attr-value" style="color:#8dc891">, [</span><span class="token tag attr-value punctuation" style="color:#8dc891">&#x27;</span><span class="token tag attr-value" style="color:#8dc891">width</span><span class="token tag attr-value punctuation" style="color:#8dc891">&#x27;</span><span class="token tag attr-value" style="color:#8dc891"> =&gt; 100, </span><span class="token tag attr-value punctuation" style="color:#8dc891">&#x27;</span><span class="token tag attr-value" style="color:#8dc891">height</span><span class="token tag attr-value punctuation" style="color:#8dc891">&#x27;</span><span class="token tag attr-value" style="color:#8dc891"> =&gt; 50]) }}}</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token tag punctuation" style="color:#8dc891">&lt;/</span><span class="token tag" style="color:#fc929e">li</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">23</span><span class="token plain">        </span><span class="token tag punctuation" style="color:#8dc891">&lt;</span><span class="token tag" style="color:#fc929e">li</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token tag punctuation" style="color:#8dc891">&lt;</span><span class="token tag" style="color:#fc929e">img</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#8dc891">=</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag attr-value" style="color:#8dc891">{{{ route(</span><span class="token tag attr-value punctuation" style="color:#8dc891">&#x27;</span><span class="token tag attr-value" style="color:#8dc891">placeholder</span><span class="token tag attr-value punctuation" style="color:#8dc891">&#x27;</span><span class="token tag attr-value" style="color:#8dc891">, [</span><span class="token tag attr-value punctuation" style="color:#8dc891">&#x27;</span><span class="token tag attr-value" style="color:#8dc891">width</span><span class="token tag attr-value punctuation" style="color:#8dc891">&#x27;</span><span class="token tag attr-value" style="color:#8dc891"> =&gt; 50, </span><span class="token tag attr-value punctuation" style="color:#8dc891">&#x27;</span><span class="token tag attr-value" style="color:#8dc891">height</span><span class="token tag attr-value punctuation" style="color:#8dc891">&#x27;</span><span class="token tag attr-value" style="color:#8dc891"> =&gt; 100]) }}}</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token tag punctuation" style="color:#8dc891">&lt;/</span><span class="token tag" style="color:#fc929e">li</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">24</span><span class="token plain">    </span><span class="token tag punctuation" style="color:#8dc891">&lt;/</span><span class="token tag" style="color:#fc929e">ul</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">25</span><span class="token plain"></span><span class="token tag punctuation" style="color:#8dc891">&lt;/</span><span class="token tag" style="color:#fc929e">body</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">26</span><span class="token plain"></span><span class="token tag punctuation" style="color:#8dc891">&lt;/</span><span class="token tag" style="color:#fc929e">html</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Note we&#x27;re using the <code>route()</code> helper to add some example images, even though it&#x27;s not in place yet. Add this route to your <code>routes/web.php</code> as well:</p><pre><span class="block w-full p-2 px-8 m-0 mt-2 -mb-4 overflow-x-auto font-mono text-sm text-gray-800 bg-gray-300 border-gray-800 rounded-t-lg shadow-lg bg-gradient-to-b from-gray-200 to-gray-300">routes/web.php</span><div class="gatsby-highlight" data-language="php"><pre class="prism-code language-phproutes/web.php title" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token class-name static-context" style="color:#FAC863">Route</span><span class="token operator" style="color:#d7deea">::</span><span class="token function" style="color:#79b6f2">get</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;/&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">view</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;home&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">        </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;example&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">route</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;placeholder&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;width&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=&gt;</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">50</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;height&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=&gt;</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">50</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">]</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Again, note that we&#x27;re using the <code>route()</code> helper to get the URL for the placeholder image. Next, we need to create the outline of the route for getting the placeholders:</p><pre><span class="block w-full p-2 px-8 m-0 mt-2 -mb-4 overflow-x-auto font-mono text-sm text-gray-800 bg-gray-300 border-gray-800 rounded-t-lg shadow-lg bg-gradient-to-b from-gray-200 to-gray-300">routes/web.php</span><div class="gatsby-highlight" data-language="php"><pre class="prism-code language-phproutes/web.php title" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token class-name static-context" style="color:#FAC863">Route</span><span class="token operator" style="color:#d7deea">::</span><span class="token function" style="color:#79b6f2">get</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;/placeholder/{width}x{height}&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token keyword type-hint" style="color:#c5a5c5">int</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$width</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token keyword type-hint" style="color:#c5a5c5">int</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$height</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">where</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">[</span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;width&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=&gt;</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;[0-9]+&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;height&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=&gt;</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;[0-9]+&#x27;</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">    </span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">name</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;placeholder&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Due to the limited scope of this application, we won&#x27;t bother with full controllers, but you can add them if you wish. Note we&#x27;ve specified the name <code>placeholder</code> and set a regex to validate the <code>width</code> and <code>height</code> parameters.</p><p class="py-2">Now let&#x27;s populate the callback to generate a PNG file.</p><pre><span class="block w-full p-2 px-8 m-0 mt-2 -mb-4 overflow-x-auto font-mono text-sm text-gray-800 bg-gray-300 border-gray-800 rounded-t-lg shadow-lg bg-gradient-to-b from-gray-200 to-gray-300">routes/web.php</span><div class="gatsby-highlight" data-language="php"><pre class="prism-code language-phproutes/web.php title" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token class-name static-context" style="color:#FAC863">Route</span><span class="token operator" style="color:#d7deea">::</span><span class="token function" style="color:#79b6f2">get</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;/placeholder/{width}x{height}&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token keyword type-hint" style="color:#c5a5c5">int</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$width</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token keyword type-hint" style="color:#c5a5c5">int</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$height</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line highlight-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token operator" style="color:#d7deea">!</span><span class="token variable" style="color:#d7deea">$img</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">imagecreatetruecolor</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token variable" style="color:#d7deea">$width</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$height</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line highlight-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">        </span><span class="token function" style="color:#79b6f2">abort</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line highlight-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line highlight-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">    </span><span class="token variable" style="color:#d7deea">$textColour</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">imagecolorallocate</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token variable" style="color:#d7deea">$img</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">255</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">255</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">255</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line highlight-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">    </span><span class="token function" style="color:#79b6f2">imagestring</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token variable" style="color:#d7deea">$img</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">1</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">5</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">5</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token string double-quoted-string" style="color:#8dc891">&quot;</span><span class="token string double-quoted-string interpolation variable" style="color:#d7deea">$width</span><span class="token string double-quoted-string" style="color:#8dc891"> X </span><span class="token string double-quoted-string interpolation variable" style="color:#d7deea">$height</span><span class="token string double-quoted-string" style="color:#8dc891">&quot;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$textColour</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line highlight-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">    </span><span class="token function" style="color:#79b6f2">ob_start</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line highlight-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain">    </span><span class="token function" style="color:#79b6f2">imagepng</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token variable" style="color:#d7deea">$img</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line highlight-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">    </span><span class="token variable" style="color:#d7deea">$file</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">ob_get_contents</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line highlight-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain">    </span><span class="token function" style="color:#79b6f2">ob_end_clean</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line highlight-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">response</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">make</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token variable" style="color:#d7deea">$file</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">200</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token plain"></span></div><div class="token-line highlight-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain">        </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;Content-type&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=&gt;</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;image/png&#x27;</span><span class="token plain"></span></div><div class="token-line highlight-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">]</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">where</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">[</span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;width&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=&gt;</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;[0-9]+&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;height&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=&gt;</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;[0-9]+&#x27;</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain">    </span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">name</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;placeholder&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">We&#x27;ll also add some very basic CSS to the provided CSS file:</p><pre><span class="block w-full p-2 px-8 m-0 mt-2 -mb-4 overflow-x-auto font-mono text-sm text-gray-800 bg-gray-300 border-gray-800 rounded-t-lg shadow-lg bg-gradient-to-b from-gray-200 to-gray-300">resources/css/app.css</span><div class="gatsby-highlight" data-language="css"><pre class="prism-code language-cssresources/css/app.css title" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token selector" style="color:#D8DEE9">body</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">    </span><span class="token property" style="color:#5a9bcf">text-align</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> center</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain"></span><span class="token selector" style="color:#D8DEE9">ul</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">    </span><span class="token property" style="color:#5a9bcf">list-type</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> none</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain"></span><span class="token selector" style="color:#D8DEE9">li</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain">    </span><span class="token property" style="color:#5a9bcf">display</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> inline-block</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Don&#x27;t forget to build this with <code>npm install &amp;&amp; npm run production</code> too.</p><p class="py-2">If you now run <code>php artisan serve</code> you should be able to see that it works - the homepage renders, and the embedded images are pulled in OK. However, there are three potential issues:</p><ul class="py-2 pl-4"><li class="list-disc">The images themselves are regenerated each time. Since they never change, it&#x27;s a no-brainer to cache them indefinitely for the best performance, and if we do need to change them in the future we can just flush the cache to resolve this</li><li class="list-disc">Similarly, we should use ETags to allow the application to tell the browser when the image has changed</li><li class="list-disc">There&#x27;s no limit on how large images can be, so a malicious user could request a huge image to break the system</li></ul><p class="py-2">Let&#x27;s tackle these in order. First, let&#x27;s create some middleware to handle the caching:</p><pre><span class="block w-full p-2 px-8 m-0 mt-2 -mb-4 overflow-x-auto font-mono text-sm text-gray-800 bg-gray-300 border-gray-800 rounded-t-lg shadow-lg bg-gradient-to-b from-gray-200 to-gray-300">app/Http/Middleware/CacheImages.php</span><div class="gatsby-highlight" data-language="php"><pre class="prism-code language-phpapp/Http/Middleware/CacheImages.php title" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token delimiter important" style="font-weight:400">&lt;?php</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">namespace</span><span class="token plain"> </span><span class="token package">App</span><span class="token package punctuation" style="color:#8dc891">\</span><span class="token package">Http</span><span class="token package punctuation" style="color:#8dc891">\</span><span class="token package">Middleware</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">use</span><span class="token plain"> </span><span class="token package">Closure</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">use</span><span class="token plain"> </span><span class="token package">Illuminate</span><span class="token package punctuation" style="color:#8dc891">\</span><span class="token package">Http</span><span class="token package punctuation" style="color:#8dc891">\</span><span class="token package">Request</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">use</span><span class="token plain"> </span><span class="token package">Illuminate</span><span class="token package punctuation" style="color:#8dc891">\</span><span class="token package">Support</span><span class="token package punctuation" style="color:#8dc891">\</span><span class="token package">Facades</span><span class="token package punctuation" style="color:#8dc891">\</span><span class="token package">Cache</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">final</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name-definition class-name" style="color:#FAC863">CacheImages</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain">    </span><span class="token comment" style="color:#999999">/**</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token comment" style="color:#999999">     * Handle an incoming request.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token comment" style="color:#999999">     *</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token comment" style="color:#999999">     * @param  \Illuminate\Http\Request  $request</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token comment" style="color:#999999">     * @param  \Closure  $next</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token comment" style="color:#999999">     * @return mixed</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token comment" style="color:#999999">     */</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">public</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">function</span><span class="token plain"> </span><span class="token function-definition function" style="color:#79b6f2">handle</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token class-name type-declaration" style="color:#FAC863">Request</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$request</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token class-name type-declaration" style="color:#FAC863">Closure</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$next</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token plain">        </span><span class="token variable" style="color:#d7deea">$key</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">sprintf</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string double-quoted-string" style="color:#8dc891">&quot;%d.%d&quot;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$request</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token property" style="color:#5a9bcf">width</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$request</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token property" style="color:#5a9bcf">height</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">21</span><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> </span><span class="token class-name static-context" style="color:#FAC863">Cache</span><span class="token operator" style="color:#d7deea">::</span><span class="token function" style="color:#79b6f2">rememberForever</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token variable" style="color:#d7deea">$key</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">use</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token variable" style="color:#d7deea">$next</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$request</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">22</span><span class="token plain">            </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$next</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token variable" style="color:#d7deea">$request</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">23</span><span class="token plain">        </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">24</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">25</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">We construct a cache key from the request width and height, and use the <code>Cache::rememberForever()</code> method to cache the response. We then register this middleware as route middleware in <code>app/Http/Kernel.php</code>:</p><pre><span class="block w-full p-2 px-8 m-0 mt-2 -mb-4 overflow-x-auto font-mono text-sm text-gray-800 bg-gray-300 border-gray-800 rounded-t-lg shadow-lg bg-gradient-to-b from-gray-200 to-gray-300">app/Http/Kernel.php</span><div class="gatsby-highlight" data-language="php"><pre class="prism-code language-phpapp/Http/Kernel.php title" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">protected</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$routeMiddleware</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">        </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;cache.headers&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=&gt;</span><span class="token plain"> </span><span class="token class-name class-name-fully-qualified static-context punctuation" style="color:#8dc891">\</span><span class="token class-name class-name-fully-qualified static-context" style="color:#FAC863">Illuminate</span><span class="token class-name class-name-fully-qualified static-context punctuation" style="color:#8dc891">\</span><span class="token class-name class-name-fully-qualified static-context" style="color:#FAC863">Http</span><span class="token class-name class-name-fully-qualified static-context punctuation" style="color:#8dc891">\</span><span class="token class-name class-name-fully-qualified static-context" style="color:#FAC863">Middleware</span><span class="token class-name class-name-fully-qualified static-context punctuation" style="color:#8dc891">\</span><span class="token class-name class-name-fully-qualified static-context" style="color:#FAC863">SetCacheHeaders</span><span class="token operator" style="color:#d7deea">::</span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">        </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;signed&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=&gt;</span><span class="token plain"> </span><span class="token class-name class-name-fully-qualified static-context punctuation" style="color:#8dc891">\</span><span class="token class-name class-name-fully-qualified static-context" style="color:#FAC863">Illuminate</span><span class="token class-name class-name-fully-qualified static-context punctuation" style="color:#8dc891">\</span><span class="token class-name class-name-fully-qualified static-context" style="color:#FAC863">Routing</span><span class="token class-name class-name-fully-qualified static-context punctuation" style="color:#8dc891">\</span><span class="token class-name class-name-fully-qualified static-context" style="color:#FAC863">Middleware</span><span class="token class-name class-name-fully-qualified static-context punctuation" style="color:#8dc891">\</span><span class="token class-name class-name-fully-qualified static-context" style="color:#FAC863">ValidateSignature</span><span class="token operator" style="color:#d7deea">::</span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">        </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;throttle&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=&gt;</span><span class="token plain"> </span><span class="token class-name class-name-fully-qualified static-context punctuation" style="color:#8dc891">\</span><span class="token class-name class-name-fully-qualified static-context" style="color:#FAC863">Illuminate</span><span class="token class-name class-name-fully-qualified static-context punctuation" style="color:#8dc891">\</span><span class="token class-name class-name-fully-qualified static-context" style="color:#FAC863">Routing</span><span class="token class-name class-name-fully-qualified static-context punctuation" style="color:#8dc891">\</span><span class="token class-name class-name-fully-qualified static-context" style="color:#FAC863">Middleware</span><span class="token class-name class-name-fully-qualified static-context punctuation" style="color:#8dc891">\</span><span class="token class-name class-name-fully-qualified static-context" style="color:#FAC863">ThrottleRequests</span><span class="token operator" style="color:#d7deea">::</span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line highlight-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">        </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;cache.images&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=&gt;</span><span class="token plain"> </span><span class="token class-name class-name-fully-qualified static-context punctuation" style="color:#8dc891">\</span><span class="token class-name class-name-fully-qualified static-context" style="color:#FAC863">App</span><span class="token class-name class-name-fully-qualified static-context punctuation" style="color:#8dc891">\</span><span class="token class-name class-name-fully-qualified static-context" style="color:#FAC863">Http</span><span class="token class-name class-name-fully-qualified static-context punctuation" style="color:#8dc891">\</span><span class="token class-name class-name-fully-qualified static-context" style="color:#FAC863">Middleware</span><span class="token class-name class-name-fully-qualified static-context punctuation" style="color:#8dc891">\</span><span class="token class-name class-name-fully-qualified static-context" style="color:#FAC863">CacheImages</span><span class="token operator" style="color:#d7deea">::</span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">]</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">And apply it to the image route:</p><pre><span class="block w-full p-2 px-8 m-0 mt-2 -mb-4 overflow-x-auto font-mono text-sm text-gray-800 bg-gray-300 border-gray-800 rounded-t-lg shadow-lg bg-gradient-to-b from-gray-200 to-gray-300">routes/web.php</span><div class="gatsby-highlight" data-language="php"><pre class="prism-code language-phproutes/web.php title" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token class-name static-context" style="color:#FAC863">Route</span><span class="token operator" style="color:#d7deea">::</span><span class="token function" style="color:#79b6f2">get</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;/placeholder/{width}x{height}&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token keyword type-hint" style="color:#c5a5c5">int</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$width</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token keyword type-hint" style="color:#c5a5c5">int</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$height</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token operator" style="color:#d7deea">!</span><span class="token variable" style="color:#d7deea">$img</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">imagecreatetruecolor</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token variable" style="color:#d7deea">$width</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$height</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">        </span><span class="token function" style="color:#79b6f2">abort</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">    </span><span class="token variable" style="color:#d7deea">$textColour</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">imagecolorallocate</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token variable" style="color:#d7deea">$img</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">255</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">255</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">255</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">    </span><span class="token function" style="color:#79b6f2">imagestring</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token variable" style="color:#d7deea">$img</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">1</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">5</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">5</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token string double-quoted-string" style="color:#8dc891">&quot;</span><span class="token string double-quoted-string interpolation variable" style="color:#d7deea">$width</span><span class="token string double-quoted-string" style="color:#8dc891"> X </span><span class="token string double-quoted-string interpolation variable" style="color:#d7deea">$height</span><span class="token string double-quoted-string" style="color:#8dc891">&quot;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$textColour</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">    </span><span class="token function" style="color:#79b6f2">ob_start</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain">    </span><span class="token function" style="color:#79b6f2">imagepng</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token variable" style="color:#d7deea">$img</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">    </span><span class="token variable" style="color:#d7deea">$file</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">ob_get_contents</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain">    </span><span class="token function" style="color:#79b6f2">ob_end_clean</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">response</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">make</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token variable" style="color:#d7deea">$file</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">200</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain">        </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;Content-type&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=&gt;</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;image/png&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">]</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">where</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">[</span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;width&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=&gt;</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;[0-9]+&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;height&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=&gt;</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;[0-9]+&#x27;</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain">  </span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">name</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;placeholder&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line highlight-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token plain">  </span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">middleware</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;cache.images&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Next, let&#x27;s set ETags on our images. Laravel comes with the <code>cache.headers</code> middleware, which we can easily wrap around our placeholder route:</p><pre><span class="block w-full p-2 px-8 m-0 mt-2 -mb-4 overflow-x-auto font-mono text-sm text-gray-800 bg-gray-300 border-gray-800 rounded-t-lg shadow-lg bg-gradient-to-b from-gray-200 to-gray-300">routes/web.php</span><div class="gatsby-highlight" data-language="php"><pre class="prism-code language-phproutes/web.php title" style="background-color:#282c34;color:#ffffff"><div class="token-line highlight-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token class-name static-context" style="color:#FAC863">Route</span><span class="token operator" style="color:#d7deea">::</span><span class="token function" style="color:#79b6f2">middleware</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;cache.headers:public;etag&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">group</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token keyword" style="color:#c5a5c5">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">    </span><span class="token class-name static-context" style="color:#FAC863">Route</span><span class="token operator" style="color:#d7deea">::</span><span class="token function" style="color:#79b6f2">get</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;/placeholder/{width}x{height}&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token keyword type-hint" style="color:#c5a5c5">int</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$width</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token keyword type-hint" style="color:#c5a5c5">int</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$height</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token operator" style="color:#d7deea">!</span><span class="token variable" style="color:#d7deea">$img</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">imagecreatetruecolor</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token variable" style="color:#d7deea">$width</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$height</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">            </span><span class="token function" style="color:#79b6f2">abort</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">        </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">        </span><span class="token variable" style="color:#d7deea">$textColour</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">imagecolorallocate</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token variable" style="color:#d7deea">$img</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">255</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">255</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">255</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">        </span><span class="token function" style="color:#79b6f2">imagestring</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token variable" style="color:#d7deea">$img</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">1</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">5</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">5</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token string double-quoted-string" style="color:#8dc891">&quot;</span><span class="token string double-quoted-string interpolation variable" style="color:#d7deea">$width</span><span class="token string double-quoted-string" style="color:#8dc891"> X </span><span class="token string double-quoted-string interpolation variable" style="color:#d7deea">$height</span><span class="token string double-quoted-string" style="color:#8dc891">&quot;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$textColour</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain">        </span><span class="token function" style="color:#79b6f2">ob_start</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">        </span><span class="token function" style="color:#79b6f2">imagepng</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token variable" style="color:#d7deea">$img</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain">        </span><span class="token variable" style="color:#d7deea">$file</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">ob_get_contents</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain">        </span><span class="token function" style="color:#79b6f2">ob_end_clean</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">response</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">make</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token variable" style="color:#d7deea">$file</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">200</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain">            </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;Content-type&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=&gt;</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;image/png&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain">        </span><span class="token punctuation" style="color:#8dc891">]</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">where</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">[</span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;width&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=&gt;</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;[0-9]+&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;height&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=&gt;</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;[0-9]+&#x27;</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token plain">      </span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">name</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;placeholder&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token plain">      </span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">middleware</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;cache.images&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line highlight-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Finally, let&#x27;s handle the dimensions issue. Again, this is something that is probably best handled in middleware since that way it can be rejected before the point it gets to the route handler. All we need to do is to check to see if the width and height parameters exceed the intended value, and throw an error in the middleware:</p><pre><span class="block w-full p-2 px-8 m-0 mt-2 -mb-4 overflow-x-auto font-mono text-sm text-gray-800 bg-gray-300 border-gray-800 rounded-t-lg shadow-lg bg-gradient-to-b from-gray-200 to-gray-300">app/Http/Middleware/ValidateImageDimensions.php</span><div class="gatsby-highlight" data-language="php"><pre class="prism-code language-phpapp/Http/Middleware/ValidateImageDimensions.php title" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token delimiter important" style="font-weight:400">&lt;?php</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">namespace</span><span class="token plain"> </span><span class="token package">App</span><span class="token package punctuation" style="color:#8dc891">\</span><span class="token package">Http</span><span class="token package punctuation" style="color:#8dc891">\</span><span class="token package">Middleware</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">use</span><span class="token plain"> </span><span class="token package">Closure</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">use</span><span class="token plain"> </span><span class="token package">Illuminate</span><span class="token package punctuation" style="color:#8dc891">\</span><span class="token package">Http</span><span class="token package punctuation" style="color:#8dc891">\</span><span class="token package">Request</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">use</span><span class="token plain"> </span><span class="token package">Illuminate</span><span class="token package punctuation" style="color:#8dc891">\</span><span class="token package">Validation</span><span class="token package punctuation" style="color:#8dc891">\</span><span class="token package">ValidationException</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">final</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name-definition class-name" style="color:#FAC863">ValidateImageDimensions</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain">    </span><span class="token comment" style="color:#999999">/**</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token comment" style="color:#999999">     * Handle an incoming request.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token comment" style="color:#999999">     *</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token comment" style="color:#999999">     * @param  \Illuminate\Http\Request  $request</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token comment" style="color:#999999">     * @param  \Closure  $next</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token comment" style="color:#999999">     * @return mixed</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token comment" style="color:#999999">     */</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">public</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">function</span><span class="token plain"> </span><span class="token function-definition function" style="color:#79b6f2">handle</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token class-name type-declaration" style="color:#FAC863">Request</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$request</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token class-name type-declaration" style="color:#FAC863">Closure</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$next</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token variable" style="color:#d7deea">$request</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token property" style="color:#5a9bcf">width</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">2000</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">||</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$request</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token property" style="color:#5a9bcf">height</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">2000</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">21</span><span class="token plain">            </span><span class="token function" style="color:#79b6f2">abort</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token number" style="color:#5a9bcf">422</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;Height and width cannot exceed 2000 pixels&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">22</span><span class="token plain">        </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">23</span><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$next</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token variable" style="color:#d7deea">$request</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">24</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">25</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Register this middleware in <code>app/Http/Kernel.php</code>:</p><pre><span class="block w-full p-2 px-8 m-0 mt-2 -mb-4 overflow-x-auto font-mono text-sm text-gray-800 bg-gray-300 border-gray-800 rounded-t-lg shadow-lg bg-gradient-to-b from-gray-200 to-gray-300">app/Http/Kernel.php</span><div class="gatsby-highlight" data-language="php"><pre class="prism-code language-phpapp/Http/Kernel.php title" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">protected</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$routeMiddleware</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">        </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;cache.headers&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=&gt;</span><span class="token plain"> </span><span class="token class-name class-name-fully-qualified static-context punctuation" style="color:#8dc891">\</span><span class="token class-name class-name-fully-qualified static-context" style="color:#FAC863">Illuminate</span><span class="token class-name class-name-fully-qualified static-context punctuation" style="color:#8dc891">\</span><span class="token class-name class-name-fully-qualified static-context" style="color:#FAC863">Http</span><span class="token class-name class-name-fully-qualified static-context punctuation" style="color:#8dc891">\</span><span class="token class-name class-name-fully-qualified static-context" style="color:#FAC863">Middleware</span><span class="token class-name class-name-fully-qualified static-context punctuation" style="color:#8dc891">\</span><span class="token class-name class-name-fully-qualified static-context" style="color:#FAC863">SetCacheHeaders</span><span class="token operator" style="color:#d7deea">::</span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">        </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;signed&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=&gt;</span><span class="token plain"> </span><span class="token class-name class-name-fully-qualified static-context punctuation" style="color:#8dc891">\</span><span class="token class-name class-name-fully-qualified static-context" style="color:#FAC863">Illuminate</span><span class="token class-name class-name-fully-qualified static-context punctuation" style="color:#8dc891">\</span><span class="token class-name class-name-fully-qualified static-context" style="color:#FAC863">Routing</span><span class="token class-name class-name-fully-qualified static-context punctuation" style="color:#8dc891">\</span><span class="token class-name class-name-fully-qualified static-context" style="color:#FAC863">Middleware</span><span class="token class-name class-name-fully-qualified static-context punctuation" style="color:#8dc891">\</span><span class="token class-name class-name-fully-qualified static-context" style="color:#FAC863">ValidateSignature</span><span class="token operator" style="color:#d7deea">::</span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">        </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;throttle&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=&gt;</span><span class="token plain"> </span><span class="token class-name class-name-fully-qualified static-context punctuation" style="color:#8dc891">\</span><span class="token class-name class-name-fully-qualified static-context" style="color:#FAC863">Illuminate</span><span class="token class-name class-name-fully-qualified static-context punctuation" style="color:#8dc891">\</span><span class="token class-name class-name-fully-qualified static-context" style="color:#FAC863">Routing</span><span class="token class-name class-name-fully-qualified static-context punctuation" style="color:#8dc891">\</span><span class="token class-name class-name-fully-qualified static-context" style="color:#FAC863">Middleware</span><span class="token class-name class-name-fully-qualified static-context punctuation" style="color:#8dc891">\</span><span class="token class-name class-name-fully-qualified static-context" style="color:#FAC863">ThrottleRequests</span><span class="token operator" style="color:#d7deea">::</span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line highlight-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">        </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;cache.images&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=&gt;</span><span class="token plain"> </span><span class="token class-name class-name-fully-qualified static-context punctuation" style="color:#8dc891">\</span><span class="token class-name class-name-fully-qualified static-context" style="color:#FAC863">App</span><span class="token class-name class-name-fully-qualified static-context punctuation" style="color:#8dc891">\</span><span class="token class-name class-name-fully-qualified static-context" style="color:#FAC863">Http</span><span class="token class-name class-name-fully-qualified static-context punctuation" style="color:#8dc891">\</span><span class="token class-name class-name-fully-qualified static-context" style="color:#FAC863">Middleware</span><span class="token class-name class-name-fully-qualified static-context punctuation" style="color:#8dc891">\</span><span class="token class-name class-name-fully-qualified static-context" style="color:#FAC863">CacheImages</span><span class="token operator" style="color:#d7deea">::</span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">        </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;validate.images&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=&gt;</span><span class="token plain"> </span><span class="token class-name class-name-fully-qualified static-context punctuation" style="color:#8dc891">\</span><span class="token class-name class-name-fully-qualified static-context" style="color:#FAC863">App</span><span class="token class-name class-name-fully-qualified static-context punctuation" style="color:#8dc891">\</span><span class="token class-name class-name-fully-qualified static-context" style="color:#FAC863">Http</span><span class="token class-name class-name-fully-qualified static-context punctuation" style="color:#8dc891">\</span><span class="token class-name class-name-fully-qualified static-context" style="color:#FAC863">Middleware</span><span class="token class-name class-name-fully-qualified static-context punctuation" style="color:#8dc891">\</span><span class="token class-name class-name-fully-qualified static-context" style="color:#FAC863">ValidateImageDimensions</span><span class="token operator" style="color:#d7deea">::</span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">]</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">And apply it to the image route:</p><pre><span class="block w-full p-2 px-8 m-0 mt-2 -mb-4 overflow-x-auto font-mono text-sm text-gray-800 bg-gray-300 border-gray-800 rounded-t-lg shadow-lg bg-gradient-to-b from-gray-200 to-gray-300">routes/web.php</span><div class="gatsby-highlight" data-language="php"><pre class="prism-code language-phproutes/web.php title" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token class-name static-context" style="color:#FAC863">Route</span><span class="token operator" style="color:#d7deea">::</span><span class="token function" style="color:#79b6f2">middleware</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;cache.headers:public;etag&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">group</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token keyword" style="color:#c5a5c5">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">    </span><span class="token class-name static-context" style="color:#FAC863">Route</span><span class="token operator" style="color:#d7deea">::</span><span class="token function" style="color:#79b6f2">get</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;/placeholder/{width}x{height}&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token keyword type-hint" style="color:#c5a5c5">int</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$width</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token keyword type-hint" style="color:#c5a5c5">int</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$height</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token operator" style="color:#d7deea">!</span><span class="token variable" style="color:#d7deea">$img</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">imagecreatetruecolor</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token variable" style="color:#d7deea">$width</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$height</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">            </span><span class="token function" style="color:#79b6f2">abort</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">        </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">        </span><span class="token variable" style="color:#d7deea">$textColour</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">imagecolorallocate</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token variable" style="color:#d7deea">$img</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">255</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">255</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">255</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">        </span><span class="token function" style="color:#79b6f2">imagestring</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token variable" style="color:#d7deea">$img</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">1</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">5</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">5</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token string double-quoted-string" style="color:#8dc891">&quot;</span><span class="token string double-quoted-string interpolation variable" style="color:#d7deea">$width</span><span class="token string double-quoted-string" style="color:#8dc891"> X </span><span class="token string double-quoted-string interpolation variable" style="color:#d7deea">$height</span><span class="token string double-quoted-string" style="color:#8dc891">&quot;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$textColour</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain">        </span><span class="token function" style="color:#79b6f2">ob_start</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">        </span><span class="token function" style="color:#79b6f2">imagepng</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token variable" style="color:#d7deea">$img</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain">        </span><span class="token variable" style="color:#d7deea">$file</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">ob_get_contents</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain">        </span><span class="token function" style="color:#79b6f2">ob_end_clean</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">response</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">make</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token variable" style="color:#d7deea">$file</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">200</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain">            </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;Content-type&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=&gt;</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;image/png&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain">        </span><span class="token punctuation" style="color:#8dc891">]</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">where</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">[</span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;width&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=&gt;</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;[0-9]+&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;height&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=&gt;</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;[0-9]+&#x27;</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token plain">      </span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">name</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;placeholder&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line highlight-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token plain">      </span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">middleware</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">[</span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;validate.images&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;cache.images&#x27;</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">And we&#x27;re done! We now have a basic, but functional, stateless Laravel application that&#x27;s been stripped of a lot of the unnecessary functionality. There are a few further changes that could be made to expand this if necessary, such as:</p><ul class="py-2 pl-4"><li class="list-disc">Amend the project to allow requesting different image formats using an additional route parameter (hint - you&#x27;ll want to use something like <a href="http://image.intervention.io/" class="border-b-2 border-green-400">Intervention for this</a>)</li><li class="list-disc">Serve different images, either by using one as a starting template so they are all branded the same, or specifying one from several options in the URL, such as with <a href="https://www.placecage.com/" class="border-b-2 border-green-400">PlaceCage</a></li></ul><p class="py-2">However, I will leave these as an exercise for the reader. The code for this project is available on <a href="https://github.com/matthewbdaly/lightweight-laravel" class="border-b-2 border-green-400">Github</a> if you get stuck at any point.</p><p class="py-2">Hopefully, this article has given you some food for thought about how you can use Laravel for applications you might have previously considered too small to use it for. Don&#x27;t worry too much about removing something that you need to add later - version control means you can always retrieve it if it turns out you do need it later. I&#x27;d also add that potentially the same approach can be applied to other full stack PHP frameworks, though you&#x27;ll have to do some exploring on your own to determine this.</p></section><hr/><div class="py-4"><a class="p-category" href="/blog/categories/php/"><span class="inline-block px-4 py-2 my-2 mr-2 text-sm font-bold text-gray-900 bg-purple-200 rounded-full hover:bg-purple-800 hover:text-gray-200 transition-colors duration-500">php</span></a><a class="p-category" href="/blog/categories/laravel/"><span class="inline-block px-4 py-2 my-2 mr-2 text-sm font-bold text-gray-900 bg-purple-200 rounded-full hover:bg-purple-800 hover:text-gray-200 transition-colors duration-500">laravel</span></a></div><nav class="pt-4 clear-both box-border"><a rel="prev" class="float-left w-1/2 p-2 shadow-sm hover:bg-gray-200 dark:hover:bg-gray-800 transition duration-300 ease-in-out" href="/blog/2020/09/28/what-i-want-in-a-php-cms/"><p><strong class="font-bold clear-both">← Previous page</strong></p><p class="pl-6">What I want in a PHP CMS</p></a><a rel="next" class="float-right w-1/2 p-2 shadow-sm hover:bg-gray-200 dark:hover:bg-gray-800 transition duration-300 ease-in-out" href="/blog/2021/07/28/moving-to-gatsby-js/"><p><strong>→ Next page</strong></p><p class="pl-6">Moving to Gatsby.js</p></a></nav><div id="disqus_thread"></div></article></main></div><footer class="w-full p-4 text-gray-100 bg-gray-800"><ul class="flex flex-row flex-wrap justify-center w-full p-2 mx-auto text-center md:w-2/3 box-border"><li class="w-1/3 my-2 md:w-1/5"><a href="/posts/1">Blog</a></li><li class="w-1/3 my-2 md:w-1/5"><a href="/about">About</a></li><li class="w-1/3 my-2 md:w-1/5"><a href="https://twitter.com/mattbd">Twitter</a></li><li class="w-1/3 my-2 md:w-1/5"><a href="https://github.com/matthewbdaly">Github</a></li><li class="w-1/3 my-2 md:w-1/5"><a href="/rss.xml">Feed</a></li></ul><div class="w-full p-4 mx-auto text-center md:w-2/3"><p>© Matthew Daly <!-- -->2021</p></div></footer></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-17043630-1', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/2020/12/30/lightweight-laravel-deconstructing-a-full-stack-framework/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-6860dcd81490c6aa82f7.js"],"app":["/app-ee7d5025f6bfd6d08ba0.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-f73ba0fd1f8ccd9c9e51.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-61066985f9a56e482391.js"],"component---src-pages-search-tsx":["/component---src-pages-search-tsx-b0153b8022a3ca83ac9a.js"],"component---src-templates-404-tsx":["/component---src-templates-404-tsx-ab0075b3d63edf37ce8b.js"],"component---src-templates-archives-tsx":["/component---src-templates-archives-tsx-d6565df0adcf40921e81.js"],"component---src-templates-categories-tsx":["/component---src-templates-categories-tsx-9d8c91434e407a29b108.js"],"component---src-templates-category-tsx":["/component---src-templates-category-tsx-c4b49257550e7ce69c55.js"],"component---src-templates-chunk-tsx":["/component---src-templates-chunk-tsx-8964f592e3e995933e96.js"],"component---src-templates-page-tsx":["/component---src-templates-page-tsx-26f553a9953981738a84.js"],"component---src-templates-post-tsx":["/component---src-templates-post-tsx-cc8c6bdbcd5a1c0c91b6.js"]};/*]]>*/</script><script src="/polyfill-6860dcd81490c6aa82f7.js" nomodule=""></script><script src="/component---src-templates-post-tsx-cc8c6bdbcd5a1c0c91b6.js" async=""></script><script src="/7840d69eefded84ab93ff6e879351e9a3a16821f-3cc77dc4aa7437d407dd.js" async=""></script><script src="/15a3be27178e285ff113e12c60c30466a8f4d4c5-05c94d59cdf70f961f79.js" async=""></script><script src="/e87769ff526c098a69bffbfff9ee9d57397fcb93-6fc590b5171c38a50826.js" async=""></script><script src="/f0e45107-1ab5e6e9877396d2cf44.js" async=""></script><script src="/app-ee7d5025f6bfd6d08ba0.js" async=""></script><script src="/framework-aeedefbd40854c93cd6e.js" async=""></script><script src="/webpack-runtime-4a2499c827fd9e45dd88.js" async=""></script></body></html>