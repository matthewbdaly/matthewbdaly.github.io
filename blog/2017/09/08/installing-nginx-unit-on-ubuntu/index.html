<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.e3adbc0bd75eaf448024.css" data-identity="gatsby-global-css">/*! tailwindcss v2.2.4 | MIT License | https://tailwindcss.com */

/*! modern-normalize v1.1.0 | MIT License | https://github.com/sindresorhus/modern-normalize */html{-webkit-text-size-adjust:100%;line-height:1.15;-moz-tab-size:4;-o-tab-size:4;tab-size:4}body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;margin:0}hr{color:inherit;height:0}abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{border-color:inherit;text-indent:0}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,select{text-transform:none}[type=button],[type=submit],button{-webkit-appearance:button}legend{padding:0}progress{vertical-align:baseline}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}button{background-color:transparent;background-image:none}fieldset,ol,ul{margin:0;padding:0}ol,ul{list-style:none}html{font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;line-height:1.5}body{font-family:inherit;line-height:inherit}*,:after,:before{border:0 solid;box-sizing:border-box}hr{border-top-width:1px}img{border-style:solid}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:#9ca3af;opacity:1}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:#9ca3af;opacity:1}input::placeholder,textarea::placeholder{color:#9ca3af;opacity:1}[role=button],button{cursor:pointer}table{border-collapse:collapse}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}button,input,optgroup,select,textarea{color:inherit;line-height:inherit;padding:0}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{height:auto;max-width:100%}*,:after,:before{--tw-border-opacity:1;border-color:rgba(229,231,235,var(--tw-border-opacity))}.float-right{float:right}.float-left{float:left}.float-none{float:none}.clear-both{clear:both}.m-0{margin:0}.mx-0{margin-left:0;margin-right:0}.mx-auto{margin-left:auto;margin-right:auto}.my-2{margin-bottom:.5rem;margin-top:.5rem}.my-4{margin-bottom:1rem;margin-top:1rem}.mt-2{margin-top:.5rem}.mt-16{margin-top:4rem}.mr-2{margin-right:.5rem}.mr-8{margin-right:2rem}.-mb-4{margin-bottom:-1rem}.-mb-8{margin-bottom:-2rem}.box-border{box-sizing:border-box}.block{display:block}.inline-block{display:inline-block}.flex{display:flex}.table{display:table}.hidden{display:none}.h-2{height:.5rem}.h-4{height:1rem}.min-h-screen{min-height:100vh}.w-1\/2{width:50%}.w-1\/3{width:33.333333%}.w-1\/4{width:25%}.w-3\/4{width:75%}.w-full{width:100%}.flex-grow{flex-grow:1}@-webkit-keyframes spin{to{transform:rotate(1turn)}}@keyframes spin{to{transform:rotate(1turn)}}@-webkit-keyframes ping{75%,to{opacity:0;transform:scale(2)}}@keyframes ping{75%,to{opacity:0;transform:scale(2)}}@-webkit-keyframes pulse{50%{opacity:.5}}@keyframes pulse{50%{opacity:.5}}@-webkit-keyframes bounce{0%,to{-webkit-animation-timing-function:cubic-bezier(.8,0,1,1);animation-timing-function:cubic-bezier(.8,0,1,1);transform:translateY(-25%)}50%{-webkit-animation-timing-function:cubic-bezier(0,0,.2,1);animation-timing-function:cubic-bezier(0,0,.2,1);transform:none}}@keyframes bounce{0%,to{-webkit-animation-timing-function:cubic-bezier(.8,0,1,1);animation-timing-function:cubic-bezier(.8,0,1,1);transform:translateY(-25%)}50%{-webkit-animation-timing-function:cubic-bezier(0,0,.2,1);animation-timing-function:cubic-bezier(0,0,.2,1);transform:none}}.list-disc{list-style-type:disc}.flex-row{flex-direction:row}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.justify-center{justify-content:center}.space-y-8>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-bottom:calc(2rem*var(--tw-space-y-reverse));margin-top:calc(2rem*(1 - var(--tw-space-y-reverse)))}.space-y-16>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-bottom:calc(4rem*var(--tw-space-y-reverse));margin-top:calc(4rem*(1 - var(--tw-space-y-reverse)))}.space-y-32>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-bottom:calc(8rem*var(--tw-space-y-reverse));margin-top:calc(8rem*(1 - var(--tw-space-y-reverse)))}.divide-y>:not([hidden])~:not([hidden]){--tw-divide-y-reverse:0;border-bottom-width:calc(1px*var(--tw-divide-y-reverse));border-top-width:calc(1px*(1 - var(--tw-divide-y-reverse)))}.divide-gray-800>:not([hidden])~:not([hidden]){--tw-divide-opacity:1;border-color:rgba(31,41,55,var(--tw-divide-opacity))}@media (prefers-color-scheme:dark){.dark\:divide-gray-200>:not([hidden])~:not([hidden]){--tw-divide-opacity:1;border-color:rgba(229,231,235,var(--tw-divide-opacity))}}.overflow-x-auto{overflow-x:auto}.overflow-x-scroll{overflow-x:scroll}.rounded-full{border-radius:9999px}.rounded-t-lg{border-top-left-radius:.5rem;border-top-right-radius:.5rem}.border-2{border-width:2px}.border-b-2{border-bottom-width:2px}.border-b-4{border-bottom-width:4px}.border-l-8{border-left-width:8px}.border-transparent{border-color:transparent}.border-gray-100{--tw-border-opacity:1;border-color:rgba(243,244,246,var(--tw-border-opacity))}.border-gray-500{--tw-border-opacity:1;border-color:rgba(107,114,128,var(--tw-border-opacity))}.border-gray-800{--tw-border-opacity:1;border-color:rgba(31,41,55,var(--tw-border-opacity))}.border-green-400,.hover\:border-green-400:hover{--tw-border-opacity:1;border-color:rgba(52,211,153,var(--tw-border-opacity))}.focus\:border-blue-300:focus{--tw-border-opacity:1;border-color:rgba(147,197,253,var(--tw-border-opacity))}.bg-gray-50{--tw-bg-opacity:1;background-color:rgba(249,250,251,var(--tw-bg-opacity))}.bg-gray-100{--tw-bg-opacity:1;background-color:rgba(243,244,246,var(--tw-bg-opacity))}.bg-gray-300{--tw-bg-opacity:1;background-color:rgba(209,213,219,var(--tw-bg-opacity))}.bg-gray-800{--tw-bg-opacity:1;background-color:rgba(31,41,55,var(--tw-bg-opacity))}.bg-purple-200{--tw-bg-opacity:1;background-color:rgba(221,214,254,var(--tw-bg-opacity))}.hover\:bg-gray-200:hover{--tw-bg-opacity:1;background-color:rgba(229,231,235,var(--tw-bg-opacity))}.hover\:bg-purple-800:hover{--tw-bg-opacity:1;background-color:rgba(91,33,182,var(--tw-bg-opacity))}@media (prefers-color-scheme:dark){.dark\:bg-gray-700{--tw-bg-opacity:1;background-color:rgba(55,65,81,var(--tw-bg-opacity))}.dark\:bg-gray-800{--tw-bg-opacity:1;background-color:rgba(31,41,55,var(--tw-bg-opacity))}.dark\:bg-gray-900{--tw-bg-opacity:1;background-color:rgba(17,24,39,var(--tw-bg-opacity))}.dark\:hover\:bg-gray-800:hover{--tw-bg-opacity:1;background-color:rgba(31,41,55,var(--tw-bg-opacity))}}.bg-gradient-to-r{background-image:linear-gradient(to right,var(--tw-gradient-stops))}.bg-gradient-to-b{background-image:linear-gradient(to bottom,var(--tw-gradient-stops))}.from-gray-200{--tw-gradient-from:#e5e7eb;--tw-gradient-stops:var(--tw-gradient-from),var(--tw-gradient-to,rgba(229,231,235,0))}.from-green-400{--tw-gradient-from:#34d399;--tw-gradient-stops:var(--tw-gradient-from),var(--tw-gradient-to,rgba(52,211,153,0))}.via-blue-500{--tw-gradient-stops:var(--tw-gradient-from),#3b82f6,var(--tw-gradient-to,rgba(59,130,246,0))}.to-gray-300{--tw-gradient-to:#d1d5db}.to-purple-500{--tw-gradient-to:#8b5cf6}.p-2{padding:.5rem}.p-4{padding:1rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-4{padding-left:1rem;padding-right:1rem}.px-8{padding-left:2rem;padding-right:2rem}.py-2{padding-bottom:.5rem;padding-top:.5rem}.py-4{padding-bottom:1rem}.pt-4,.py-4{padding-top:1rem}.pb-16{padding-bottom:4rem}.pl-4{padding-left:1rem}.pl-6{padding-left:1.5rem}.text-center{text-align:center}.font-sans{font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji}.font-mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.text-sm{font-size:.875rem;line-height:1.25rem}.text-lg{font-size:1.125rem}.text-lg,.text-xl{line-height:1.75rem}.text-xl{font-size:1.25rem}.text-2xl{font-size:1.5rem;line-height:2rem}.text-4xl{font-size:2.25rem;line-height:2.5rem}.font-semibold{font-weight:600}.font-bold{font-weight:700}.lowercase{text-transform:lowercase}.italic{font-style:italic}.leading-6{line-height:1.5rem}.text-gray-100{--tw-text-opacity:1;color:rgba(243,244,246,var(--tw-text-opacity))}.text-gray-200{--tw-text-opacity:1;color:rgba(229,231,235,var(--tw-text-opacity))}.text-gray-800{--tw-text-opacity:1;color:rgba(31,41,55,var(--tw-text-opacity))}.text-gray-900{--tw-text-opacity:1;color:rgba(17,24,39,var(--tw-text-opacity))}.hover\:text-gray-200:hover{--tw-text-opacity:1;color:rgba(229,231,235,var(--tw-text-opacity))}@media (prefers-color-scheme:dark){.dark\:text-gray-100{--tw-text-opacity:1;color:rgba(243,244,246,var(--tw-text-opacity))}.dark\:text-gray-200{--tw-text-opacity:1;color:rgba(229,231,235,var(--tw-text-opacity))}.dark\:text-gray-300{--tw-text-opacity:1;color:rgba(209,213,219,var(--tw-text-opacity))}}.antialiased{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}*,:after,:before{--tw-shadow:0 0 #0000}.shadow-sm{--tw-shadow:0 1px 2px 0 rgba(0,0,0,0.05)}.shadow-lg,.shadow-sm{box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.shadow-lg{--tw-shadow:0 10px 15px -3px rgba(0,0,0,0.1),0 4px 6px -2px rgba(0,0,0,0.05)}.focus\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}*,:after,:before{--tw-ring-inset:var(--tw-empty,/*!*/ /*!*/);--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000}.focus\:ring:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(3px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.filter{--tw-blur:var(--tw-empty,/*!*/ /*!*/);--tw-brightness:var(--tw-empty,/*!*/ /*!*/);--tw-contrast:var(--tw-empty,/*!*/ /*!*/);--tw-grayscale:var(--tw-empty,/*!*/ /*!*/);--tw-hue-rotate:var(--tw-empty,/*!*/ /*!*/);--tw-invert:var(--tw-empty,/*!*/ /*!*/);--tw-saturate:var(--tw-empty,/*!*/ /*!*/);--tw-sepia:var(--tw-empty,/*!*/ /*!*/);--tw-drop-shadow:var(--tw-empty,/*!*/ /*!*/);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.transition{transition-duration:.15s;transition-property:background-color,border-color,color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:background-color,border-color,color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:background-color,border-color,color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1)}.transition-colors{transition-duration:.15s;transition-property:background-color,border-color,color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1)}.duration-300{transition-duration:.3s}.duration-500{transition-duration:.5s}.ease-in-out{transition-timing-function:cubic-bezier(.4,0,.2,1)}code[class*=language-],pre[class*=language-]{display:block}@media (min-width:768px){.md\:float-none{float:none}.md\:block{display:block}.md\:w-2\/3{width:66.666667%}.md\:w-1\/5{width:20%}}@media (min-width:1024px){.lg\:float-right{float:right}.lg\:float-left{float:left}.lg\:mt-4{margin-top:1rem}.lg\:text-left{text-align:left}}.prism-code{-webkit-overflow-scrolling:touch;background-color:transparent;border-radius:.2em;float:left;font-size:1rem;margin-bottom:1rem;margin-top:1rem;overflow:initial;padding-bottom:1rem;padding-top:1rem;position:relative}.prism-code.title{border-radius:0 0 .2em .2em}pre.prism-code{float:left;min-width:100%;overflow:initial;padding:20px}.token{display:inline-block}li>code,p>code{word-wrap:break-word;background:#011627;border-radius:.2em;color:#d6deeb;padding:.2em;white-space:pre-wrap}.gatsby-highlight{-webkit-overflow-scrolling:touch;font-size:1rem;overflow:auto;position:relative}.gatsby-highlight::-webkit-scrollbar{display:none}.gatsby-highlight>code[class*=language-],.gatsby>pre[class*=language-]{-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;line-height:1.5;overflow-wrap:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-break:normal;word-spacing:normal}.gatsby-highlight .token-line{border-left:4px solid transparent;margin-left:-20px;margin-right:-20px}.line-number-style{display:inline-block;opacity:.3;padding-left:1em;padding-right:2em;position:relative;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1.2em}.gatsby-highlight .token-line.highlight-line{background-color:#023751;border-left:4px solid #029bce}.gatsby-highlight .token-line.highlight-line .line-number-style{left:0;opacity:.5;width:calc(1.2em - 4px)}</style><meta name="generator" content="Gatsby 3.8.0"/><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){if(void 0===e.target.dataset.mainImage)return;if(void 0===e.target.dataset.gatsbyImageSsr)return;const t=e.target;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link rel="search" type="application/opensearchdescription+xml" crossorigin="anonymous" href="/opensearch.xml"/><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><title data-react-helmet="true">Installing Nginx Unit on Ubuntu | Matthew Daly</title><link data-react-helmet="true" href="https://matthewdaly.co.uk" rel="canonical"/><link data-react-helmet="true" href="https://twitter.com/mattbd" rel="me"/><link data-react-helmet="true" href="https://github.com/matthewbdaly" rel="me"/><link data-react-helmet="true" href="mailto:matthew@matthewdaly.co.uk" rel="me"/><link data-react-helmet="true" href="/key.pub" rel="pgpkey"/><link data-react-helmet="true" href="https://webmention.io/matthewdaly.co.uk/xmlrpc" rel="pingback"/><link data-react-helmet="true" href="https://webmention.io/matthewdaly.co.uk/webmention" rel="webmention"/><link data-react-helmet="true" rel="authorization_endpoint" href="https://indieauth.com/auth"/><link data-react-helmet="true" rel="token_endpoint" href="https://tokens.indieauth.com/token"/><link data-react-helmet="true" rel="openid.delegate" href="https://matthewdaly.co.uk"/><link data-react-helmet="true" rel="openid.server" href="https://openid.indieauth.com/openid"/><link data-react-helmet="true" rel="alternate" type="application/rss+xml" title="Matthew Daly - feed" href="/rss.xml"/><link data-react-helmet="true" rel="alternate" type="application/atom+xml" title="Matthew Daly - feed" href="/atom.xml"/><link data-react-helmet="true" rel="alternate" type="application/feed+json" title="Matthew Daly - feed" href="/feed.json"/><meta data-react-helmet="true" name="description" content="Recently Nginx announced the release of the first beta of  Unit , an application server that supports Python, PHP and Go, with support coming for Java, Node.js and Ruby. The really…"/><meta data-react-helmet="true" property="og:title" content="Installing Nginx Unit on Ubuntu"/><meta data-react-helmet="true" property="og:description" content="Recently Nginx announced the release of the first beta of  Unit , an application server that supports Python, PHP and Go, with support coming for Java, Node.js and Ruby. The really…"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="mattbd"/><meta data-react-helmet="true" name="twitter:title" content="Installing Nginx Unit on Ubuntu"/><meta data-react-helmet="true" name="twitter:description" content="Recently Nginx announced the release of the first beta of  Unit , an application server that supports Python, PHP and Go, with support coming for Java, Node.js and Ruby. The really…"/><link rel="sitemap" type="application/xml" href="/sitemap/sitemap-index.xml"/><link rel="icon" href="/favicon-32x32.png?v=53aa06cf17e4239d0dba6ffd09854e02" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#3b82f6"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link as="script" rel="preload" href="/webpack-runtime-fd9822152fcd56a55060.js"/><link as="script" rel="preload" href="/framework-cb6229a8adb5817307a4.js"/><link as="script" rel="preload" href="/532a2f07-672258f0b4da4ed2ff53.js"/><link as="script" rel="preload" href="/app-5e95bfecb5da57fd1ffa.js"/><link as="script" rel="preload" href="/f0e45107-763177929e8eed3c13bb.js"/><link as="script" rel="preload" href="/e87769ff526c098a69bffbfff9ee9d57397fcb93-0303d5ebbf1672b201f9.js"/><link as="script" rel="preload" href="/15a3be27178e285ff113e12c60c30466a8f4d4c5-26cc17c8e4fe76c4927b.js"/><link as="script" rel="preload" href="/7840d69eefded84ab93ff6e879351e9a3a16821f-3cc77dc4aa7437d407dd.js"/><link as="script" rel="preload" href="/component---src-templates-post-tsx-493c03ff50c97c3525f1.js"/><link as="fetch" rel="preload" href="/page-data/blog/2017/09/08/installing-nginx-unit-on-ubuntu/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/290055352.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2909664151.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="flex flex-col min-h-screen font-sans text-lg antialiased text-gray-800 bg-gray-50 dark:text-gray-100 dark:bg-gray-700 leading-6 pb-16"><div class="w-full h-2 bg-gradient-to-r from-green-400 via-blue-500 to-purple-500"></div><nav class="w-full p-4 mx-auto lowercase md:w-2/3"><h1 class="block float-none py-4 text-4xl text-center lg:float-left lg:text-left"><a href="/">Matthew Daly</a></h1><div class="py-2 text-center lg:float-right md:block lg:text-left"><span class="inline-block pr py-2 mr-8 lg:mt-4 text-sm text-gray-900 dark:text-gray-200 border-b-4 border-transparent hover:border-green-400 transition-colors duration-500"><a href="/blog/archives">Archives</a></span><span class="inline-block pr py-2 mr-8 lg:mt-4 text-sm text-gray-900 dark:text-gray-200 border-b-4 border-transparent hover:border-green-400 transition-colors duration-500"><a href="/about">About</a></span><span class="inline-block pr py-2 mr-8 lg:mt-4 text-sm text-gray-900 dark:text-gray-200 border-b-4 border-transparent hover:border-green-400 transition-colors duration-500"><a href="/uses">Uses</a></span><span class="inline-block pr py-2 mr-8 lg:mt-4 text-sm text-gray-900 dark:text-gray-200 border-b-4 border-transparent hover:border-green-400 transition-colors duration-500"><a href="/posts/1">Blog</a></span><span class="inline-block pr py-2 mr-8 lg:mt-4 text-sm text-gray-900 dark:text-gray-200 border-b-4 border-transparent hover:border-green-400 transition-colors duration-500"><a href="/blog/categories">Categories</a></span><span class="inline-block pr py-2 mr-8 lg:mt-4 text-sm text-gray-900 dark:text-gray-200 border-b-4 border-transparent hover:border-green-400 transition-colors duration-500"><a href="/search">Search</a></span></div></nav><div class="w-full h-4 clear"></div><main class="flex-grow w-full p-4 mx-auto md:w-2/3"><article class="h-entry"><header><h2 class="py-4 text-2xl font-bold e-content p-name"><a class="u-url" href="https://matthewdaly.co.uk/blog/2017/09/08/installing-nginx-unit-on-ubuntu/">Installing Nginx Unit on Ubuntu</a></h2><p class="my-4 text-lg font-semibold">Published by <a href="/" rel="author">Matthew Daly</a> at <!-- -->8th September 2017 9:05 pm</p><time class="hidden dt-published">2017-09-08T21:05:04+00:00</time></header><section><p class="py-2">Recently Nginx announced the release of the first beta of <a href="https://www.nginx.com/products/nginx-unit/" class="border-b-2 border-green-400">Unit</a>, an application server that supports Python, PHP and Go, with support coming for Java, Node.js and Ruby.</p><p class="py-2">The really interesting part is that not only does it support more than one language, but Unit can be configured by making HTTP requests, rather than by editing config files. This makes it potentially very interesting to web developers like myself who have worked in multiple languages - I could use it to serve a Python or PHP web app, simply by making different requests during the setup process. I can see this being a boon for SaaS providers - you could pick up the language from a file, much like the <code>runtime.txt</code> used by Heroku, and set up the application on the fly.</p><p class="py-2">It&#x27;s currently in public beta, and there are packages for Ubuntu, so I decided to try it out. I&#x27;ve created the Ansible role below to set up Unit on an Ubuntu 16.04 server or VM:</p><pre><div class="gatsby-highlight" data-language="yml"><pre class="prism-code language-yml" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token punctuation" style="color:#8dc891">---</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> Install keys</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">  </span><span class="token key atrule">apt_key</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> url=http</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain">//nginx.org/keys/nginx_signing.key state=present</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> Setup main repo</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">  </span><span class="token key atrule">apt_repository</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> repo=&#x27;deb http</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain">//nginx.org/packages/mainline/ubuntu/ xenial nginx&#x27; state=present</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> Setup source rep</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">  </span><span class="token key atrule">apt_repository</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> repo=&#x27;deb</span><span class="token punctuation" style="color:#8dc891">-</span><span class="token plain">src http</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain">//nginx.org/packages/mainline/ubuntu/ xenial nginx&#x27; state=present</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> Update system</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain">  </span><span class="token key atrule">apt</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> upgrade=full update_cache=yes</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> Install dependencies</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain">  </span><span class="token key atrule">apt</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> name=</span><span class="token punctuation" style="color:#8dc891">{</span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"> item </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"> state=present</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token plain">  </span><span class="token key atrule">with_items</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">-</span><span class="token plain"> nginx</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">-</span><span class="token plain"> unit</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">-</span><span class="token plain"> golang</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">-</span><span class="token plain"> php</span><span class="token punctuation" style="color:#8dc891">-</span><span class="token plain">dev</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">21</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">-</span><span class="token plain"> php7.0</span><span class="token punctuation" style="color:#8dc891">-</span><span class="token plain">dev</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">22</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">-</span><span class="token plain"> libphp</span><span class="token punctuation" style="color:#8dc891">-</span><span class="token plain">embed</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">23</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">-</span><span class="token plain"> libphp7.0</span><span class="token punctuation" style="color:#8dc891">-</span><span class="token plain">embed</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">24</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">-</span><span class="token plain"> python</span><span class="token punctuation" style="color:#8dc891">-</span><span class="token plain">dev</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">25</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">-</span><span class="token plain"> python3</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">26</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">-</span><span class="token plain"> python3</span><span class="token punctuation" style="color:#8dc891">-</span><span class="token plain">dev</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">27</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">-</span><span class="token plain"> php7.0</span><span class="token punctuation" style="color:#8dc891">-</span><span class="token plain">cli</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">28</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">-</span><span class="token plain"> php7.0</span><span class="token punctuation" style="color:#8dc891">-</span><span class="token plain">mcrypt</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">29</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">-</span><span class="token plain"> php7.0</span><span class="token punctuation" style="color:#8dc891">-</span><span class="token plain">pgsql</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">30</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">-</span><span class="token plain"> php7.0</span><span class="token punctuation" style="color:#8dc891">-</span><span class="token plain">sqlite3</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">31</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">-</span><span class="token plain"> php7.0</span><span class="token punctuation" style="color:#8dc891">-</span><span class="token plain">opcache</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">32</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">-</span><span class="token plain"> php7.0</span><span class="token punctuation" style="color:#8dc891">-</span><span class="token plain">curl</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">33</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">-</span><span class="token plain"> php7.0</span><span class="token punctuation" style="color:#8dc891">-</span><span class="token plain">mbstring</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">34</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">-</span><span class="token plain"> php7.0</span><span class="token punctuation" style="color:#8dc891">-</span><span class="token plain">dom</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">35</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">-</span><span class="token plain"> php7.0</span><span class="token punctuation" style="color:#8dc891">-</span><span class="token plain">xml</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">36</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">-</span><span class="token plain"> php7.0</span><span class="token punctuation" style="color:#8dc891">-</span><span class="token plain">zip</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">37</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">-</span><span class="token plain"> php7.0</span><span class="token punctuation" style="color:#8dc891">-</span><span class="token plain">bcmath</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">38</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">39</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> Copy over Nginx configuration</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">40</span><span class="token plain">  </span><span class="token key atrule">copy</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> src=nginx.conf dest=/etc/nginx/sites</span><span class="token punctuation" style="color:#8dc891">-</span><span class="token plain">available/default owner=root group=root mode=0644</span></div></pre></div></pre><p class="py-2">Note the section that copies over the Nginx config file. Here is that file:</p><pre><div class="gatsby-highlight" data-language="nginx"><pre class="prism-code language-nginx" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token keyword" style="color:#c5a5c5">upstream</span><span class="token plain"> unit_backend </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">server</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">127.0</span><span class="token number" style="color:#5a9bcf">.0</span><span class="token number" style="color:#5a9bcf">.1</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token number" style="color:#5a9bcf">8300</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">server</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">listen</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">80</span><span class="token plain"> default_server</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">listen</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token number" style="color:#5a9bcf">80</span><span class="token plain"> default_server ipv6only</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">on</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">fastcgi_param</span><span class="token plain"> HTTP_PROXY </span><span class="token string" style="color:#8dc891">&quot;&quot;</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"> </span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">access_log</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">/</span><span class="token plain">var</span><span class="token operator" style="color:#d7deea">/</span><span class="token plain">log</span><span class="token operator" style="color:#d7deea">/</span><span class="token plain">nginx</span><span class="token operator" style="color:#d7deea">/</span><span class="token plain">access</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">log</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">error_log</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">/</span><span class="token plain">var</span><span class="token operator" style="color:#d7deea">/</span><span class="token plain">log</span><span class="token operator" style="color:#d7deea">/</span><span class="token plain">nginx</span><span class="token operator" style="color:#d7deea">/</span><span class="token plain">error</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">log</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">root</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">/</span><span class="token plain">var</span><span class="token operator" style="color:#d7deea">/</span><span class="token plain">www</span><span class="token operator" style="color:#d7deea">/</span><span class="token plain">public</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">index</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">index</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">php </span><span class="token keyword" style="color:#c5a5c5">index</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">html </span><span class="token keyword" style="color:#c5a5c5">index</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">htm</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">server_name</span><span class="token plain"> server_domain_or_IP</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">location</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">/</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"> </span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">try_files</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$uri</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$uri</span><span class="token operator" style="color:#d7deea">/</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">/</span><span class="token keyword" style="color:#c5a5c5">index</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">php</span><span class="token operator" style="color:#d7deea">?</span><span class="token variable" style="color:#d7deea">$query_string</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain">   </span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">21</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">22</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">location</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">~</span><span class="token plain"> \</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">php$ </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">23</span><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">try_files</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$uri</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">/</span><span class="token keyword" style="color:#c5a5c5">index</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">php </span><span class="token operator" style="color:#d7deea">=</span><span class="token number" style="color:#5a9bcf">404</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">24</span><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">proxy_pass</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">http</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token operator" style="color:#d7deea">/</span><span class="token operator" style="color:#d7deea">/</span><span class="token plain">unit_backend</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">25</span><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">proxy_set_header</span><span class="token plain"> Host </span><span class="token variable" style="color:#d7deea">$host</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">26</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain">   </span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">27</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">This setup proxies all dynamic requests to the Unit backend in a similar fashion to how it would normally pass it to PHP-FPM.</p><p class="py-2">There were still a few little issues. It doesn&#x27;t exactly help that the Nginx package provided with this repository isn&#x27;t quite the same as the one in Ubuntu by default - not only is it the unstable version, but it doesn&#x27;t set up the <code>sites-available</code> and <code>sites-enabled</code> folders, so I had to do that manually. I also had an issue with Systemd starting the process (at <code>/run/control.unit.sock</code>) with permissions that didn&#x27;t allow Nginx to access it. I&#x27;m not that familiar with Systemd so I wound up just setting the permissions of the file manually, but that doesn&#x27;t persist between restarts. I expect this issue isn&#x27;t that big a deal to someone more familiar with Systemd, but I haven&#x27;t been able to resolve it yet.</p><p class="py-2">I decided to try it out with a Laravel application. I created a new Laravel app and set it up with the web root at <code>/var/www</code>. I then saved the following configuration for it as <code>app.json</code>:</p><pre><div class="gatsby-highlight" data-language="json"><pre class="prism-code language-json" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">    </span><span class="token property" style="color:#5a9bcf">&quot;listeners&quot;</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">        </span><span class="token property" style="color:#5a9bcf">&quot;*:8300&quot;</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">            </span><span class="token property" style="color:#5a9bcf">&quot;application&quot;</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;myapp&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">        </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">    </span><span class="token property" style="color:#5a9bcf">&quot;applications&quot;</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain">        </span><span class="token property" style="color:#5a9bcf">&quot;myapp&quot;</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">            </span><span class="token property" style="color:#5a9bcf">&quot;type&quot;</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;php&quot;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain">            </span><span class="token property" style="color:#5a9bcf">&quot;workers&quot;</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">20</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain">            </span><span class="token property" style="color:#5a9bcf">&quot;user&quot;</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;www-data&quot;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain">            </span><span class="token property" style="color:#5a9bcf">&quot;group&quot;</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;www-data&quot;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain">            </span><span class="token property" style="color:#5a9bcf">&quot;root&quot;</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;/var/www/public&quot;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain">            </span><span class="token property" style="color:#5a9bcf">&quot;index&quot;</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;index.php&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain">        </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">This is fairly basic, but a good example of how you configure an application with Unit. The <code>listener</code> section maps a port to an application, while the <code>applications</code> section defines an application called <code>myapp</code>. In this case, we specify that the type should be <code>php</code>. Note that each platform has slightly different options - for instance, the Python type doesn&#x27;t have the <code>index</code> or <code>root</code> options, instead having the <code>path</code> option, which specifies the path to the <code>wsgi.py</code> file.</p><p class="py-2">I then ran the following command to upload the file:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style"></span><span class="token plain">$ </span><span class="token function" style="color:#79b6f2">curl</span><span class="token plain"> -X PUT -d @app.json --unix-socket /run/control.unit.sock http://localhost</span></div></pre></div></pre><p class="py-2">Note that we send it direct to the Unix socket file - this way we don&#x27;t have to expose the API to the outside. After this was done, the Laravel app began working as expected.</p><p class="py-2">We can then make a GET request to view the configured applications:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ </span><span class="token function" style="color:#79b6f2">curl</span><span class="token plain"> --unix-socket /run/control.unit.sock http://localhost/</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">        </span><span class="token string" style="color:#8dc891">&quot;listeners&quot;</span><span class="token builtin class-name" style="color:#FAC863">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">                </span><span class="token string" style="color:#8dc891">&quot;*:8300&quot;</span><span class="token builtin class-name" style="color:#FAC863">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">                        </span><span class="token string" style="color:#8dc891">&quot;application&quot;</span><span class="token builtin class-name" style="color:#FAC863">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;saas&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">                </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">        </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain">,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">        </span><span class="token string" style="color:#8dc891">&quot;applications&quot;</span><span class="token builtin class-name" style="color:#FAC863">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain">                </span><span class="token string" style="color:#8dc891">&quot;saas&quot;</span><span class="token builtin class-name" style="color:#FAC863">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain">                        </span><span class="token string" style="color:#8dc891">&quot;type&quot;</span><span class="token builtin class-name" style="color:#FAC863">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;php&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain">                        </span><span class="token string" style="color:#8dc891">&quot;workers&quot;</span><span class="token builtin class-name" style="color:#FAC863">:</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">20</span><span class="token plain">,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain">                        </span><span class="token string" style="color:#8dc891">&quot;user&quot;</span><span class="token builtin class-name" style="color:#FAC863">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;www-data&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain">                        </span><span class="token string" style="color:#8dc891">&quot;group&quot;</span><span class="token builtin class-name" style="color:#FAC863">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;www-data&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain">                        </span><span class="token string" style="color:#8dc891">&quot;root&quot;</span><span class="token builtin class-name" style="color:#FAC863">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;/var/www/public&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token plain">                        </span><span class="token string" style="color:#8dc891">&quot;index&quot;</span><span class="token builtin class-name" style="color:#FAC863">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;index.php&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token plain">                </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token plain">        </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">It&#x27;s also possible to update and delete existing applications via the API using PUT and DELETE requests.</p><h2 class="py-4 text-2xl font-bold">Final thoughts</h2><p class="py-2">This is <em>way</em> too early to be seriously considering using Unit in production. It&#x27;s only just been released as a public beta, and it&#x27;s a bit fiddly to set up. However, it has an enormous amount of promise.</p><p class="py-2">One thing I can&#x27;t really see right now is whether it&#x27;s possible to use a virtualenv with it for Python applications. In the Python community it&#x27;s standard practice to use Virtualenv to isolate the dependencies for individual applications, and it&#x27;s not clear how I&#x27;d be able to go about using this, if it is possible. For deploying Python applications, lack of virtualenv support would be a deal breaker, and I hope this gets clarified soon.</p><p class="py-2">I&#x27;d also be curious to see benchmarks of how it compares to something like PHP-FPM. It&#x27;s quite possible that it may be less performant than other solutions. However, I will keep a close eye on this in future.</p></section><hr/><div class="py-4"><a class="p-category" href="/blog/categories/php/"><span class="inline-block px-4 py-2 my-2 mr-2 text-sm font-bold text-gray-900 bg-purple-200 rounded-full hover:bg-purple-800 hover:text-gray-200 transition-colors duration-500">php</span></a><a class="p-category" href="/blog/categories/nginx/"><span class="inline-block px-4 py-2 my-2 mr-2 text-sm font-bold text-gray-900 bg-purple-200 rounded-full hover:bg-purple-800 hover:text-gray-200 transition-colors duration-500">nginx</span></a></div><nav class="pt-4 clear-both box-border"><a rel="prev" class="float-left w-1/2 p-2 shadow-sm hover:bg-gray-200 dark:hover:bg-gray-800 transition duration-300 ease-in-out" href="/blog/2017/09/02/making-internal-requests-with-laravel/"><p><strong class="font-bold clear-both">← Previous page</strong></p><p class="pl-6">Making internal requests with Laravel</p></a><a rel="next" class="float-right w-1/2 p-2 shadow-sm hover:bg-gray-200 dark:hover:bg-gray-800 transition duration-300 ease-in-out" href="/blog/2017/09/25/a-generic-php-sms-library/"><p><strong>→ Next page</strong></p><p class="pl-6">A generic PHP SMS library</p></a></nav><div id="disqus_thread"></div></article></main></div><footer class="w-full p-4 text-gray-100 bg-gray-800"><div class="flex flex-row flex-wrap justify-center w-full p-2 mx-auto text-center md:w-2/3 box-border"><a class="w-1/3 my-2 md:w-1/5" href="/posts/1">Blog</a><a class="w-1/3 my-2 md:w-1/5" href="/about">About</a><a href="https://twitter.com/mattbd" class="w-1/3 my-2 md:w-1/5">Twitter</a><a href="https://github.com/matthewbdaly" class="w-1/3 my-2 md:w-1/5">Github</a><a class="w-1/3 my-2 md:w-1/5" href="/rss.xml">Feed</a></div><div class="w-full p-4 mx-auto text-center md:w-2/3"><p>© Matthew Daly <!-- -->2021</p></div></footer></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-17043630-1', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/2017/09/08/installing-nginx-unit-on-ubuntu/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-31be65513fba52a5a50c.js"],"app":["/app-5e95bfecb5da57fd1ffa.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-e15fb7b4e4c3e068158e.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-a8bec21bd19e150cd447.js"],"component---src-pages-search-tsx":["/component---src-pages-search-tsx-de35131b8b54d707dd3c.js"],"component---src-templates-404-tsx":["/component---src-templates-404-tsx-1e9ca5e77d61c162fbb8.js"],"component---src-templates-archives-tsx":["/component---src-templates-archives-tsx-df7825ea34c62a098040.js"],"component---src-templates-categories-tsx":["/component---src-templates-categories-tsx-151c44ef3edeea819ec2.js"],"component---src-templates-category-tsx":["/component---src-templates-category-tsx-249488b5bc3e35b8519c.js"],"component---src-templates-chunk-tsx":["/component---src-templates-chunk-tsx-e37127127dfaebd5f552.js"],"component---src-templates-page-tsx":["/component---src-templates-page-tsx-43a798b7c40f1e0cff4e.js"],"component---src-templates-post-tsx":["/component---src-templates-post-tsx-493c03ff50c97c3525f1.js"]};/*]]>*/</script><script src="/polyfill-31be65513fba52a5a50c.js" nomodule=""></script><script src="/component---src-templates-post-tsx-493c03ff50c97c3525f1.js" async=""></script><script src="/7840d69eefded84ab93ff6e879351e9a3a16821f-3cc77dc4aa7437d407dd.js" async=""></script><script src="/15a3be27178e285ff113e12c60c30466a8f4d4c5-26cc17c8e4fe76c4927b.js" async=""></script><script src="/e87769ff526c098a69bffbfff9ee9d57397fcb93-0303d5ebbf1672b201f9.js" async=""></script><script src="/f0e45107-763177929e8eed3c13bb.js" async=""></script><script src="/app-5e95bfecb5da57fd1ffa.js" async=""></script><script src="/532a2f07-672258f0b4da4ed2ff53.js" async=""></script><script src="/framework-cb6229a8adb5817307a4.js" async=""></script><script src="/webpack-runtime-fd9822152fcd56a55060.js" async=""></script></body></html>