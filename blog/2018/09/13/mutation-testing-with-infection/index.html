<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta http-equiv="Content-Security-Policy" content="base-uri &#x27;self&#x27;; default-src &#x27;self&#x27; *.google-analytics.com disqus.com *.disqus.com *.disquscdn.com getform.io; script-src &#x27;self&#x27; localhost:* *.addthis.com *.google-analytics.com *.googletagmanager.com *.disquscdn.com *.disqus.com disqus.com *.addthisedge.com graph.facebook.com &#x27;unsafe-inline&#x27; &#x27;unsafe-eval&#x27;; style-src &#x27;self&#x27; fonts.googleapis.com *.addthis.com google-analytics.com *.disquscdn.com *.disqus.com &#x27;unsafe-inline&#x27;; object-src &#x27;none&#x27;; form-action &#x27;self&#x27; getform.io; font-src &#x27;self&#x27; data: fonts.google-apis.com fonts.gstatic.com; connect-src &#x27;self&#x27; ws://localhost:* *.google-analytics.com stats.g.doubleclick.net; img-src &#x27;self&#x27; *.google-analytics.com *.disquscdn.com *.disqus.com stats.g.doubleclick.net; child-src &#x27;self&#x27;; frame-src disqus.com *.addthis.com;"/><meta name="theme-color" content="#3b82f6"/><meta data-react-helmet="true" name="twitter:description" content="Writing automated tests is an excellent way of catching bugs during development and maintenance of your application, not to mention the other benefits. However, it&#x27;s hard to gauge…"/><meta data-react-helmet="true" name="twitter:title" content="Mutation testing with Infection"/><meta data-react-helmet="true" name="twitter:creator" content="mattbd"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" property="og:description" content="Writing automated tests is an excellent way of catching bugs during development and maintenance of your application, not to mention the other benefits. However, it&#x27;s hard to gauge…"/><meta data-react-helmet="true" property="og:title" content="Mutation testing with Infection"/><meta data-react-helmet="true" name="description" content="Writing automated tests is an excellent way of catching bugs during development and maintenance of your application, not to mention the other benefits. However, it&#x27;s hard to gauge…"/><meta name="generator" content="Gatsby 4.16.0"/><style data-href="/styles.f82b756bf06b16e2019e.css" data-identity="gatsby-global-css">/* ! tailwindcss v3.1.3 | MIT License | https://tailwindcss.com */*,:after,:before{border:0 solid #e5e7eb;box-sizing:border-box}:after,:before{--tw-content:""}html{-webkit-text-size-adjust:100%;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4}body{line-height:inherit;margin:0}hr{border-top-width:1px;color:inherit;height:0}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{border-collapse:collapse;border-color:inherit;text-indent:0}button,input,optgroup,select,textarea{color:inherit;font-family:inherit;font-size:100%;font-weight:inherit;line-height:inherit;margin:0;padding:0}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0}fieldset,legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:#9ca3af;opacity:1}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:#9ca3af;opacity:1}input::placeholder,textarea::placeholder{color:#9ca3af;opacity:1}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{height:auto;max-width:100%}*,:after,:before{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }::-webkit-backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }.float-right{float:right}.float-left{float:left}.float-none{float:none}.clear-both{clear:both}.m-0{margin:0}.mx-auto{margin-left:auto;margin-right:auto}.my-8{margin-bottom:2rem;margin-top:2rem}.my-4{margin-bottom:1rem;margin-top:1rem}.my-2{margin-bottom:.5rem;margin-top:.5rem}.mx-0{margin-left:0;margin-right:0}.mt-2{margin-top:.5rem}.-mb-8{margin-bottom:-2rem}.-mb-4{margin-bottom:-1rem}.mt-8{margin-top:2rem}.mr-8{margin-right:2rem}.mt-16{margin-top:4rem}.mr-2{margin-right:.5rem}.box-border{box-sizing:border-box}.block{display:block}.inline-block{display:inline-block}.flex{display:flex}.hidden{display:none}.h-2{height:.5rem}.h-4{height:1rem}.min-h-screen{min-height:100vh}.w-full{width:100%}.w-1\/3{width:33.333333%}.w-2\/3{width:66.666667%}.w-1\/2{width:50%}.w-3\/4{width:75%}.w-1\/4{width:25%}.flex-grow{flex-grow:1}.resize-none{resize:none}.list-disc{list-style-type:disc}.flex-row{flex-direction:row}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.justify-center{justify-content:center}.space-y-32>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-bottom:calc(8rem*var(--tw-space-y-reverse));margin-top:calc(8rem*(1 - var(--tw-space-y-reverse)))}.space-y-16>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-bottom:calc(4rem*var(--tw-space-y-reverse));margin-top:calc(4rem*(1 - var(--tw-space-y-reverse)))}.space-y-8>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-bottom:calc(2rem*var(--tw-space-y-reverse));margin-top:calc(2rem*(1 - var(--tw-space-y-reverse)))}.divide-y>:not([hidden])~:not([hidden]){--tw-divide-y-reverse:0;border-bottom-width:calc(1px*var(--tw-divide-y-reverse));border-top-width:calc(1px*(1 - var(--tw-divide-y-reverse)))}.divide-gray-800>:not([hidden])~:not([hidden]){--tw-divide-opacity:1;border-color:rgb(31 41 55/var(--tw-divide-opacity))}.overflow-x-auto{overflow-x:auto}.overflow-x-scroll{overflow-x:scroll}.rounded-lg{border-radius:.5rem}.rounded-full{border-radius:9999px}.rounded-t-lg{border-top-left-radius:.5rem;border-top-right-radius:.5rem}.border-2{border-width:2px}.border-b-2{border-bottom-width:2px}.border-l-8{border-left-width:8px}.border-b-4{border-bottom-width:4px}.border-green-400{--tw-border-opacity:1;border-color:rgb(74 222 128/var(--tw-border-opacity))}.border-gray-500{--tw-border-opacity:1;border-color:rgb(107 114 128/var(--tw-border-opacity))}.border-gray-800{--tw-border-opacity:1;border-color:rgb(31 41 55/var(--tw-border-opacity))}.border-white{--tw-border-opacity:1;border-color:rgb(255 255 255/var(--tw-border-opacity))}.border-transparent{border-color:transparent}.border-gray-100{--tw-border-opacity:1;border-color:rgb(243 244 246/var(--tw-border-opacity))}.bg-gray-100{--tw-bg-opacity:1;background-color:rgb(243 244 246/var(--tw-bg-opacity))}.bg-gray-300{--tw-bg-opacity:1;background-color:rgb(209 213 219/var(--tw-bg-opacity))}.bg-blue-600{--tw-bg-opacity:1;background-color:rgb(37 99 235/var(--tw-bg-opacity))}.bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255/var(--tw-bg-opacity))}.bg-gray-800{--tw-bg-opacity:1;background-color:rgb(31 41 55/var(--tw-bg-opacity))}.bg-gray-50{--tw-bg-opacity:1;background-color:rgb(249 250 251/var(--tw-bg-opacity))}.bg-red-200{--tw-bg-opacity:1;background-color:rgb(254 202 202/var(--tw-bg-opacity))}.bg-purple-200{--tw-bg-opacity:1;background-color:rgb(233 213 255/var(--tw-bg-opacity))}.bg-gradient-to-b{background-image:linear-gradient(to bottom,var(--tw-gradient-stops))}.bg-gradient-to-r{background-image:linear-gradient(to right,var(--tw-gradient-stops))}.from-gray-200{--tw-gradient-from:#e5e7eb;--tw-gradient-to:rgba(229,231,235,0);--tw-gradient-stops:var(--tw-gradient-from),var(--tw-gradient-to)}.from-green-400{--tw-gradient-from:#4ade80;--tw-gradient-to:rgba(74,222,128,0);--tw-gradient-stops:var(--tw-gradient-from),var(--tw-gradient-to)}.via-blue-500{--tw-gradient-to:rgba(59,130,246,0);--tw-gradient-stops:var(--tw-gradient-from),#3b82f6,var(--tw-gradient-to)}.to-gray-300{--tw-gradient-to:#d1d5db}.to-purple-500{--tw-gradient-to:#a855f7}.p-4{padding:1rem}.p-2{padding:.5rem}.px-8{padding-left:2rem;padding-right:2rem}.py-4{padding-bottom:1rem;padding-top:1rem}.py-2{padding-bottom:.5rem;padding-top:.5rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-4{padding-right:1rem}.pl-4,.px-4{padding-left:1rem}.pb-16{padding-bottom:4rem}.pt-4{padding-top:1rem}.pl-6{padding-left:1.5rem}.text-center{text-align:center}.font-mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.font-sans{font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji}.text-sm{font-size:.875rem;line-height:1.25rem}.text-4xl{font-size:2.25rem;line-height:2.5rem}.text-2xl{font-size:1.5rem;line-height:2rem}.text-xl{font-size:1.25rem}.text-lg,.text-xl{line-height:1.75rem}.text-lg{font-size:1.125rem}.font-bold{font-weight:700}.font-semibold{font-weight:600}.lowercase{text-transform:lowercase}.italic{font-style:italic}.leading-6{line-height:1.5rem}.text-gray-200{--tw-text-opacity:1;color:rgb(229 231 235/var(--tw-text-opacity))}.text-gray-900{--tw-text-opacity:1;color:rgb(17 24 39/var(--tw-text-opacity))}.text-gray-800{--tw-text-opacity:1;color:rgb(31 41 55/var(--tw-text-opacity))}.text-white{--tw-text-opacity:1;color:rgb(255 255 255/var(--tw-text-opacity))}.text-black{--tw-text-opacity:1;color:rgb(0 0 0/var(--tw-text-opacity))}.text-gray-100{--tw-text-opacity:1;color:rgb(243 244 246/var(--tw-text-opacity))}.antialiased{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.shadow-lg{--tw-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -4px rgba(0,0,0,.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color),0 4px 6px -4px var(--tw-shadow-color)}.shadow-lg,.shadow-sm{box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.shadow-sm{--tw-shadow:0 1px 2px 0 rgba(0,0,0,.05);--tw-shadow-colored:0 1px 2px 0 var(--tw-shadow-color)}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.transition-colors{transition-duration:.15s;transition-property:color,background-color,border-color,fill,stroke,-webkit-text-decoration-color;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,-webkit-text-decoration-color;transition-timing-function:cubic-bezier(.4,0,.2,1)}.transition{transition-duration:.15s;transition-property:color,background-color,border-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-text-decoration-color,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-text-decoration-color,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1)}.duration-500{transition-duration:.5s}.duration-300{transition-duration:.3s}.ease-in-out{transition-timing-function:cubic-bezier(.4,0,.2,1)}code[class*=language-],pre[class*=language-]{display:block}.hover\:border-green-400:hover{--tw-border-opacity:1;border-color:rgb(74 222 128/var(--tw-border-opacity))}.hover\:bg-gray-200:hover{--tw-bg-opacity:1;background-color:rgb(229 231 235/var(--tw-bg-opacity))}.hover\:bg-purple-800:hover{--tw-bg-opacity:1;background-color:rgb(107 33 168/var(--tw-bg-opacity))}.hover\:text-gray-200:hover{--tw-text-opacity:1;color:rgb(229 231 235/var(--tw-text-opacity))}.focus\:border-blue-300:focus{--tw-border-opacity:1;border-color:rgb(147 197 253/var(--tw-border-opacity))}.focus\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.focus\:ring:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(3px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}@media (prefers-color-scheme:dark){.dark\:divide-gray-200>:not([hidden])~:not([hidden]){--tw-divide-opacity:1;border-color:rgb(229 231 235/var(--tw-divide-opacity))}.dark\:border-black{--tw-border-opacity:1;border-color:rgb(0 0 0/var(--tw-border-opacity))}.dark\:bg-gray-800{--tw-bg-opacity:1;background-color:rgb(31 41 55/var(--tw-bg-opacity))}.dark\:bg-gray-900{--tw-bg-opacity:1;background-color:rgb(17 24 39/var(--tw-bg-opacity))}.dark\:bg-gray-700{--tw-bg-opacity:1;background-color:rgb(55 65 81/var(--tw-bg-opacity))}.dark\:text-gray-300{--tw-text-opacity:1;color:rgb(209 213 219/var(--tw-text-opacity))}.dark\:text-gray-100{--tw-text-opacity:1;color:rgb(243 244 246/var(--tw-text-opacity))}.dark\:text-gray-200{--tw-text-opacity:1;color:rgb(229 231 235/var(--tw-text-opacity))}.dark\:hover\:bg-gray-800:hover{--tw-bg-opacity:1;background-color:rgb(31 41 55/var(--tw-bg-opacity))}}@media (min-width:768px){.md\:float-none{float:none}.md\:block{display:block}.md\:w-40{width:10rem}.md\:w-2\/3{width:66.666667%}.md\:w-1\/6{width:16.666667%}}@media (min-width:1024px){.lg\:float-right{float:right}.lg\:float-left{float:left}.lg\:mt-4{margin-top:1rem}.lg\:text-left{text-align:left}}.prism-code{-webkit-overflow-scrolling:touch;background-color:transparent;border-radius:.2em;float:left;font-size:1rem;margin-bottom:1rem;margin-top:1rem;overflow:initial;padding-bottom:1rem;padding-top:1rem;position:relative}.prism-code.title{border-radius:0 0 .2em .2em}pre.prism-code{float:left;min-width:100%;overflow:initial;padding:20px}.token{display:inline-block}li>code,p>code{word-wrap:break-word;background:#011627;border-radius:.2em;color:#d6deeb;padding:.2em;white-space:pre-wrap}.gatsby-highlight{-webkit-overflow-scrolling:touch;font-size:1rem;overflow:auto;position:relative}.gatsby-highlight::-webkit-scrollbar{display:none}.gatsby-highlight>code[class*=language-],.gatsby>pre[class*=language-]{-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;line-height:1.5;overflow-wrap:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-break:normal;word-spacing:normal}.gatsby-highlight .token-line{border-left:4px solid transparent;margin-left:-20px;margin-right:-20px}.line-number-style{display:inline-block;opacity:.3;padding-left:1em;padding-right:2em;position:relative;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1.2em}.gatsby-highlight .token-line.highlight-line{background-color:#023751;border-left:4px solid #029bce}.gatsby-highlight .token-line.highlight-line .line-number-style{left:0;opacity:.5;width:calc(1.2em - 4px)}</style><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link rel="search" type="application/opensearchdescription+xml" title="Matthew Daly" href="/opensearch.xml"/><script data-gatsby="web-vitals-polyfill">
              !function(){var e,t,n,i,r={passive:!0,capture:!0},a=new Date,o=function(){i=[],t=-1,e=null,f(addEventListener)},c=function(i,r){e||(e=r,t=i,n=new Date,f(removeEventListener),u())},u=function(){if(t>=0&&t<n-a){var r={entryType:"first-input",name:e.type,target:e.target,cancelable:e.cancelable,startTime:e.timeStamp,processingStart:e.timeStamp+t};i.forEach((function(e){e(r)})),i=[]}},s=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var n=function(){c(e,t),a()},i=function(){a()},a=function(){removeEventListener("pointerup",n,r),removeEventListener("pointercancel",i,r)};addEventListener("pointerup",n,r),addEventListener("pointercancel",i,r)}(t,e):c(t,e)}},f=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,s,r)}))},p="hidden"===document.visibilityState?0:1/0;addEventListener("visibilitychange",(function e(t){"hidden"===document.visibilityState&&(p=t.timeStamp,removeEventListener("visibilitychange",e,!0))}),!0);o(),self.webVitals={firstInputPolyfill:function(e){i.push(e),u()},resetFirstInputPolyfill:o,get firstHiddenTime(){return p}}}();
            </script><script>window.dataLayer = window.dataLayer || [];window.dataLayer.push({"platform":"gatsby"}); (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= 'https://www.googletagmanager.com/gtm.js?id='+i+dl+'';f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer', 'G-68VZX216JS');</script><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><title data-react-helmet="true">Mutation testing with Infection | Matthew Daly</title><link data-react-helmet="true" href="https://matthewdaly.co.uk/blog/2018/09/13/mutation-testing-with-infection/" rel="canonical"/><link data-react-helmet="true" href="https://twitter.com/mattbd" rel="me"/><link data-react-helmet="true" href="https://github.com/matthewbdaly" rel="me"/><link data-react-helmet="true" href="mailto:matthew@matthewdaly.co.uk" rel="me"/><link data-react-helmet="true" href="/key.pub" rel="pgpkey"/><link data-react-helmet="true" href="https://webmention.io/matthewdaly.co.uk/xmlrpc" rel="pingback"/><link data-react-helmet="true" href="https://webmention.io/matthewdaly.co.uk/webmention" rel="webmention"/><link data-react-helmet="true" rel="authorization_endpoint" href="https://indieauth.com/auth"/><link data-react-helmet="true" rel="token_endpoint" href="https://tokens.indieauth.com/token"/><link data-react-helmet="true" rel="openid.delegate" href="https://matthewdaly.co.uk"/><link data-react-helmet="true" rel="openid.server" href="https://openid.indieauth.com/openid"/><link data-react-helmet="true" rel="alternate" type="application/rss+xml" title="Matthew Daly - feed" href="/rss.xml"/><link data-react-helmet="true" rel="alternate" type="application/atom+xml" title="Matthew Daly - feed" href="/atom.xml"/><link data-react-helmet="true" rel="alternate" type="application/feed+json" title="Matthew Daly - feed" href="/feed.json"/><link rel="sitemap" type="application/xml" href="/sitemap/sitemap-index.xml"/><link rel="icon" href="/favicon-32x32.png?v=53aa06cf17e4239d0dba6ffd09854e02" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=53aa06cf17e4239d0dba6ffd09854e02"/></head><body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=G-68VZX216JS" height="0" width="0" style="display: none; visibility: hidden" aria-hidden="true"></iframe></noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="flex flex-col min-h-screen pb-16 font-sans text-lg antialiased text-gray-800 bg-gray-50 dark:text-gray-100 dark:bg-gray-700 leading-6"><div class="w-full h-2 bg-gradient-to-r from-green-400 via-blue-500 to-purple-500"></div><nav class="w-full p-4 mx-auto lowercase md:w-2/3"><h1 class="block float-none py-4 text-4xl text-center lg:float-left lg:text-left"><a href="/">Matthew Daly</a></h1><ul class="py-2 text-center lg:float-right md:block lg:text-left"><li class="inline-block pr py-2 mr-8 lg:mt-4 text-sm text-gray-900 dark:text-gray-200 border-b-4 border-transparent hover:border-green-400 transition-colors duration-500"><a href="/blog/archives">Archives</a></li><li class="inline-block pr py-2 mr-8 lg:mt-4 text-sm text-gray-900 dark:text-gray-200 border-b-4 border-transparent hover:border-green-400 transition-colors duration-500"><a href="/about">About</a></li><li class="inline-block pr py-2 mr-8 lg:mt-4 text-sm text-gray-900 dark:text-gray-200 border-b-4 border-transparent hover:border-green-400 transition-colors duration-500"><a href="/uses">Uses</a></li><li class="inline-block pr py-2 mr-8 lg:mt-4 text-sm text-gray-900 dark:text-gray-200 border-b-4 border-transparent hover:border-green-400 transition-colors duration-500"><a href="/posts/1">Blog</a></li><li class="inline-block pr py-2 mr-8 lg:mt-4 text-sm text-gray-900 dark:text-gray-200 border-b-4 border-transparent hover:border-green-400 transition-colors duration-500"><a href="/blog/categories">Categories</a></li><li class="inline-block pr py-2 mr-8 lg:mt-4 text-sm text-gray-900 dark:text-gray-200 border-b-4 border-transparent hover:border-green-400 transition-colors duration-500"><a href="/search">Search</a></li></ul></nav><div class="w-full h-4 clear"></div><main class="flex-grow w-full p-4 mx-auto md:w-2/3"><article class="h-entry"><header><h2 class="py-4 text-2xl font-bold e-content p-name"><a class="u-url" href="https://matthewdaly.co.uk/blog/2018/09/13/mutation-testing-with-infection/">Mutation testing with Infection</a></h2><p class="my-4 text-lg font-semibold">Published by <a href="/" rel="author">Matthew Daly</a> at <!-- -->13th September 2018 7:10 pm</p><time class="hidden dt-published">2018-09-13T19:10:09+00:00</time></header><section><p class="py-2">Writing automated tests is an excellent way of catching bugs during development and maintenance of your application, not to mention the other benefits. However, it&#x27;s hard to gauge the quality of your tests, particularly when you first start out. Coverage will give you a good idea of what code was actually run during the test, but it won&#x27;t tell you if the test itself actually tests anything worthwhile.</p><p class="py-2"><a href="https://infection.github.io/" class="border-b-2 border-green-400">Infection</a> is a mutation testing framework. The documentation defines mutation testing as follows:</p><blockquote class="pl-4 italic text-gray-200 text-gray-900 bg-gray-100 border-l-8 border-gray-500 dark:text-gray-300 dark:bg-gray-800"><p class="py-2">Mutation testing involves modifying a program in small ways. Each mutated version is called a Mutant. To assess the quality of a given test set, these mutants are executed against the input test set to see if the seeded faults can be detected. If mutated program produces failing tests, this is called a killed mutant. If tests are green with mutated code, then we have an escaped mutant.</p></blockquote><p class="py-2">Infection works by running the test suite, carrying out a series of mutations on the source code in order to try to break the tests, and then collecting the results. The actual mutations carried out are not random - there is a set of mutations that get carried out every time, so results should be consistent. Ideally, all mutants should be killed by your tests - escaped mutants can indicate that either the line of mutated code is not tested, or the tests for that line are not very useful.</p><p class="py-2">I decided to add mutation testing to my <a href="https://github.com/matthewbdaly/laravel-cart" class="border-b-2 border-green-400">Laravel shopping cart package</a>. In order to use Infection, you need to be able to generate code coverage, which means having either XDebug or phpdbg installed. Once Infection is installed (refer to the documentation for this), you can run this command in the project directory to configure it:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style"></span><span class="token plain">$ infection</span></div></pre></div></pre><p class="py-2">Infection defaults to using PHPUnit for the tests, but it also supports PHPSpec. If you&#x27;re using PHPSpec, you will need to specify the testing framework like this:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style"></span><span class="token plain">$ infection --test-framework</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">phpspec</span></div></pre></div></pre><p class="py-2">Since PHPSpec doesn&#x27;t support code coverage out of the box, you&#x27;ll need to install a package for that - I used <code>leanphp/phpspec-code-coverage</code>.</p><p class="py-2">On first run, you&#x27;ll be prompted to create a configuration file. Your source directory should be straightforward to set up, but at the next step, if your project uses interfaces in the source directory, you should exclude them. The rest of the defaults should be fine.</p><p class="py-2">I found that the first run gave a large number of uncovered results, but the second and later ones were more consistent - not sure if it&#x27;s an issue with my setup or not. Running it gave me this:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ infection</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">You are running Infection with xdebug enabled.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">    ____      ____          __  _</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">   /  _/___  / __/__  _____/ /_</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">_</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain">___  ____</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">   / // __ </span><span class="token punctuation" style="color:#8dc891">\</span><span class="token plain">/ /_/ _ </span><span class="token punctuation" style="color:#8dc891">\</span><span class="token plain">/ ___/ __/ / __ </span><span class="token punctuation" style="color:#8dc891">\</span><span class="token plain">/ __ </span><span class="token punctuation" style="color:#8dc891">\</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain"> _/ // / / / __/  __/ /__/ /_/ / /_/ / / / /</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">/___/_/ /_/_/  </span><span class="token punctuation" style="color:#8dc891">\</span><span class="token plain">___/</span><span class="token punctuation" style="color:#8dc891">\</span><span class="token plain">___/</span><span class="token punctuation" style="color:#8dc891">\</span><span class="token plain">__/_/</span><span class="token punctuation" style="color:#8dc891">\</span><span class="token plain">____/_/ /_/</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">    </span><span class="token number" style="color:#5a9bcf">0</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain">---------------------------</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">1</span><span class="token plain"> secRunning initial </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> suite</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain">PHPUnit version: </span><span class="token number" style="color:#5a9bcf">6.5</span><span class="token plain">.13</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain">   </span><span class="token number" style="color:#5a9bcf">27</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">3</span><span class="token plain"> secs</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain">Generate mutants</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token plain">Processing </span><span class="token builtin class-name" style="color:#FAC863">source</span><span class="token plain"> code files: </span><span class="token number" style="color:#5a9bcf">5</span><span class="token plain">/5</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token plain">Creating mutated files and processes: </span><span class="token number" style="color:#5a9bcf">43</span><span class="token plain">/43</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token plain">.: killed, M: escaped, S: uncovered, E: fatal error, T: timed out</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">21</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">..</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.MMM</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.M</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.M</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.          </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token number" style="color:#5a9bcf">43</span><span class="token plain"> / </span><span class="token number" style="color:#5a9bcf">43</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">22</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">23</span><span class="token plain"></span><span class="token number" style="color:#5a9bcf">43</span><span class="token plain"> mutations were generated:</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">24</span><span class="token plain">      </span><span class="token number" style="color:#5a9bcf">38</span><span class="token plain"> mutants were killed</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">25</span><span class="token plain">       </span><span class="token number" style="color:#5a9bcf">0</span><span class="token plain"> mutants were not covered by tests</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">26</span><span class="token plain">       </span><span class="token number" style="color:#5a9bcf">5</span><span class="token plain"> covered mutants were not detected</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">27</span><span class="token plain">       </span><span class="token number" style="color:#5a9bcf">0</span><span class="token plain"> errors were encountered</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">28</span><span class="token plain">       </span><span class="token number" style="color:#5a9bcf">0</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">time</span><span class="token plain"> outs were encountered</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">29</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">30</span><span class="token plain">Metrics:</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">31</span><span class="token plain">         Mutation Score Indicator </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">MSI</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain">: </span><span class="token number" style="color:#5a9bcf">88</span><span class="token plain">%</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">32</span><span class="token plain">         Mutation Code Coverage: </span><span class="token number" style="color:#5a9bcf">100</span><span class="token plain">%</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">33</span><span class="token plain">         Covered Code MSI: </span><span class="token number" style="color:#5a9bcf">88</span><span class="token plain">%</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">34</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">35</span><span class="token plain">Please note that some mutants will inevitably be harmless </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">i.e. </span><span class="token boolean" style="color:#ff8b50">false</span><span class="token plain"> positives</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain">.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">36</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">37</span><span class="token plain">Time: 21s. Memory: </span><span class="token number" style="color:#5a9bcf">12</span><span class="token plain">.00MB</span></div></pre></div></pre><p class="py-2">Our test run shows 5 escaped mutants, and the remaining 38 were killed. We can view the results by looking at the generated <code>infection-log.txt</code>:</p><pre><div class="gatsby-highlight" data-language="txt"><pre class="prism-code language-txt" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">Escaped mutants:</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">================</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">1) /home/matthew/Projects/laravel-cart/src/Services/Cart.php:132    [M] DecrementInteger</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">--- Original</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain">+++ New</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">@@ @@</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain">     {</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain">         $content = Collection::make($this-&gt;all())-&gt;map(function ($item) use($rowId) {</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain">             if ($item[&#x27;row_id&#x27;] == $rowId) {</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain">-                if ($item[&#x27;qty&#x27;] &gt; 0) {</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain">+                if ($item[&#x27;qty&#x27;] &gt; -1) {</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain">                     $item[&#x27;qty&#x27;] -= 1;</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token plain">                 }</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token plain">             }</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token plain">2) /home/matthew/Projects/laravel-cart/src/Services/Cart.php:132    [M] OneZeroInteger</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">21</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">22</span><span class="token plain">--- Original</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">23</span><span class="token plain">+++ New</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">24</span><span class="token plain">@@ @@</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">25</span><span class="token plain">     {</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">26</span><span class="token plain">         $content = Collection::make($this-&gt;all())-&gt;map(function ($item) use($rowId) {</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">27</span><span class="token plain">             if ($item[&#x27;row_id&#x27;] == $rowId) {</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">28</span><span class="token plain">-                if ($item[&#x27;qty&#x27;] &gt; 0) {</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">29</span><span class="token plain">+                if ($item[&#x27;qty&#x27;] &gt; 1) {</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">30</span><span class="token plain">                     $item[&#x27;qty&#x27;] -= 1;</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">31</span><span class="token plain">                 }</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">32</span><span class="token plain">             }</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">33</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">34</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">35</span><span class="token plain">3) /home/matthew/Projects/laravel-cart/src/Services/Cart.php:132    [M] GreaterThan</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">36</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">37</span><span class="token plain">--- Original</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">38</span><span class="token plain">+++ New</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">39</span><span class="token plain">@@ @@</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">40</span><span class="token plain">     {</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">41</span><span class="token plain">         $content = Collection::make($this-&gt;all())-&gt;map(function ($item) use($rowId) {</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">42</span><span class="token plain">             if ($item[&#x27;row_id&#x27;] == $rowId) {</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">43</span><span class="token plain">-                if ($item[&#x27;qty&#x27;] &gt; 0) {</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">44</span><span class="token plain">+                if ($item[&#x27;qty&#x27;] &gt;= 0) {</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">45</span><span class="token plain">                     $item[&#x27;qty&#x27;] -= 1;</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">46</span><span class="token plain">                 }</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">47</span><span class="token plain">             }</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">48</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">49</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">50</span><span class="token plain">4) /home/matthew/Projects/laravel-cart/src/Services/Cart.php:133    [M] Assignment</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">51</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">52</span><span class="token plain">--- Original</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">53</span><span class="token plain">+++ New</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">54</span><span class="token plain">@@ @@</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">55</span><span class="token plain">         $content = Collection::make($this-&gt;all())-&gt;map(function ($item) use($rowId) {</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">56</span><span class="token plain">             if ($item[&#x27;row_id&#x27;] == $rowId) {</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">57</span><span class="token plain">                 if ($item[&#x27;qty&#x27;] &gt; 0) {</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">58</span><span class="token plain">-                    $item[&#x27;qty&#x27;] -= 1;</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">59</span><span class="token plain">+                    $item[&#x27;qty&#x27;] = 1;</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">60</span><span class="token plain">                 }</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">61</span><span class="token plain">             }</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">62</span><span class="token plain">             return $item;</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">63</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">64</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">65</span><span class="token plain">5) /home/matthew/Projects/laravel-cart/src/Services/Cart.php:197    [M] OneZeroInteger</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">66</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">67</span><span class="token plain">--- Original</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">68</span><span class="token plain">+++ New</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">69</span><span class="token plain">@@ @@</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">70</span><span class="token plain">      */</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">71</span><span class="token plain">     private function hasStringKeys(array $items)</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">72</span><span class="token plain">     {</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">73</span><span class="token plain">-        return count(array_filter(array_keys($items), &#x27;is_string&#x27;)) &gt; 0;</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">74</span><span class="token plain">+        return count(array_filter(array_keys($items), &#x27;is_string&#x27;)) &gt; 1;</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">75</span><span class="token plain">     }</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">76</span><span class="token plain">     /**</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">77</span><span class="token plain">      * Validate input</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">78</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">79</span><span class="token plain">Timed Out mutants:</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">80</span><span class="token plain">==================</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">81</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">82</span><span class="token plain">Not Covered mutants:</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">83</span><span class="token plain">====================</span></div></pre></div></pre><p class="py-2">This displays the mutants that escaped, and include a diff of the changed code, so we can see that all of these involve changing the comparison operators.</p><p class="py-2">The last one can be resolved easily because the comparison is superfluous - the result of <code>count()</code> can be evaluated as true or false by itself, so removing the <code>&gt; 0</code> at the end in the test solves the problem quite neatly.</p><p class="py-2">The other four mutations are somewhat harder. They all amend the <code>decrement</code> method&#x27;s conditions, showing that a single assertion doesn&#x27;t really fully check the behaviour. Here&#x27;s the current test for that method:</p><pre><div class="gatsby-highlight" data-language="php"><pre class="prism-code language-php" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token php language-php delimiter important" style="font-weight:400">&lt;?php</span><span class="token php language-php"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token php language-php" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token php language-php"></span><span class="token php language-php keyword" style="color:#c5a5c5">namespace</span><span class="token php language-php"> </span><span class="token php language-php package">Tests</span><span class="token php language-php package punctuation" style="color:#8dc891">\</span><span class="token php language-php package">Unit</span><span class="token php language-php package punctuation" style="color:#8dc891">\</span><span class="token php language-php package">Services</span><span class="token php language-php punctuation" style="color:#8dc891">;</span><span class="token php language-php"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token php language-php" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token php language-php"></span><span class="token php language-php keyword" style="color:#c5a5c5">use</span><span class="token php language-php"> </span><span class="token php language-php package">Tests</span><span class="token php language-php package punctuation" style="color:#8dc891">\</span><span class="token php language-php package">TestCase</span><span class="token php language-php punctuation" style="color:#8dc891">;</span><span class="token php language-php"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token php language-php"></span><span class="token php language-php keyword" style="color:#c5a5c5">use</span><span class="token php language-php"> </span><span class="token php language-php package">Matthewbdaly</span><span class="token php language-php package punctuation" style="color:#8dc891">\</span><span class="token php language-php package">LaravelCart</span><span class="token php language-php package punctuation" style="color:#8dc891">\</span><span class="token php language-php package">Services</span><span class="token php language-php package punctuation" style="color:#8dc891">\</span><span class="token php language-php package">Cart</span><span class="token php language-php punctuation" style="color:#8dc891">;</span><span class="token php language-php"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token php language-php"></span><span class="token php language-php keyword" style="color:#c5a5c5">use</span><span class="token php language-php"> </span><span class="token php language-php package">Mockery</span><span class="token php language-php"> </span><span class="token php language-php keyword" style="color:#c5a5c5">as</span><span class="token php language-php"> m</span><span class="token php language-php punctuation" style="color:#8dc891">;</span><span class="token php language-php"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token php language-php" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token php language-php"></span><span class="token php language-php keyword" style="color:#c5a5c5">class</span><span class="token php language-php"> </span><span class="token php language-php class-name-definition class-name" style="color:#FAC863">CartTest</span><span class="token php language-php"> </span><span class="token php language-php keyword" style="color:#c5a5c5">extends</span><span class="token php language-php"> </span><span class="token php language-php class-name" style="color:#FAC863">TestCase</span><span class="token php language-php"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token php language-php"></span><span class="token php language-php punctuation" style="color:#8dc891">{</span><span class="token php language-php"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token php language-php">    </span><span class="token php language-php comment" style="color:#999999">/**</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token php language-php comment" style="color:#999999">     * @dataProvider arrayProvider</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token php language-php comment" style="color:#999999">     */</span><span class="token php language-php"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token php language-php">    </span><span class="token php language-php keyword" style="color:#c5a5c5">public</span><span class="token php language-php"> </span><span class="token php language-php keyword" style="color:#c5a5c5">function</span><span class="token php language-php"> </span><span class="token php language-php function-definition function" style="color:#79b6f2">testCanDecrementQuantity</span><span class="token php language-php punctuation" style="color:#8dc891">(</span><span class="token php language-php variable" style="color:#d7deea">$data</span><span class="token php language-php punctuation" style="color:#8dc891">)</span><span class="token php language-php"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token php language-php">    </span><span class="token php language-php punctuation" style="color:#8dc891">{</span><span class="token php language-php"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token php language-php">        </span><span class="token php language-php variable" style="color:#d7deea">$data</span><span class="token php language-php punctuation" style="color:#8dc891">[</span><span class="token php language-php number" style="color:#5a9bcf">0</span><span class="token php language-php punctuation" style="color:#8dc891">]</span><span class="token php language-php punctuation" style="color:#8dc891">[</span><span class="token php language-php string single-quoted-string" style="color:#8dc891">&#x27;row_id&#x27;</span><span class="token php language-php punctuation" style="color:#8dc891">]</span><span class="token php language-php"> </span><span class="token php language-php operator" style="color:#d7deea">=</span><span class="token php language-php"> </span><span class="token php language-php string single-quoted-string" style="color:#8dc891">&#x27;my_row_id_1&#x27;</span><span class="token php language-php punctuation" style="color:#8dc891">;</span><span class="token php language-php"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token php language-php">        </span><span class="token php language-php variable" style="color:#d7deea">$data</span><span class="token php language-php punctuation" style="color:#8dc891">[</span><span class="token php language-php number" style="color:#5a9bcf">1</span><span class="token php language-php punctuation" style="color:#8dc891">]</span><span class="token php language-php punctuation" style="color:#8dc891">[</span><span class="token php language-php string single-quoted-string" style="color:#8dc891">&#x27;row_id&#x27;</span><span class="token php language-php punctuation" style="color:#8dc891">]</span><span class="token php language-php"> </span><span class="token php language-php operator" style="color:#d7deea">=</span><span class="token php language-php"> </span><span class="token php language-php string single-quoted-string" style="color:#8dc891">&#x27;my_row_id_2&#x27;</span><span class="token php language-php punctuation" style="color:#8dc891">;</span><span class="token php language-php"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token php language-php">        </span><span class="token php language-php variable" style="color:#d7deea">$newdata</span><span class="token php language-php"> </span><span class="token php language-php operator" style="color:#d7deea">=</span><span class="token php language-php"> </span><span class="token php language-php variable" style="color:#d7deea">$data</span><span class="token php language-php punctuation" style="color:#8dc891">;</span><span class="token php language-php"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token php language-php">        </span><span class="token php language-php variable" style="color:#d7deea">$newdata</span><span class="token php language-php punctuation" style="color:#8dc891">[</span><span class="token php language-php number" style="color:#5a9bcf">1</span><span class="token php language-php punctuation" style="color:#8dc891">]</span><span class="token php language-php punctuation" style="color:#8dc891">[</span><span class="token php language-php string single-quoted-string" style="color:#8dc891">&#x27;qty&#x27;</span><span class="token php language-php punctuation" style="color:#8dc891">]</span><span class="token php language-php"> </span><span class="token php language-php operator" style="color:#d7deea">=</span><span class="token php language-php"> </span><span class="token php language-php number" style="color:#5a9bcf">1</span><span class="token php language-php punctuation" style="color:#8dc891">;</span><span class="token php language-php"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token php language-php">        </span><span class="token php language-php variable" style="color:#d7deea">$session</span><span class="token php language-php"> </span><span class="token php language-php operator" style="color:#d7deea">=</span><span class="token php language-php"> </span><span class="token php language-php class-name static-context" style="color:#FAC863">m</span><span class="token php language-php operator" style="color:#d7deea">::</span><span class="token php language-php function" style="color:#79b6f2">mock</span><span class="token php language-php punctuation" style="color:#8dc891">(</span><span class="token php language-php string single-quoted-string" style="color:#8dc891">&#x27;Illuminate\Contracts\Session\Session&#x27;</span><span class="token php language-php punctuation" style="color:#8dc891">)</span><span class="token php language-php punctuation" style="color:#8dc891">;</span><span class="token php language-php"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">21</span><span class="token php language-php">        </span><span class="token php language-php variable" style="color:#d7deea">$session</span><span class="token php language-php operator" style="color:#d7deea">-&gt;</span><span class="token php language-php function" style="color:#79b6f2">shouldReceive</span><span class="token php language-php punctuation" style="color:#8dc891">(</span><span class="token php language-php string single-quoted-string" style="color:#8dc891">&#x27;get&#x27;</span><span class="token php language-php punctuation" style="color:#8dc891">)</span><span class="token php language-php operator" style="color:#d7deea">-&gt;</span><span class="token php language-php function" style="color:#79b6f2">with</span><span class="token php language-php punctuation" style="color:#8dc891">(</span><span class="token php language-php string single-quoted-string" style="color:#8dc891">&#x27;Matthewbdaly\LaravelCart\Services\Cart&#x27;</span><span class="token php language-php punctuation" style="color:#8dc891">)</span><span class="token php language-php operator" style="color:#d7deea">-&gt;</span><span class="token php language-php function" style="color:#79b6f2">once</span><span class="token php language-php punctuation" style="color:#8dc891">(</span><span class="token php language-php punctuation" style="color:#8dc891">)</span><span class="token php language-php operator" style="color:#d7deea">-&gt;</span><span class="token php language-php function" style="color:#79b6f2">andReturn</span><span class="token php language-php punctuation" style="color:#8dc891">(</span><span class="token php language-php variable" style="color:#d7deea">$data</span><span class="token php language-php punctuation" style="color:#8dc891">)</span><span class="token php language-php punctuation" style="color:#8dc891">;</span><span class="token php language-php"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">22</span><span class="token php language-php">        </span><span class="token php language-php variable" style="color:#d7deea">$session</span><span class="token php language-php operator" style="color:#d7deea">-&gt;</span><span class="token php language-php function" style="color:#79b6f2">shouldReceive</span><span class="token php language-php punctuation" style="color:#8dc891">(</span><span class="token php language-php string single-quoted-string" style="color:#8dc891">&#x27;put&#x27;</span><span class="token php language-php punctuation" style="color:#8dc891">)</span><span class="token php language-php operator" style="color:#d7deea">-&gt;</span><span class="token php language-php function" style="color:#79b6f2">with</span><span class="token php language-php punctuation" style="color:#8dc891">(</span><span class="token php language-php string single-quoted-string" style="color:#8dc891">&#x27;Matthewbdaly\LaravelCart\Services\Cart&#x27;</span><span class="token php language-php punctuation" style="color:#8dc891">,</span><span class="token php language-php"> </span><span class="token php language-php variable" style="color:#d7deea">$newdata</span><span class="token php language-php punctuation" style="color:#8dc891">)</span><span class="token php language-php operator" style="color:#d7deea">-&gt;</span><span class="token php language-php function" style="color:#79b6f2">once</span><span class="token php language-php punctuation" style="color:#8dc891">(</span><span class="token php language-php punctuation" style="color:#8dc891">)</span><span class="token php language-php punctuation" style="color:#8dc891">;</span><span class="token php language-php"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">23</span><span class="token php language-php">        </span><span class="token php language-php variable" style="color:#d7deea">$uniqid</span><span class="token php language-php"> </span><span class="token php language-php operator" style="color:#d7deea">=</span><span class="token php language-php"> </span><span class="token php language-php class-name static-context" style="color:#FAC863">m</span><span class="token php language-php operator" style="color:#d7deea">::</span><span class="token php language-php function" style="color:#79b6f2">mock</span><span class="token php language-php punctuation" style="color:#8dc891">(</span><span class="token php language-php string single-quoted-string" style="color:#8dc891">&#x27;Matthewbdaly\LaravelCart\Contracts\Services\UniqueId&#x27;</span><span class="token php language-php punctuation" style="color:#8dc891">)</span><span class="token php language-php punctuation" style="color:#8dc891">;</span><span class="token php language-php"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">24</span><span class="token php language-php">        </span><span class="token php language-php variable" style="color:#d7deea">$cart</span><span class="token php language-php"> </span><span class="token php language-php operator" style="color:#d7deea">=</span><span class="token php language-php"> </span><span class="token php language-php keyword" style="color:#c5a5c5">new</span><span class="token php language-php"> </span><span class="token php language-php class-name" style="color:#FAC863">Cart</span><span class="token php language-php punctuation" style="color:#8dc891">(</span><span class="token php language-php variable" style="color:#d7deea">$session</span><span class="token php language-php punctuation" style="color:#8dc891">,</span><span class="token php language-php"> </span><span class="token php language-php variable" style="color:#d7deea">$uniqid</span><span class="token php language-php punctuation" style="color:#8dc891">)</span><span class="token php language-php punctuation" style="color:#8dc891">;</span><span class="token php language-php"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">25</span><span class="token php language-php">        </span><span class="token php language-php variable" style="color:#d7deea">$this</span><span class="token php language-php operator" style="color:#d7deea">-&gt;</span><span class="token php language-php function" style="color:#79b6f2">assertEquals</span><span class="token php language-php punctuation" style="color:#8dc891">(</span><span class="token php language-php constant" style="color:#5a9bcf">null</span><span class="token php language-php punctuation" style="color:#8dc891">,</span><span class="token php language-php"> </span><span class="token php language-php variable" style="color:#d7deea">$cart</span><span class="token php language-php operator" style="color:#d7deea">-&gt;</span><span class="token php language-php function" style="color:#79b6f2">decrement</span><span class="token php language-php punctuation" style="color:#8dc891">(</span><span class="token php language-php string single-quoted-string" style="color:#8dc891">&#x27;my_row_id_2&#x27;</span><span class="token php language-php punctuation" style="color:#8dc891">)</span><span class="token php language-php punctuation" style="color:#8dc891">)</span><span class="token php language-php punctuation" style="color:#8dc891">;</span><span class="token php language-php"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">26</span><span class="token php language-php">    </span><span class="token php language-php punctuation" style="color:#8dc891">}</span><span class="token php language-php"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">27</span><span class="token php language-php"></span><span class="token php language-php punctuation" style="color:#8dc891">}</span><span class="token php language-php"></span></div></pre></div></pre><p class="py-2">It should be possible to decrement it if the quantity is more than zero, but not to go any lower. However, our current test does not catch anything but decrementing it from 2 to 1, which doesn&#x27;t fully demonstrate this. We therefore need to add a few more assertions to cover taking it down to zero, and then trying to decrement it again. Here&#x27;s how we might do that.</p><pre><div class="gatsby-highlight" data-language="php"><pre class="prism-code language-php" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token php language-php delimiter important" style="font-weight:400">&lt;?php</span><span class="token php language-php"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token php language-php" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token php language-php"></span><span class="token php language-php keyword" style="color:#c5a5c5">namespace</span><span class="token php language-php"> </span><span class="token php language-php package">Tests</span><span class="token php language-php package punctuation" style="color:#8dc891">\</span><span class="token php language-php package">Unit</span><span class="token php language-php package punctuation" style="color:#8dc891">\</span><span class="token php language-php package">Services</span><span class="token php language-php punctuation" style="color:#8dc891">;</span><span class="token php language-php"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token php language-php" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token php language-php"></span><span class="token php language-php keyword" style="color:#c5a5c5">use</span><span class="token php language-php"> </span><span class="token php language-php package">Tests</span><span class="token php language-php package punctuation" style="color:#8dc891">\</span><span class="token php language-php package">TestCase</span><span class="token php language-php punctuation" style="color:#8dc891">;</span><span class="token php language-php"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token php language-php"></span><span class="token php language-php keyword" style="color:#c5a5c5">use</span><span class="token php language-php"> </span><span class="token php language-php package">Matthewbdaly</span><span class="token php language-php package punctuation" style="color:#8dc891">\</span><span class="token php language-php package">LaravelCart</span><span class="token php language-php package punctuation" style="color:#8dc891">\</span><span class="token php language-php package">Services</span><span class="token php language-php package punctuation" style="color:#8dc891">\</span><span class="token php language-php package">Cart</span><span class="token php language-php punctuation" style="color:#8dc891">;</span><span class="token php language-php"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token php language-php"></span><span class="token php language-php keyword" style="color:#c5a5c5">use</span><span class="token php language-php"> </span><span class="token php language-php package">Mockery</span><span class="token php language-php"> </span><span class="token php language-php keyword" style="color:#c5a5c5">as</span><span class="token php language-php"> m</span><span class="token php language-php punctuation" style="color:#8dc891">;</span><span class="token php language-php"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token php language-php" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token php language-php"></span><span class="token php language-php keyword" style="color:#c5a5c5">class</span><span class="token php language-php"> </span><span class="token php language-php class-name-definition class-name" style="color:#FAC863">CartTest</span><span class="token php language-php"> </span><span class="token php language-php keyword" style="color:#c5a5c5">extends</span><span class="token php language-php"> </span><span class="token php language-php class-name" style="color:#FAC863">TestCase</span><span class="token php language-php"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token php language-php"></span><span class="token php language-php punctuation" style="color:#8dc891">{</span><span class="token php language-php"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token php language-php">    </span><span class="token php language-php comment" style="color:#999999">/**</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token php language-php comment" style="color:#999999">     * @dataProvider arrayProvider</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token php language-php comment" style="color:#999999">     */</span><span class="token php language-php"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token php language-php">    </span><span class="token php language-php keyword" style="color:#c5a5c5">public</span><span class="token php language-php"> </span><span class="token php language-php keyword" style="color:#c5a5c5">function</span><span class="token php language-php"> </span><span class="token php language-php function-definition function" style="color:#79b6f2">testCanDecrementQuantity</span><span class="token php language-php punctuation" style="color:#8dc891">(</span><span class="token php language-php variable" style="color:#d7deea">$data</span><span class="token php language-php punctuation" style="color:#8dc891">)</span><span class="token php language-php"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token php language-php">    </span><span class="token php language-php punctuation" style="color:#8dc891">{</span><span class="token php language-php"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token php language-php">        </span><span class="token php language-php variable" style="color:#d7deea">$data</span><span class="token php language-php punctuation" style="color:#8dc891">[</span><span class="token php language-php number" style="color:#5a9bcf">0</span><span class="token php language-php punctuation" style="color:#8dc891">]</span><span class="token php language-php punctuation" style="color:#8dc891">[</span><span class="token php language-php string single-quoted-string" style="color:#8dc891">&#x27;row_id&#x27;</span><span class="token php language-php punctuation" style="color:#8dc891">]</span><span class="token php language-php"> </span><span class="token php language-php operator" style="color:#d7deea">=</span><span class="token php language-php"> </span><span class="token php language-php string single-quoted-string" style="color:#8dc891">&#x27;my_row_id_1&#x27;</span><span class="token php language-php punctuation" style="color:#8dc891">;</span><span class="token php language-php"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token php language-php">        </span><span class="token php language-php variable" style="color:#d7deea">$data</span><span class="token php language-php punctuation" style="color:#8dc891">[</span><span class="token php language-php number" style="color:#5a9bcf">1</span><span class="token php language-php punctuation" style="color:#8dc891">]</span><span class="token php language-php punctuation" style="color:#8dc891">[</span><span class="token php language-php string single-quoted-string" style="color:#8dc891">&#x27;row_id&#x27;</span><span class="token php language-php punctuation" style="color:#8dc891">]</span><span class="token php language-php"> </span><span class="token php language-php operator" style="color:#d7deea">=</span><span class="token php language-php"> </span><span class="token php language-php string single-quoted-string" style="color:#8dc891">&#x27;my_row_id_2&#x27;</span><span class="token php language-php punctuation" style="color:#8dc891">;</span><span class="token php language-php"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token php language-php">        </span><span class="token php language-php variable" style="color:#d7deea">$newdata</span><span class="token php language-php"> </span><span class="token php language-php operator" style="color:#d7deea">=</span><span class="token php language-php"> </span><span class="token php language-php variable" style="color:#d7deea">$data</span><span class="token php language-php punctuation" style="color:#8dc891">;</span><span class="token php language-php"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token php language-php">        </span><span class="token php language-php variable" style="color:#d7deea">$newdata</span><span class="token php language-php punctuation" style="color:#8dc891">[</span><span class="token php language-php number" style="color:#5a9bcf">1</span><span class="token php language-php punctuation" style="color:#8dc891">]</span><span class="token php language-php punctuation" style="color:#8dc891">[</span><span class="token php language-php string single-quoted-string" style="color:#8dc891">&#x27;qty&#x27;</span><span class="token php language-php punctuation" style="color:#8dc891">]</span><span class="token php language-php"> </span><span class="token php language-php operator" style="color:#d7deea">=</span><span class="token php language-php"> </span><span class="token php language-php number" style="color:#5a9bcf">1</span><span class="token php language-php punctuation" style="color:#8dc891">;</span><span class="token php language-php"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token php language-php">        </span><span class="token php language-php variable" style="color:#d7deea">$session</span><span class="token php language-php"> </span><span class="token php language-php operator" style="color:#d7deea">=</span><span class="token php language-php"> </span><span class="token php language-php class-name static-context" style="color:#FAC863">m</span><span class="token php language-php operator" style="color:#d7deea">::</span><span class="token php language-php function" style="color:#79b6f2">mock</span><span class="token php language-php punctuation" style="color:#8dc891">(</span><span class="token php language-php string single-quoted-string" style="color:#8dc891">&#x27;Illuminate\Contracts\Session\Session&#x27;</span><span class="token php language-php punctuation" style="color:#8dc891">)</span><span class="token php language-php punctuation" style="color:#8dc891">;</span><span class="token php language-php"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">21</span><span class="token php language-php">        </span><span class="token php language-php variable" style="color:#d7deea">$session</span><span class="token php language-php operator" style="color:#d7deea">-&gt;</span><span class="token php language-php function" style="color:#79b6f2">shouldReceive</span><span class="token php language-php punctuation" style="color:#8dc891">(</span><span class="token php language-php string single-quoted-string" style="color:#8dc891">&#x27;get&#x27;</span><span class="token php language-php punctuation" style="color:#8dc891">)</span><span class="token php language-php operator" style="color:#d7deea">-&gt;</span><span class="token php language-php function" style="color:#79b6f2">with</span><span class="token php language-php punctuation" style="color:#8dc891">(</span><span class="token php language-php string single-quoted-string" style="color:#8dc891">&#x27;Matthewbdaly\LaravelCart\Services\Cart&#x27;</span><span class="token php language-php punctuation" style="color:#8dc891">)</span><span class="token php language-php operator" style="color:#d7deea">-&gt;</span><span class="token php language-php function" style="color:#79b6f2">once</span><span class="token php language-php punctuation" style="color:#8dc891">(</span><span class="token php language-php punctuation" style="color:#8dc891">)</span><span class="token php language-php operator" style="color:#d7deea">-&gt;</span><span class="token php language-php function" style="color:#79b6f2">andReturn</span><span class="token php language-php punctuation" style="color:#8dc891">(</span><span class="token php language-php variable" style="color:#d7deea">$data</span><span class="token php language-php punctuation" style="color:#8dc891">)</span><span class="token php language-php punctuation" style="color:#8dc891">;</span><span class="token php language-php"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">22</span><span class="token php language-php">        </span><span class="token php language-php variable" style="color:#d7deea">$session</span><span class="token php language-php operator" style="color:#d7deea">-&gt;</span><span class="token php language-php function" style="color:#79b6f2">shouldReceive</span><span class="token php language-php punctuation" style="color:#8dc891">(</span><span class="token php language-php string single-quoted-string" style="color:#8dc891">&#x27;put&#x27;</span><span class="token php language-php punctuation" style="color:#8dc891">)</span><span class="token php language-php operator" style="color:#d7deea">-&gt;</span><span class="token php language-php function" style="color:#79b6f2">with</span><span class="token php language-php punctuation" style="color:#8dc891">(</span><span class="token php language-php string single-quoted-string" style="color:#8dc891">&#x27;Matthewbdaly\LaravelCart\Services\Cart&#x27;</span><span class="token php language-php punctuation" style="color:#8dc891">,</span><span class="token php language-php"> </span><span class="token php language-php variable" style="color:#d7deea">$newdata</span><span class="token php language-php punctuation" style="color:#8dc891">)</span><span class="token php language-php operator" style="color:#d7deea">-&gt;</span><span class="token php language-php function" style="color:#79b6f2">once</span><span class="token php language-php punctuation" style="color:#8dc891">(</span><span class="token php language-php punctuation" style="color:#8dc891">)</span><span class="token php language-php punctuation" style="color:#8dc891">;</span><span class="token php language-php"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">23</span><span class="token php language-php">        </span><span class="token php language-php variable" style="color:#d7deea">$uniqid</span><span class="token php language-php"> </span><span class="token php language-php operator" style="color:#d7deea">=</span><span class="token php language-php"> </span><span class="token php language-php class-name static-context" style="color:#FAC863">m</span><span class="token php language-php operator" style="color:#d7deea">::</span><span class="token php language-php function" style="color:#79b6f2">mock</span><span class="token php language-php punctuation" style="color:#8dc891">(</span><span class="token php language-php string single-quoted-string" style="color:#8dc891">&#x27;Matthewbdaly\LaravelCart\Contracts\Services\UniqueId&#x27;</span><span class="token php language-php punctuation" style="color:#8dc891">)</span><span class="token php language-php punctuation" style="color:#8dc891">;</span><span class="token php language-php"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">24</span><span class="token php language-php">        </span><span class="token php language-php variable" style="color:#d7deea">$cart</span><span class="token php language-php"> </span><span class="token php language-php operator" style="color:#d7deea">=</span><span class="token php language-php"> </span><span class="token php language-php keyword" style="color:#c5a5c5">new</span><span class="token php language-php"> </span><span class="token php language-php class-name" style="color:#FAC863">Cart</span><span class="token php language-php punctuation" style="color:#8dc891">(</span><span class="token php language-php variable" style="color:#d7deea">$session</span><span class="token php language-php punctuation" style="color:#8dc891">,</span><span class="token php language-php"> </span><span class="token php language-php variable" style="color:#d7deea">$uniqid</span><span class="token php language-php punctuation" style="color:#8dc891">)</span><span class="token php language-php punctuation" style="color:#8dc891">;</span><span class="token php language-php"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">25</span><span class="token php language-php">        </span><span class="token php language-php variable" style="color:#d7deea">$this</span><span class="token php language-php operator" style="color:#d7deea">-&gt;</span><span class="token php language-php function" style="color:#79b6f2">assertEquals</span><span class="token php language-php punctuation" style="color:#8dc891">(</span><span class="token php language-php constant" style="color:#5a9bcf">null</span><span class="token php language-php punctuation" style="color:#8dc891">,</span><span class="token php language-php"> </span><span class="token php language-php variable" style="color:#d7deea">$cart</span><span class="token php language-php operator" style="color:#d7deea">-&gt;</span><span class="token php language-php function" style="color:#79b6f2">decrement</span><span class="token php language-php punctuation" style="color:#8dc891">(</span><span class="token php language-php string single-quoted-string" style="color:#8dc891">&#x27;my_row_id_2&#x27;</span><span class="token php language-php punctuation" style="color:#8dc891">)</span><span class="token php language-php punctuation" style="color:#8dc891">)</span><span class="token php language-php punctuation" style="color:#8dc891">;</span><span class="token php language-php"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">26</span><span class="token php language-php">        </span><span class="token php language-php variable" style="color:#d7deea">$newerdata</span><span class="token php language-php"> </span><span class="token php language-php operator" style="color:#d7deea">=</span><span class="token php language-php"> </span><span class="token php language-php variable" style="color:#d7deea">$newdata</span><span class="token php language-php punctuation" style="color:#8dc891">;</span><span class="token php language-php"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">27</span><span class="token php language-php">        </span><span class="token php language-php variable" style="color:#d7deea">$newerdata</span><span class="token php language-php punctuation" style="color:#8dc891">[</span><span class="token php language-php number" style="color:#5a9bcf">1</span><span class="token php language-php punctuation" style="color:#8dc891">]</span><span class="token php language-php punctuation" style="color:#8dc891">[</span><span class="token php language-php string single-quoted-string" style="color:#8dc891">&#x27;qty&#x27;</span><span class="token php language-php punctuation" style="color:#8dc891">]</span><span class="token php language-php"> </span><span class="token php language-php operator" style="color:#d7deea">=</span><span class="token php language-php"> </span><span class="token php language-php number" style="color:#5a9bcf">0</span><span class="token php language-php punctuation" style="color:#8dc891">;</span><span class="token php language-php"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">28</span><span class="token php language-php">        </span><span class="token php language-php variable" style="color:#d7deea">$session</span><span class="token php language-php operator" style="color:#d7deea">-&gt;</span><span class="token php language-php function" style="color:#79b6f2">shouldReceive</span><span class="token php language-php punctuation" style="color:#8dc891">(</span><span class="token php language-php string single-quoted-string" style="color:#8dc891">&#x27;get&#x27;</span><span class="token php language-php punctuation" style="color:#8dc891">)</span><span class="token php language-php operator" style="color:#d7deea">-&gt;</span><span class="token php language-php function" style="color:#79b6f2">with</span><span class="token php language-php punctuation" style="color:#8dc891">(</span><span class="token php language-php string single-quoted-string" style="color:#8dc891">&#x27;Matthewbdaly\LaravelCart\Services\Cart&#x27;</span><span class="token php language-php punctuation" style="color:#8dc891">)</span><span class="token php language-php operator" style="color:#d7deea">-&gt;</span><span class="token php language-php function" style="color:#79b6f2">once</span><span class="token php language-php punctuation" style="color:#8dc891">(</span><span class="token php language-php punctuation" style="color:#8dc891">)</span><span class="token php language-php operator" style="color:#d7deea">-&gt;</span><span class="token php language-php function" style="color:#79b6f2">andReturn</span><span class="token php language-php punctuation" style="color:#8dc891">(</span><span class="token php language-php variable" style="color:#d7deea">$newdata</span><span class="token php language-php punctuation" style="color:#8dc891">)</span><span class="token php language-php punctuation" style="color:#8dc891">;</span><span class="token php language-php"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">29</span><span class="token php language-php">        </span><span class="token php language-php variable" style="color:#d7deea">$session</span><span class="token php language-php operator" style="color:#d7deea">-&gt;</span><span class="token php language-php function" style="color:#79b6f2">shouldReceive</span><span class="token php language-php punctuation" style="color:#8dc891">(</span><span class="token php language-php string single-quoted-string" style="color:#8dc891">&#x27;put&#x27;</span><span class="token php language-php punctuation" style="color:#8dc891">)</span><span class="token php language-php operator" style="color:#d7deea">-&gt;</span><span class="token php language-php function" style="color:#79b6f2">with</span><span class="token php language-php punctuation" style="color:#8dc891">(</span><span class="token php language-php string single-quoted-string" style="color:#8dc891">&#x27;Matthewbdaly\LaravelCart\Services\Cart&#x27;</span><span class="token php language-php punctuation" style="color:#8dc891">,</span><span class="token php language-php"> </span><span class="token php language-php variable" style="color:#d7deea">$newerdata</span><span class="token php language-php punctuation" style="color:#8dc891">)</span><span class="token php language-php operator" style="color:#d7deea">-&gt;</span><span class="token php language-php function" style="color:#79b6f2">once</span><span class="token php language-php punctuation" style="color:#8dc891">(</span><span class="token php language-php punctuation" style="color:#8dc891">)</span><span class="token php language-php punctuation" style="color:#8dc891">;</span><span class="token php language-php"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">30</span><span class="token php language-php">        </span><span class="token php language-php variable" style="color:#d7deea">$this</span><span class="token php language-php operator" style="color:#d7deea">-&gt;</span><span class="token php language-php function" style="color:#79b6f2">assertEquals</span><span class="token php language-php punctuation" style="color:#8dc891">(</span><span class="token php language-php constant" style="color:#5a9bcf">null</span><span class="token php language-php punctuation" style="color:#8dc891">,</span><span class="token php language-php"> </span><span class="token php language-php variable" style="color:#d7deea">$cart</span><span class="token php language-php operator" style="color:#d7deea">-&gt;</span><span class="token php language-php function" style="color:#79b6f2">decrement</span><span class="token php language-php punctuation" style="color:#8dc891">(</span><span class="token php language-php string single-quoted-string" style="color:#8dc891">&#x27;my_row_id_2&#x27;</span><span class="token php language-php punctuation" style="color:#8dc891">)</span><span class="token php language-php punctuation" style="color:#8dc891">)</span><span class="token php language-php punctuation" style="color:#8dc891">;</span><span class="token php language-php"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">31</span><span class="token php language-php">        </span><span class="token php language-php variable" style="color:#d7deea">$session</span><span class="token php language-php operator" style="color:#d7deea">-&gt;</span><span class="token php language-php function" style="color:#79b6f2">shouldReceive</span><span class="token php language-php punctuation" style="color:#8dc891">(</span><span class="token php language-php string single-quoted-string" style="color:#8dc891">&#x27;get&#x27;</span><span class="token php language-php punctuation" style="color:#8dc891">)</span><span class="token php language-php operator" style="color:#d7deea">-&gt;</span><span class="token php language-php function" style="color:#79b6f2">with</span><span class="token php language-php punctuation" style="color:#8dc891">(</span><span class="token php language-php string single-quoted-string" style="color:#8dc891">&#x27;Matthewbdaly\LaravelCart\Services\Cart&#x27;</span><span class="token php language-php punctuation" style="color:#8dc891">)</span><span class="token php language-php operator" style="color:#d7deea">-&gt;</span><span class="token php language-php function" style="color:#79b6f2">once</span><span class="token php language-php punctuation" style="color:#8dc891">(</span><span class="token php language-php punctuation" style="color:#8dc891">)</span><span class="token php language-php operator" style="color:#d7deea">-&gt;</span><span class="token php language-php function" style="color:#79b6f2">andReturn</span><span class="token php language-php punctuation" style="color:#8dc891">(</span><span class="token php language-php variable" style="color:#d7deea">$newerdata</span><span class="token php language-php punctuation" style="color:#8dc891">)</span><span class="token php language-php punctuation" style="color:#8dc891">;</span><span class="token php language-php"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">32</span><span class="token php language-php">        </span><span class="token php language-php variable" style="color:#d7deea">$session</span><span class="token php language-php operator" style="color:#d7deea">-&gt;</span><span class="token php language-php function" style="color:#79b6f2">shouldReceive</span><span class="token php language-php punctuation" style="color:#8dc891">(</span><span class="token php language-php string single-quoted-string" style="color:#8dc891">&#x27;put&#x27;</span><span class="token php language-php punctuation" style="color:#8dc891">)</span><span class="token php language-php operator" style="color:#d7deea">-&gt;</span><span class="token php language-php function" style="color:#79b6f2">with</span><span class="token php language-php punctuation" style="color:#8dc891">(</span><span class="token php language-php string single-quoted-string" style="color:#8dc891">&#x27;Matthewbdaly\LaravelCart\Services\Cart&#x27;</span><span class="token php language-php punctuation" style="color:#8dc891">,</span><span class="token php language-php"> </span><span class="token php language-php variable" style="color:#d7deea">$newerdata</span><span class="token php language-php punctuation" style="color:#8dc891">)</span><span class="token php language-php operator" style="color:#d7deea">-&gt;</span><span class="token php language-php function" style="color:#79b6f2">once</span><span class="token php language-php punctuation" style="color:#8dc891">(</span><span class="token php language-php punctuation" style="color:#8dc891">)</span><span class="token php language-php punctuation" style="color:#8dc891">;</span><span class="token php language-php"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">33</span><span class="token php language-php">        </span><span class="token php language-php variable" style="color:#d7deea">$this</span><span class="token php language-php operator" style="color:#d7deea">-&gt;</span><span class="token php language-php function" style="color:#79b6f2">assertEquals</span><span class="token php language-php punctuation" style="color:#8dc891">(</span><span class="token php language-php constant" style="color:#5a9bcf">null</span><span class="token php language-php punctuation" style="color:#8dc891">,</span><span class="token php language-php"> </span><span class="token php language-php variable" style="color:#d7deea">$cart</span><span class="token php language-php operator" style="color:#d7deea">-&gt;</span><span class="token php language-php function" style="color:#79b6f2">decrement</span><span class="token php language-php punctuation" style="color:#8dc891">(</span><span class="token php language-php string single-quoted-string" style="color:#8dc891">&#x27;my_row_id_2&#x27;</span><span class="token php language-php punctuation" style="color:#8dc891">)</span><span class="token php language-php punctuation" style="color:#8dc891">)</span><span class="token php language-php punctuation" style="color:#8dc891">;</span><span class="token php language-php"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">34</span><span class="token php language-php">    </span><span class="token php language-php punctuation" style="color:#8dc891">}</span><span class="token php language-php"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">35</span><span class="token php language-php"></span><span class="token php language-php punctuation" style="color:#8dc891">}</span><span class="token php language-php"></span></div></pre></div></pre><p class="py-2">If we re-run Infection, we now get a much better result:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ infection</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">You are running Infection with xdebug enabled.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">    ____      ____          __  _</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">   /  _/___  / __/__  _____/ /_</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">_</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain">___  ____</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">   / // __ </span><span class="token punctuation" style="color:#8dc891">\</span><span class="token plain">/ /_/ _ </span><span class="token punctuation" style="color:#8dc891">\</span><span class="token plain">/ ___/ __/ / __ </span><span class="token punctuation" style="color:#8dc891">\</span><span class="token plain">/ __ </span><span class="token punctuation" style="color:#8dc891">\</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain"> _/ // / / / __/  __/ /__/ /_/ / /_/ / / / /</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">/___/_/ /_/_/  </span><span class="token punctuation" style="color:#8dc891">\</span><span class="token plain">___/</span><span class="token punctuation" style="color:#8dc891">\</span><span class="token plain">___/</span><span class="token punctuation" style="color:#8dc891">\</span><span class="token plain">__/_/</span><span class="token punctuation" style="color:#8dc891">\</span><span class="token plain">____/_/ /_/</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">Running initial </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> suite</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain">PHPUnit version: </span><span class="token number" style="color:#5a9bcf">6.5</span><span class="token plain">.13</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain">   </span><span class="token number" style="color:#5a9bcf">22</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">3</span><span class="token plain"> secs</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain">Generate mutants</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token plain">Processing </span><span class="token builtin class-name" style="color:#FAC863">source</span><span class="token plain"> code files: </span><span class="token number" style="color:#5a9bcf">5</span><span class="token plain">/5</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token plain">Creating mutated files and processes: </span><span class="token number" style="color:#5a9bcf">41</span><span class="token plain">/41</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token plain">.: killed, M: escaped, S: uncovered, E: fatal error, T: timed out</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">21</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">..</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.            </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token number" style="color:#5a9bcf">41</span><span class="token plain"> / </span><span class="token number" style="color:#5a9bcf">41</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">22</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">23</span><span class="token plain"></span><span class="token number" style="color:#5a9bcf">41</span><span class="token plain"> mutations were generated:</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">24</span><span class="token plain">      </span><span class="token number" style="color:#5a9bcf">41</span><span class="token plain"> mutants were killed</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">25</span><span class="token plain">       </span><span class="token number" style="color:#5a9bcf">0</span><span class="token plain"> mutants were not covered by tests</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">26</span><span class="token plain">       </span><span class="token number" style="color:#5a9bcf">0</span><span class="token plain"> covered mutants were not detected</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">27</span><span class="token plain">       </span><span class="token number" style="color:#5a9bcf">0</span><span class="token plain"> errors were encountered</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">28</span><span class="token plain">       </span><span class="token number" style="color:#5a9bcf">0</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">time</span><span class="token plain"> outs were encountered</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">29</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">30</span><span class="token plain">Metrics:</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">31</span><span class="token plain">         Mutation Score Indicator </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">MSI</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain">: </span><span class="token number" style="color:#5a9bcf">100</span><span class="token plain">%</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">32</span><span class="token plain">         Mutation Code Coverage: </span><span class="token number" style="color:#5a9bcf">100</span><span class="token plain">%</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">33</span><span class="token plain">         Covered Code MSI: </span><span class="token number" style="color:#5a9bcf">100</span><span class="token plain">%</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">34</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">35</span><span class="token plain">Please note that some mutants will inevitably be harmless </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">i.e. </span><span class="token boolean" style="color:#ff8b50">false</span><span class="token plain"> positives</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain">.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">36</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">37</span><span class="token plain">Time: 19s. Memory: </span><span class="token number" style="color:#5a9bcf">12</span><span class="token plain">.00MB</span></div></pre></div></pre><p class="py-2">Code coverage only tells you what lines of code are actually executed - it doesn&#x27;t tell you much about how effectively that line of code is tested. Infection gives you a different insight into the quality of your tests, helping to write better ones. I&#x27;ve so far found it very useful for getting feedback on the quality of my tests. It&#x27;s interesting that PHPSpec tests seem to have a consistently lower proportion of escaped mutants than PHPUnit ones - perhaps the more natural workflow when writing specs with PHPSpec makes it easier to write good tests.</p></section><hr/><div class="py-4"><a class="p-category" href="/blog/categories/php/"><span class="inline-block px-4 py-2 my-2 mr-2 text-sm font-bold text-gray-900 bg-purple-200 rounded-full hover:bg-purple-800 hover:text-gray-200 transition-colors duration-500">php</span></a><a class="p-category" href="/blog/categories/testing/"><span class="inline-block px-4 py-2 my-2 mr-2 text-sm font-bold text-gray-900 bg-purple-200 rounded-full hover:bg-purple-800 hover:text-gray-200 transition-colors duration-500">testing</span></a></div><nav class="pt-4 clear-both box-border"><a rel="prev" class="float-left w-1/2 p-2 shadow-sm hover:bg-gray-200 dark:hover:bg-gray-800 transition duration-300 ease-in-out" href="/blog/2018/09/09/switching-from-vim-to-neovim/"><p><strong class="font-bold clear-both">← Previous page</strong></p><p class="pl-6">Switching from Vim to Neovim</p></a><a rel="next" class="float-right w-1/2 p-2 shadow-sm hover:bg-gray-200 dark:hover:bg-gray-800 transition duration-300 ease-in-out" href="/blog/2018/09/24/how-i&#x27;m-refactoring-a-zend-1-legacy-project/"><p><strong>→ Next page</strong></p><p class="pl-6">How I&#x27;m refactoring a Zend 1 legacy project</p></a></nav><div id="disqus_thread"></div></article></main></div><footer class="w-full p-4 text-gray-100 bg-gray-800"><ul class="flex flex-row flex-wrap justify-center w-full p-2 mx-auto text-center md:w-2/3 box-border"><li class="w-1/3 my-2 md:w-1/6"><a href="/posts/1">Blog</a></li><li class="w-1/3 my-2 md:w-1/6"><a href="/about">About</a></li><li class="w-1/3 my-2 md:w-1/6"><a href="/contact">Contact</a></li><li class="w-1/3 my-2 md:w-1/6"><a href="https://twitter.com/mattbd">Twitter</a></li><li class="w-1/3 my-2 md:w-1/6"><a href="https://github.com/matthewbdaly">Github</a></li><li class="w-1/3 my-2 md:w-1/6"><a href="/rss.xml">Feed</a></li></ul><div class="w-full p-4 mx-auto text-center md:w-2/3"><p>© Matthew Daly <!-- -->2022</p></div></footer></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-17043630-1', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/2018/09/13/mutation-testing-with-infection/";window.___webpackCompilationHash="1a6b15d391e08c8f153b";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-11649d7082f91630a0f4.js"],"app":["/app-1bf2f2280cf59516a82d.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-d99355bfc088afa60212.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-cd3c9aeb262d31f4738f.js"],"component---src-pages-search-tsx":["/component---src-pages-search-tsx-e93b9d2a4bf1d8518f68.js"],"component---src-templates-404-tsx":["/component---src-templates-404-tsx-dfb519f1975b2c946385.js"],"component---src-templates-archives-tsx":["/component---src-templates-archives-tsx-ad260b9de714fbd082c5.js"],"component---src-templates-categories-tsx":["/component---src-templates-categories-tsx-16c09be8d2349317ecb1.js"],"component---src-templates-category-tsx":["/component---src-templates-category-tsx-fe151db2072467694c26.js"],"component---src-templates-chunk-tsx":["/component---src-templates-chunk-tsx-0e1de4fb0a7a9892ad42.js"],"component---src-templates-page-tsx":["/component---src-templates-page-tsx-7ffb202f3f0ee82bb055.js"],"component---src-templates-post-tsx":["/component---src-templates-post-tsx-4d75edd4812735998de4.js"]};/*]]>*/</script><script src="/polyfill-11649d7082f91630a0f4.js" nomodule=""></script><script src="/app-1bf2f2280cf59516a82d.js" async=""></script><script src="/framework-a6e7e2d9b047634414ab.js" async=""></script><script src="/webpack-runtime-a32a991ce92413b0cf91.js" async=""></script></body></html>