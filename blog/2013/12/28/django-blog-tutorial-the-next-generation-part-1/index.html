<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta http-equiv="Content-Security-Policy" content="base-uri &#x27;self&#x27;; default-src &#x27;self&#x27; *.google-analytics.com disqus.com *.disqus.com *.disquscdn.com getform.io; script-src &#x27;self&#x27; localhost:* *.addthis.com *.google-analytics.com *.disquscdn.com *.disqus.com disqus.com *.addthisedge.com graph.facebook.com &#x27;unsafe-inline&#x27; &#x27;unsafe-eval&#x27;; style-src &#x27;self&#x27; fonts.googleapis.com *.addthis.com google-analytics.com *.disquscdn.com *.disqus.com &#x27;unsafe-inline&#x27;; object-src &#x27;none&#x27;; form-action &#x27;self&#x27; getform.io; font-src &#x27;self&#x27; data: fonts.google-apis.com fonts.gstatic.com; connect-src &#x27;self&#x27; ws://localhost:* *.google-analytics.com stats.g.doubleclick.net; img-src &#x27;self&#x27; *.google-analytics.com *.disquscdn.com *.disqus.com stats.g.doubleclick.net; child-src &#x27;self&#x27;; frame-src disqus.com *.addthis.com;"/><style data-href="/styles.f7f9295044ce5fc4d504.css" data-identity="gatsby-global-css">/*! tailwindcss v2.2.15 | MIT License | https://tailwindcss.com */

/*! modern-normalize v1.1.0 | MIT License | https://github.com/sindresorhus/modern-normalize */html{-webkit-text-size-adjust:100%;line-height:1.15;-moz-tab-size:4;-o-tab-size:4;tab-size:4}body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;margin:0}hr{color:inherit;height:0}abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{border-color:inherit;text-indent:0}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,select{text-transform:none}[type=button],[type=submit],button{-webkit-appearance:button}legend{padding:0}progress{vertical-align:baseline}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}button{background-color:transparent;background-image:none}fieldset,ol,ul{margin:0;padding:0}ol,ul{list-style:none}html{font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;line-height:1.5}body{font-family:inherit;line-height:inherit}*,:after,:before{border:0 solid;box-sizing:border-box}hr{border-top-width:1px}img{border-style:solid}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:#9ca3af;opacity:1}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:#9ca3af;opacity:1}input::placeholder,textarea::placeholder{color:#9ca3af;opacity:1}button{cursor:pointer}table{border-collapse:collapse}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}button,input,optgroup,select,textarea{color:inherit;line-height:inherit;padding:0}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{height:auto;max-width:100%}[hidden]{display:none}*,:after,:before{--tw-border-opacity:1;border-color:rgba(229,231,235,var(--tw-border-opacity))}.float-right{float:right}.float-left{float:left}.float-none{float:none}.clear-both{clear:both}.m-0{margin:0}.mx-0{margin-left:0;margin-right:0}.mx-auto{margin-left:auto;margin-right:auto}.my-2{margin-bottom:.5rem;margin-top:.5rem}.my-4{margin-bottom:1rem;margin-top:1rem}.my-8{margin-bottom:2rem;margin-top:2rem}.mt-2{margin-top:.5rem}.mt-8{margin-top:2rem}.mt-16{margin-top:4rem}.mr-2{margin-right:.5rem}.mr-8{margin-right:2rem}.mb-4{margin-bottom:1rem}.-mb-4{margin-bottom:-1rem}.-mb-8{margin-bottom:-2rem}.box-border{box-sizing:border-box}.block{display:block}.inline-block{display:inline-block}.flex{display:flex}.table{display:table}.hidden{display:none}.h-2{height:.5rem}.h-4{height:1rem}.min-h-screen{min-height:100vh}.w-1\/2{width:50%}.w-1\/3{width:33.333333%}.w-2\/3{width:66.666667%}.w-1\/4{width:25%}.w-3\/4{width:75%}.w-full{width:100%}.flex-grow{flex-grow:1}@-webkit-keyframes spin{to{transform:rotate(1turn)}}@keyframes spin{to{transform:rotate(1turn)}}@-webkit-keyframes ping{75%,to{opacity:0;transform:scale(2)}}@keyframes ping{75%,to{opacity:0;transform:scale(2)}}@-webkit-keyframes pulse{50%{opacity:.5}}@keyframes pulse{50%{opacity:.5}}@-webkit-keyframes bounce{0%,to{-webkit-animation-timing-function:cubic-bezier(.8,0,1,1);animation-timing-function:cubic-bezier(.8,0,1,1);transform:translateY(-25%)}50%{-webkit-animation-timing-function:cubic-bezier(0,0,.2,1);animation-timing-function:cubic-bezier(0,0,.2,1);transform:none}}@keyframes bounce{0%,to{-webkit-animation-timing-function:cubic-bezier(.8,0,1,1);animation-timing-function:cubic-bezier(.8,0,1,1);transform:translateY(-25%)}50%{-webkit-animation-timing-function:cubic-bezier(0,0,.2,1);animation-timing-function:cubic-bezier(0,0,.2,1);transform:none}}.resize-none{resize:none}.list-disc{list-style-type:disc}.flex-row{flex-direction:row}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.justify-center{justify-content:center}.space-y-8>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-bottom:calc(2rem*var(--tw-space-y-reverse));margin-top:calc(2rem*(1 - var(--tw-space-y-reverse)))}.space-y-16>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-bottom:calc(4rem*var(--tw-space-y-reverse));margin-top:calc(4rem*(1 - var(--tw-space-y-reverse)))}.space-y-32>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-bottom:calc(8rem*var(--tw-space-y-reverse));margin-top:calc(8rem*(1 - var(--tw-space-y-reverse)))}.divide-y>:not([hidden])~:not([hidden]){--tw-divide-y-reverse:0;border-bottom-width:calc(1px*var(--tw-divide-y-reverse));border-top-width:calc(1px*(1 - var(--tw-divide-y-reverse)))}.divide-gray-800>:not([hidden])~:not([hidden]){--tw-divide-opacity:1;border-color:rgba(31,41,55,var(--tw-divide-opacity))}@media (prefers-color-scheme:dark){.dark\:divide-gray-200>:not([hidden])~:not([hidden]){--tw-divide-opacity:1;border-color:rgba(229,231,235,var(--tw-divide-opacity))}}.overflow-x-auto{overflow-x:auto}.overflow-x-scroll{overflow-x:scroll}.rounded-lg{border-radius:.5rem}.rounded-full{border-radius:9999px}.rounded-t-lg{border-top-left-radius:.5rem;border-top-right-radius:.5rem}.border-2{border-width:2px}.border-b-2{border-bottom-width:2px}.border-b-4{border-bottom-width:4px}.border-l-8{border-left-width:8px}.border-transparent{border-color:transparent}.border-white{--tw-border-opacity:1;border-color:rgba(255,255,255,var(--tw-border-opacity))}.border-gray-100{--tw-border-opacity:1;border-color:rgba(243,244,246,var(--tw-border-opacity))}.border-gray-500{--tw-border-opacity:1;border-color:rgba(107,114,128,var(--tw-border-opacity))}.border-gray-800{--tw-border-opacity:1;border-color:rgba(31,41,55,var(--tw-border-opacity))}.border-green-400,.hover\:border-green-400:hover{--tw-border-opacity:1;border-color:rgba(52,211,153,var(--tw-border-opacity))}.focus\:border-blue-300:focus{--tw-border-opacity:1;border-color:rgba(147,197,253,var(--tw-border-opacity))}@media (prefers-color-scheme:dark){.dark\:border-black{--tw-border-opacity:1;border-color:rgba(0,0,0,var(--tw-border-opacity))}}.bg-white{--tw-bg-opacity:1;background-color:rgba(255,255,255,var(--tw-bg-opacity))}.bg-gray-50{--tw-bg-opacity:1;background-color:rgba(249,250,251,var(--tw-bg-opacity))}.bg-gray-100{--tw-bg-opacity:1;background-color:rgba(243,244,246,var(--tw-bg-opacity))}.bg-gray-300{--tw-bg-opacity:1;background-color:rgba(209,213,219,var(--tw-bg-opacity))}.bg-gray-800{--tw-bg-opacity:1;background-color:rgba(31,41,55,var(--tw-bg-opacity))}.bg-blue-600{--tw-bg-opacity:1;background-color:rgba(37,99,235,var(--tw-bg-opacity))}.bg-purple-200{--tw-bg-opacity:1;background-color:rgba(221,214,254,var(--tw-bg-opacity))}.hover\:bg-gray-200:hover{--tw-bg-opacity:1;background-color:rgba(229,231,235,var(--tw-bg-opacity))}.hover\:bg-purple-800:hover{--tw-bg-opacity:1;background-color:rgba(91,33,182,var(--tw-bg-opacity))}@media (prefers-color-scheme:dark){.dark\:bg-gray-700{--tw-bg-opacity:1;background-color:rgba(55,65,81,var(--tw-bg-opacity))}.dark\:bg-gray-800{--tw-bg-opacity:1;background-color:rgba(31,41,55,var(--tw-bg-opacity))}.dark\:bg-gray-900{--tw-bg-opacity:1;background-color:rgba(17,24,39,var(--tw-bg-opacity))}.dark\:hover\:bg-gray-800:hover{--tw-bg-opacity:1;background-color:rgba(31,41,55,var(--tw-bg-opacity))}}.bg-gradient-to-r{background-image:linear-gradient(to right,var(--tw-gradient-stops))}.bg-gradient-to-b{background-image:linear-gradient(to bottom,var(--tw-gradient-stops))}.from-gray-200{--tw-gradient-from:#e5e7eb;--tw-gradient-stops:var(--tw-gradient-from),var(--tw-gradient-to,rgba(229,231,235,0))}.from-green-400{--tw-gradient-from:#34d399;--tw-gradient-stops:var(--tw-gradient-from),var(--tw-gradient-to,rgba(52,211,153,0))}.via-blue-500{--tw-gradient-stops:var(--tw-gradient-from),#3b82f6,var(--tw-gradient-to,rgba(59,130,246,0))}.to-gray-300{--tw-gradient-to:#d1d5db}.to-purple-500{--tw-gradient-to:#8b5cf6}.p-2{padding:.5rem}.p-4{padding:1rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-4{padding-left:1rem;padding-right:1rem}.px-8{padding-left:2rem;padding-right:2rem}.py-2{padding-bottom:.5rem;padding-top:.5rem}.py-4{padding-bottom:1rem}.pt-4,.py-4{padding-top:1rem}.pb-16{padding-bottom:4rem}.pl-4{padding-left:1rem}.pl-6{padding-left:1.5rem}.text-center{text-align:center}.font-sans{font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji}.font-mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.text-sm{font-size:.875rem;line-height:1.25rem}.text-lg{font-size:1.125rem}.text-lg,.text-xl{line-height:1.75rem}.text-xl{font-size:1.25rem}.text-2xl{font-size:1.5rem;line-height:2rem}.text-4xl{font-size:2.25rem;line-height:2.5rem}.font-semibold{font-weight:600}.font-bold{font-weight:700}.lowercase{text-transform:lowercase}.italic{font-style:italic}.leading-6{line-height:1.5rem}.text-black{--tw-text-opacity:1;color:rgba(0,0,0,var(--tw-text-opacity))}.text-white{--tw-text-opacity:1;color:rgba(255,255,255,var(--tw-text-opacity))}.text-gray-100{--tw-text-opacity:1;color:rgba(243,244,246,var(--tw-text-opacity))}.text-gray-200{--tw-text-opacity:1;color:rgba(229,231,235,var(--tw-text-opacity))}.text-gray-800{--tw-text-opacity:1;color:rgba(31,41,55,var(--tw-text-opacity))}.text-gray-900{--tw-text-opacity:1;color:rgba(17,24,39,var(--tw-text-opacity))}.hover\:text-gray-200:hover{--tw-text-opacity:1;color:rgba(229,231,235,var(--tw-text-opacity))}@media (prefers-color-scheme:dark){.dark\:text-gray-100{--tw-text-opacity:1;color:rgba(243,244,246,var(--tw-text-opacity))}.dark\:text-gray-200{--tw-text-opacity:1;color:rgba(229,231,235,var(--tw-text-opacity))}.dark\:text-gray-300{--tw-text-opacity:1;color:rgba(209,213,219,var(--tw-text-opacity))}}.antialiased{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}*,:after,:before{--tw-shadow:0 0 #0000}.shadow-sm{--tw-shadow:0 1px 2px 0 rgba(0,0,0,0.05)}.shadow-lg,.shadow-sm{box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.shadow-lg{--tw-shadow:0 10px 15px -3px rgba(0,0,0,0.1),0 4px 6px -2px rgba(0,0,0,0.05)}.focus\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}*,:after,:before{--tw-ring-inset:var(--tw-empty,/*!*/ /*!*/);--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000}.focus\:ring:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(3px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.filter{--tw-blur:var(--tw-empty,/*!*/ /*!*/);--tw-brightness:var(--tw-empty,/*!*/ /*!*/);--tw-contrast:var(--tw-empty,/*!*/ /*!*/);--tw-grayscale:var(--tw-empty,/*!*/ /*!*/);--tw-hue-rotate:var(--tw-empty,/*!*/ /*!*/);--tw-invert:var(--tw-empty,/*!*/ /*!*/);--tw-saturate:var(--tw-empty,/*!*/ /*!*/);--tw-sepia:var(--tw-empty,/*!*/ /*!*/);--tw-drop-shadow:var(--tw-empty,/*!*/ /*!*/);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.transition{transition-duration:.15s;transition-property:background-color,border-color,color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:background-color,border-color,color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:background-color,border-color,color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1)}.transition-colors{transition-duration:.15s;transition-property:background-color,border-color,color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1)}.duration-300{transition-duration:.3s}.duration-500{transition-duration:.5s}.ease-in-out{transition-timing-function:cubic-bezier(.4,0,.2,1)}code[class*=language-],pre[class*=language-]{display:block}@media (min-width:768px){.md\:float-none{float:none}.md\:block{display:block}.md\:w-40{width:10rem}.md\:w-2\/3{width:66.666667%}.md\:w-1\/6{width:16.666667%}}@media (min-width:1024px){.lg\:float-right{float:right}.lg\:float-left{float:left}.lg\:mt-4{margin-top:1rem}.lg\:text-left{text-align:left}}.prism-code{-webkit-overflow-scrolling:touch;background-color:transparent;border-radius:.2em;float:left;font-size:1rem;margin-bottom:1rem;margin-top:1rem;overflow:initial;padding-bottom:1rem;padding-top:1rem;position:relative}.prism-code.title{border-radius:0 0 .2em .2em}pre.prism-code{float:left;min-width:100%;overflow:initial;padding:20px}.token{display:inline-block}li>code,p>code{word-wrap:break-word;background:#011627;border-radius:.2em;color:#d6deeb;padding:.2em;white-space:pre-wrap}.gatsby-highlight{-webkit-overflow-scrolling:touch;font-size:1rem;overflow:auto;position:relative}.gatsby-highlight::-webkit-scrollbar{display:none}.gatsby-highlight>code[class*=language-],.gatsby>pre[class*=language-]{-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;line-height:1.5;overflow-wrap:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-break:normal;word-spacing:normal}.gatsby-highlight .token-line{border-left:4px solid transparent;margin-left:-20px;margin-right:-20px}.line-number-style{display:inline-block;opacity:.3;padding-left:1em;padding-right:2em;position:relative;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1.2em}.gatsby-highlight .token-line.highlight-line{background-color:#023751;border-left:4px solid #029bce}.gatsby-highlight .token-line.highlight-line .line-number-style{left:0;opacity:.5;width:calc(1.2em - 4px)}</style><meta name="generator" content="Gatsby 3.14.0"/><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){if(void 0===e.target.dataset.mainImage)return;if(void 0===e.target.dataset.gatsbyImageSsr)return;const t=e.target;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link rel="search" type="application/opensearchdescription+xml" crossorigin="anonymous" href="/opensearch.xml"/><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><title data-react-helmet="true">Django blog tutorial - the next generation - part 1 | Matthew Daly</title><link data-react-helmet="true" href="https://matthewdaly.co.uk/blog/2013/12/28/django-blog-tutorial-the-next-generation-part-1/" rel="canonical"/><link data-react-helmet="true" href="https://twitter.com/mattbd" rel="me"/><link data-react-helmet="true" href="https://github.com/matthewbdaly" rel="me"/><link data-react-helmet="true" href="mailto:matthew@matthewdaly.co.uk" rel="me"/><link data-react-helmet="true" href="/key.pub" rel="pgpkey"/><link data-react-helmet="true" href="https://webmention.io/matthewdaly.co.uk/xmlrpc" rel="pingback"/><link data-react-helmet="true" href="https://webmention.io/matthewdaly.co.uk/webmention" rel="webmention"/><link data-react-helmet="true" rel="authorization_endpoint" href="https://indieauth.com/auth"/><link data-react-helmet="true" rel="token_endpoint" href="https://tokens.indieauth.com/token"/><link data-react-helmet="true" rel="openid.delegate" href="https://matthewdaly.co.uk"/><link data-react-helmet="true" rel="openid.server" href="https://openid.indieauth.com/openid"/><link data-react-helmet="true" rel="alternate" type="application/rss+xml" title="Matthew Daly - feed" href="/rss.xml"/><link data-react-helmet="true" rel="alternate" type="application/atom+xml" title="Matthew Daly - feed" href="/atom.xml"/><link data-react-helmet="true" rel="alternate" type="application/feed+json" title="Matthew Daly - feed" href="/feed.json"/><meta data-react-helmet="true" name="description" content="My series of Django tutorials for building a blogging engine are by far the most popular posts I&#x27;ve ever written on here. I&#x27;ve had a lot of people contact me with questions or just…"/><meta data-react-helmet="true" property="og:title" content="Django blog tutorial - the next generation - part 1"/><meta data-react-helmet="true" property="og:description" content="My series of Django tutorials for building a blogging engine are by far the most popular posts I&#x27;ve ever written on here. I&#x27;ve had a lot of people contact me with questions or just…"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="mattbd"/><meta data-react-helmet="true" name="twitter:title" content="Django blog tutorial - the next generation - part 1"/><meta data-react-helmet="true" name="twitter:description" content="My series of Django tutorials for building a blogging engine are by far the most popular posts I&#x27;ve ever written on here. I&#x27;ve had a lot of people contact me with questions or just…"/><link rel="sitemap" type="application/xml" href="/sitemap/sitemap-index.xml"/><link rel="icon" href="/favicon-32x32.png?v=53aa06cf17e4239d0dba6ffd09854e02" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#3b82f6"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link as="script" rel="preload" href="/webpack-runtime-f2370bab0d9de35ca289.js"/><link as="script" rel="preload" href="/framework-aeedefbd40854c93cd6e.js"/><link as="script" rel="preload" href="/app-d77411d2a9a71ac63dc7.js"/><link as="script" rel="preload" href="/f0e45107-1ab5e6e9877396d2cf44.js"/><link as="script" rel="preload" href="/751e6587c41c404721231b94fec2753859fa1aad-238a8becfca1bae1e52b.js"/><link as="script" rel="preload" href="/15a3be27178e285ff113e12c60c30466a8f4d4c5-05c94d59cdf70f961f79.js"/><link as="script" rel="preload" href="/7840d69eefded84ab93ff6e879351e9a3a16821f-3cc77dc4aa7437d407dd.js"/><link as="script" rel="preload" href="/component---src-templates-post-tsx-cc8c6bdbcd5a1c0c91b6.js"/><link as="fetch" rel="preload" href="/page-data/blog/2013/12/28/django-blog-tutorial-the-next-generation-part-1/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/290055352.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2909664151.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="flex flex-col min-h-screen pb-16 font-sans text-lg antialiased text-gray-800 bg-gray-50 dark:text-gray-100 dark:bg-gray-700 leading-6"><div class="w-full h-2 bg-gradient-to-r from-green-400 via-blue-500 to-purple-500"></div><nav class="w-full p-4 mx-auto lowercase md:w-2/3"><h1 class="block float-none py-4 text-4xl text-center lg:float-left lg:text-left"><a href="/">Matthew Daly</a></h1><ul class="py-2 text-center lg:float-right md:block lg:text-left"><li class="inline-block pr py-2 mr-8 lg:mt-4 text-sm text-gray-900 dark:text-gray-200 border-b-4 border-transparent hover:border-green-400 transition-colors duration-500"><a href="/blog/archives">Archives</a></li><li class="inline-block pr py-2 mr-8 lg:mt-4 text-sm text-gray-900 dark:text-gray-200 border-b-4 border-transparent hover:border-green-400 transition-colors duration-500"><a href="/about">About</a></li><li class="inline-block pr py-2 mr-8 lg:mt-4 text-sm text-gray-900 dark:text-gray-200 border-b-4 border-transparent hover:border-green-400 transition-colors duration-500"><a href="/uses">Uses</a></li><li class="inline-block pr py-2 mr-8 lg:mt-4 text-sm text-gray-900 dark:text-gray-200 border-b-4 border-transparent hover:border-green-400 transition-colors duration-500"><a href="/posts/1">Blog</a></li><li class="inline-block pr py-2 mr-8 lg:mt-4 text-sm text-gray-900 dark:text-gray-200 border-b-4 border-transparent hover:border-green-400 transition-colors duration-500"><a href="/blog/categories">Categories</a></li><li class="inline-block pr py-2 mr-8 lg:mt-4 text-sm text-gray-900 dark:text-gray-200 border-b-4 border-transparent hover:border-green-400 transition-colors duration-500"><a href="/search">Search</a></li></ul></nav><div class="w-full h-4 clear"></div><main class="flex-grow w-full p-4 mx-auto md:w-2/3"><article class="h-entry"><header><h2 class="py-4 text-2xl font-bold e-content p-name"><a class="u-url" href="https://matthewdaly.co.uk/blog/2013/12/28/django-blog-tutorial-the-next-generation-part-1/">Django blog tutorial - the next generation - part 1</a></h2><p class="my-4 text-lg font-semibold">Published by <a href="/" rel="author">Matthew Daly</a> at <!-- -->28th December 2013 3:00 pm</p><time class="hidden dt-published">2013-12-28T15:00:32+00:00</time></header><section><p class="py-2">My series of Django tutorials for building a blogging engine are by far the most popular posts I&#x27;ve ever written on here. I&#x27;ve had a lot of people contact me with questions or just to express their thanks, for which I&#x27;m very grateful!</p><p class="py-2">However, these tutorials haven&#x27;t really aged well. I&#x27;ve since had the opportunity to use Django in a professional capacity, which has significantly improved my understanding of the framework and the whole Python ecosystem, and there&#x27;s a lot of best practices that I didn&#x27;t follow and now wish I had. There&#x27;s also been a few gotchas that have hindered a few people in the past that I&#x27;d like to have the opportunity to correct.</p><p class="py-2">So, I&#x27;m therefore creating a brand new series of tutorials to remedy this situation. This series will cover exactly the same basic idea of using Django to build a blogging engine, but will expand on what the original series did in many ways. We will cover such additional topics as:</p><ul class="py-2 pl-4"><li class="list-disc">Using Twitter Bootstrap to make your blog look good without too much hassle</li><li class="list-disc">Using Virtualenv to sandbox your blog application</li><li class="list-disc">Using South to effectively manage changes to your database structure</li><li class="list-disc">Writing some simple unit tests</li><li class="list-disc">Deploying the finished application to Heroku</li></ul><p class="py-2">Ready? Let&#x27;s get started!</p><h2 class="py-4 text-2xl font-bold">Getting everything set up</h2><p class="py-2">Now, first of all, I&#x27;m going to assume you&#x27;re using some variant of Unix, such as Linux or Mac OS X. I&#x27;m not saying you can&#x27;t follow this tutorial with Windows, but you&#x27;ll have a harder time, because Windows just isn&#x27;t as developer-friendly as Unix in general. A modern Linux distro like Ubuntu is generally pretty easy to use, and you can easily run it in Virtualbox, so if you use Windows I would recommend you use that to make things easier.</p><p class="py-2">You should also have at least a basic grasp of the command line, such as how to create and navigate directories. You don&#x27;t have to be a wizard with it, though.</p><p class="py-2">You also need a proper programmer&#x27;s text editor. I use Vim, but I freely admit that Vim has a very steep learning curve and you may have trouble picking it up at the same time as following this tutorial. Emacs is also a very powerful text editor, and if you like it, feel free to use it. If you haven&#x27;t yet found a programmer&#x27;s text editor you like, I suggest you check out <a href="http://www.sublimetext.com/" class="border-b-2 border-green-400">Sublime Text</a>, which is easy to get started with, but also very powerful, and can be used without purchasing a license. Don&#x27;t worry too much about your text editor - it&#x27;s not vitally import that you use what I use, just find one that works for you. That said, I will say one thing - DON&#x27;T use an IDE. IDE&#x27;s hide too many details from new users and make it harder to figure out what&#x27;s going on.</p><p class="py-2">You will also need to ensure you have the following installed:</p><ul class="py-2 pl-4"><li class="list-disc">Python. I recommend installing Python 2.7, because you may have issues with Python 2.6, and Python 3 isn&#x27;t universally supported yet so you might have some issues with that</li><li class="list-disc">Virtualenv</li><li class="list-disc">Pip</li><li class="list-disc">Git</li></ul><p class="py-2">On most Linux distros, you can find packages for all of these items easily enough using your package manager. On Mac OS X, I recommend using Homebrew to install them, though if you have another package manager installed you can use that too. If you have issues with installing any of these, a quick Google search should be sufficient to resolve the issue.</p><h2 class="py-4 text-2xl font-bold">Beginning work</h2><p class="py-2">With all that done, we&#x27;re ready to get started. Create a folder in a suitable place on your file system and switch into it. I generally keep a dedicated folder in my home directory called <code>Projects</code> to use for all of my projects, and give each project a folder within it - in this case the project is called <code>django_tutorial_blog_ng</code>.</p><p class="py-2">Now, we&#x27;ll use Git to keep track of our source code. If you prefer Mercurial, feel free to use that, but this tutorial will assume use of Git, so you&#x27;ll want to adapt the commands used accordingly. Start tracking your project with the following command from the shell, when you&#x27;re in the project directory:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style"></span><span class="token plain">$ </span><span class="token function" style="color:#79b6f2">git</span><span class="token plain"> init</span></div></pre></div></pre><p class="py-2">If you haven&#x27;t used Git before, you&#x27;ll also want to <a href="http://git-scm.com/book/en/Getting-Started-First-Time-Git-Setup" class="border-b-2 border-green-400">configure it</a>.</p><p class="py-2">Next, we set up our virtualenv. Run the following command:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style"></span><span class="token plain">$ virtualenv venv --distribute</span></div></pre></div></pre><p class="py-2">Followed by:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style"></span><span class="token plain">$ </span><span class="token builtin class-name" style="color:#FAC863">source</span><span class="token plain"> venv/bin/activate</span></div></pre></div></pre><p class="py-2">Every time you come back to work on this project, you&#x27;ll need to run the previous command to make sure you&#x27;re running the version of Python installed under venv/ rather than your system Python. You can tell it&#x27;s using this because your shell prompt will be prefixed with <code>(venv)</code>.</p><p class="py-2">Why do this? Well, it means you can install whatever version of a Python module you like, without having root access, and means the Python install you&#x27;re using will only have those modules you explicitly install, rather than all of those ones available with your operating system. For instance, you could have multiple projects using different versions of Django, rather than having to update a global installation of Django and potentially break existing applications.</p><p class="py-2">Now that our virtualenv is set up, we&#x27;ll install Django, as well as several other useful Python modules. Run the following command:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style"></span><span class="token plain">$ pip </span><span class="token function" style="color:#79b6f2">install</span><span class="token plain"> django-toolbelt South</span></div></pre></div></pre><p class="py-2">A little explanation is called for here. The package <code>django-toolbelt</code> includes a number of packages we&#x27;ll be using, including Django, as well as Gunicorn (a simple web server we&#x27;ll use when the time comes to deploy the app to Heroku). South is a migration tool that is commonly used with Django - basically, if you make changes to existing models, Django doesn&#x27;t natively have the capacity to apply those changes (yet - native migrations are planned at some point in the future), so South can be used to apply those changes for you without having to either manually change the database structure or dump the database and rebuild it.</p><p class="py-2">Please note that one of the packages, <code>psycopg2</code>, may fail if you don&#x27;t have PostgreSQL installed, but don&#x27;t worry about installing it. We&#x27;ll be using SQLite for developing the application locally, and we&#x27;ll be deploying the finished product to Heroku, which does have it installed.</p><p class="py-2">Once the installation is complete, run the following command to record the new modules installed:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style"></span><span class="token plain">$ pip freeze </span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"> requirements.txt</span></div></pre></div></pre><p class="py-2">The file <code>requirements.txt</code> will be created, which stores the packages and versions you have installed so that they can be easily recreated. If you had issues installing <code>psycopg2</code>, then here&#x27;s what your <code>requirements.txt</code> should look like - feel free to edit it manually to look like this, as when we deploy it to Heroku, it will need to be correct to ensure that our application can be deployed successfully:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token assign-left variable" style="color:#d7deea">Django</span><span class="token operator" style="color:#d7deea">==</span><span class="token number" style="color:#5a9bcf">1.6</span><span class="token plain">.1</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain"></span><span class="token assign-left variable" style="color:#d7deea">South</span><span class="token operator" style="color:#d7deea">==</span><span class="token number" style="color:#5a9bcf">0.8</span><span class="token plain">.4</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">dj-database-url</span><span class="token operator" style="color:#d7deea">==</span><span class="token number" style="color:#5a9bcf">0.2</span><span class="token plain">.2</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">dj-static</span><span class="token operator" style="color:#d7deea">==</span><span class="token number" style="color:#5a9bcf">0.0</span><span class="token plain">.5</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">django-toolbelt</span><span class="token operator" style="color:#d7deea">==</span><span class="token number" style="color:#5a9bcf">0.0</span><span class="token plain">.1</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain"></span><span class="token assign-left variable" style="color:#d7deea">gunicorn</span><span class="token operator" style="color:#d7deea">==</span><span class="token number" style="color:#5a9bcf">18.0</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain"></span><span class="token assign-left variable" style="color:#d7deea">psycopg2</span><span class="token operator" style="color:#d7deea">==</span><span class="token number" style="color:#5a9bcf">2.5</span><span class="token plain">.1</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain"></span><span class="token assign-left variable" style="color:#d7deea">static</span><span class="token operator" style="color:#d7deea">==</span><span class="token number" style="color:#5a9bcf">0.4</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain"></span><span class="token assign-left variable" style="color:#d7deea">wsgiref</span><span class="token operator" style="color:#d7deea">==</span><span class="token number" style="color:#5a9bcf">0.1</span><span class="token plain">.2</span></div></pre></div></pre><p class="py-2">Next, we&#x27;ll commit these changes with Git:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ </span><span class="token function" style="color:#79b6f2">git</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">add</span><span class="token plain"> requirements.txt</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">$ </span><span class="token function" style="color:#79b6f2">git</span><span class="token plain"> commit -m </span><span class="token string" style="color:#8dc891">&#x27;Committed requirements&#x27;</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Next we&#x27;ll add a <code>.gitignore</code> file to ignore our virtualenv - we want to keep this out of version control because it&#x27;s something specific to that install. We have all we need to recreate it so we don&#x27;t want to store it. In addition, we also want to ignore any compiled Python files (identifiable by the .pyc suffix):</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">venv/</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">*.pyc</span></div></pre></div></pre><p class="py-2">Let&#x27;s commit that too:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ </span><span class="token function" style="color:#79b6f2">git</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">add</span><span class="token plain"> .gitignore</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">$ </span><span class="token function" style="color:#79b6f2">git</span><span class="token plain"> commit -m </span><span class="token string" style="color:#8dc891">&#x27;Added a gitignore file&#x27;</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Now, let&#x27;s generate our project&#x27;s basic skeleton:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style"></span><span class="token plain">$ django-admin.py startproject django_tutorial_blog_ng </span><span class="token builtin class-name" style="color:#FAC863">.</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">This application skeleton includes a basic configuration which will be sufficient for now, but you will also want to add the SQLite database file to your <code>.gitignore</code>:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">env/</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">*.pyc</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">db.sqlite3</span></div></pre></div></pre><p class="py-2">Let&#x27;s commit what we&#x27;ve done:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ </span><span class="token function" style="color:#79b6f2">git</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">add</span><span class="token plain"> .gitignore django_tutorial_blog_ng/ manage.py</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">$ </span><span class="token function" style="color:#79b6f2">git</span><span class="token plain"> commit -m </span><span class="token string" style="color:#8dc891">&#x27;Created project skeleton&#x27;</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Now, before we create our database, we need to ensure we are using South. Go into <code>django_tutorial_blog_ng/settings.py</code> and find <code>INSTALLED_APPS</code>. Edit it to look like this:</p><pre><div class="gatsby-highlight" data-language="python"><pre class="prism-code language-python" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">INSTALLED_APPS </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">    </span><span class="token string" style="color:#8dc891">&#x27;django.contrib.admin&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">    </span><span class="token string" style="color:#8dc891">&#x27;django.contrib.auth&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">    </span><span class="token string" style="color:#8dc891">&#x27;django.contrib.contenttypes&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">    </span><span class="token string" style="color:#8dc891">&#x27;django.contrib.sessions&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">    </span><span class="token string" style="color:#8dc891">&#x27;django.contrib.messages&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">    </span><span class="token string" style="color:#8dc891">&#x27;django.contrib.staticfiles&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain">    </span><span class="token string" style="color:#8dc891">&#x27;south&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Now, you can create your database. Run the following command:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style"></span><span class="token plain">$ python manage.py syncdb</span></div></pre></div></pre><p class="py-2">You&#x27;ll be prompted to create a superuser - go ahead and fill in the details. Now, run the following command:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style"></span><span class="token plain">$ python manage.py runserver</span></div></pre></div></pre><p class="py-2">This will run Django&#x27;s built-in web server on port 8000, and if you click <a href="http://127.0.0.1:8000" class="border-b-2 border-green-400">here</a>, you should see a page congratulating you on your first Django-powered page. Once you&#x27;re finished with it, you can stop the web server with <kbd>Ctrl-C</kbd>.</p><p class="py-2">Don&#x27;t forget to commit your changes:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ </span><span class="token function" style="color:#79b6f2">git</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">add</span><span class="token plain"> django_tutorial_blog_ng/settings.py</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">$ </span><span class="token function" style="color:#79b6f2">git</span><span class="token plain"> commit -m </span><span class="token string" style="color:#8dc891">&#x27;Added South to installed apps&#x27;</span><span class="token plain"></span></div></pre></div></pre><h2 class="py-4 text-2xl font-bold">Your first app</h2><p class="py-2">Django distinguishes between the concepts of <strong>projects</strong> and <strong>apps</strong>. A project is a specific project that may consist of one or more apps, such as a web app, whereas an app is a set of functionality within a project. For instance, one website might include some flat pages, an admin interface, and a blogging engine, and these could easily be different apps. By encouraging you to separate different types of functionality into different apps, Django makes it easier for you to reuse existing content elsewhere.</p><p class="py-2">We&#x27;re going to create our first app, which is the blogging engine. Run the following command to create a basic skeleton for this app:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style"></span><span class="token plain">$ python manage.py startapp blogengine</span></div></pre></div></pre><p class="py-2">Next, we need to amend our settings to install this app:</p><pre><div class="gatsby-highlight" data-language="python"><pre class="prism-code language-python" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">INSTALLED_APPS </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">    </span><span class="token string" style="color:#8dc891">&#x27;django.contrib.admin&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">    </span><span class="token string" style="color:#8dc891">&#x27;django.contrib.auth&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">    </span><span class="token string" style="color:#8dc891">&#x27;django.contrib.contenttypes&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">    </span><span class="token string" style="color:#8dc891">&#x27;django.contrib.sessions&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">    </span><span class="token string" style="color:#8dc891">&#x27;django.contrib.messages&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">    </span><span class="token string" style="color:#8dc891">&#x27;django.contrib.staticfiles&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain">    </span><span class="token string" style="color:#8dc891">&#x27;south&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">    </span><span class="token string" style="color:#8dc891">&#x27;blogengine&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Now, before we can use this app, we want to let South know about it so that changes to your database structure will be managed right from the start by South. Run the following command to create your initial migration:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style"></span><span class="token plain">$ python manage.py schemamigration --initial blogengine</span></div></pre></div></pre><p class="py-2">That creates the file for your first migration,but doesn&#x27;t run it. To migrate your database structure to the latest version, run the following:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style"></span><span class="token plain">$ python manage.py migrate</span></div></pre></div></pre><p class="py-2">This won&#x27;t actually make any changes, but it will ensure that all future changes to your models for the <code>blogengine</code> app are handled by South. Let&#x27;s commit our app skeleton:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ </span><span class="token function" style="color:#79b6f2">git</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">add</span><span class="token plain"> django_tutorial_blog_ng/settings.py blogengine/</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">$ </span><span class="token function" style="color:#79b6f2">git</span><span class="token plain"> commit -m </span><span class="token string" style="color:#8dc891">&#x27;Added blogengine app skeleton&#x27;</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">So, we now have our first app set up, but it doesn&#x27;t do anything much.</p><p class="py-2">Remember that I mentioned how Django differentiates between projects and apps? Well, Django actually ships with a number of useful apps, and one of those is the admin interface. I consider the Django admin to be one of the framework&#x27;s killer features because it&#x27;s easy to use and customise, and saves you a lot of grief.</p><p class="py-2">In the past, the admin interface needed a little work to get it working, but in Django 1.6 it&#x27;s configured to work out of the box, so if you click <a href="http://127.0.0.1:8000/admin/" class="border-b-2 border-green-400">here</a>, you should see the login screen for it. You should be able to sign in using the username and password you set when you ran <code>syncdb</code>.</p><p class="py-2">Next, we&#x27;ll set up our first model.</p><h2 class="py-4 text-2xl font-bold">An introduction to MVC</h2><p class="py-2">MVC is a common pattern used in web development. Many web development frameworks can be loosely described as MVC, including Django, Rails, CodeIgniter, Laravel and Symfony, as well as some client-side frameworks like Backbone.js. The basic concept is that a web app is divided into three basic components:</p><ul class="py-2 pl-4"><li class="list-disc"><strong>Models</strong> - the data managed with the application</li><li class="list-disc"><strong>Views</strong> - the presentation of the data</li><li class="list-disc"><strong>Controllers</strong> - an intermediary between the models and the views</li></ul><p class="py-2">Now, Django&#x27;s interpretation of MVC is slightly different to many other frameworks. While in most frameworks the views are HTML templates for rendering the data, in Django this role is taken by the templates, and the views are functions or objects that render data from the models using a template. Effectively, you can think of Django&#x27;s views as being like controllers in other frameworks, and Django templates as being views.</p><p class="py-2">In Django, you create your models as Python classes that represent your data, and you use the Django ORM to query the database. As a result, it&#x27;s rare to have to directly query your database using SQL, making it more portable between different databases.</p><p class="py-2">Now, our first model is going to be of a blog post. At least initially, each post will have the following attributes:</p><ul class="py-2 pl-4"><li class="list-disc">A title</li><li class="list-disc">A publication date and time</li><li class="list-disc">Some text</li></ul><p class="py-2">Now, we could just jump straight into creating our first model, but we&#x27;re going to make a point of following the practices of test-driven development here. The basic concept of TDD is that you write a failing test before writing any code, then you write the code to pass that test afterwards. It does make things a bit slower, but it&#x27;s all too easy to neglect writing tests at all if you leave it till later.</p><p class="py-2">If you take a look in the <code>blogengine</code> folder you&#x27;ll notice there&#x27;s a file called <code>tests.py</code>. Open it up and you should see the following:</p><pre><div class="gatsby-highlight" data-language="python"><pre class="prism-code language-python" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">test </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> TestCase</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain"></span><span class="token comment" style="color:#999999"># Create your tests here.</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">It&#x27;s worth taking a little time to plan out what we want to test from our post model. Each post object will have the attributes I mentioned above, and what we want to be able to do is test that we can:</p><ul class="py-2 pl-4"><li class="list-disc">Set the title</li><li class="list-disc">Set the publication date and time</li><li class="list-disc">Set the text</li><li class="list-disc">Save it successfully</li><li class="list-disc">Retrieve it successfully</li></ul><p class="py-2">So, let&#x27;s create a test for our post model. We&#x27;ll go through the relevant sections of the test bit by bit:</p><pre><div class="gatsby-highlight" data-language="python"><pre class="prism-code language-python" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">test </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> TestCase</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">utils </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> timezone</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> blogengine</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">models </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> Post</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain" style="display:inline-block">
</span></div></pre></div></pre><p class="py-2">Here we&#x27;re importing the required functionality. <code>TestCase</code> is provided by Django, and is an object all of your tests should inherit from. <code>timezone</code> is a utility for handling dates and times correctly. Finally, <code>Post</code> is our model, which we have yet to implement.</p><pre><div class="gatsby-highlight" data-language="python"><pre class="prism-code language-python" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token comment" style="color:#999999"># Create your tests here.</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">PostTest</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">TestCase</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">def</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">test_create_post</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Create the post</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">        post </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> Post</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Here we create the PostTest class, which represents a test for your <code>Post</code> model. So far it only has one method, but you can add additional ones if required.</p><pre><div class="gatsby-highlight" data-language="python"><pre class="prism-code language-python" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Set the attributes</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">        post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">title </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;My first post&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">        post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">text </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;This is my first blog post&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">        post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">pub_date </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> timezone</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">now</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Here we set the post&#x27;s attributes.</p><pre><div class="gatsby-highlight" data-language="python"><pre class="prism-code language-python" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Save it</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">        post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">save</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Now we save it. At this point it has been added to the database, and the rest of the test involves us ensuring it has been saved correctly and can be retrieved.</p><pre><div class="gatsby-highlight" data-language="python"><pre class="prism-code language-python" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check we can find it</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">        all_posts </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> Post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">objects</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token builtin" style="color:#D8DEE9">all</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEquals</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token builtin" style="color:#D8DEE9">len</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">all_posts</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">1</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">        only_post </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> all_posts</span><span class="token punctuation" style="color:#8dc891">[</span><span class="token number" style="color:#5a9bcf">0</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEquals</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">only_post</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> post</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Here we use the Django database API to fetch all of the Post objects, assert that there is only 1 post object, retrieve that post object, and assert that it is the same object as the post object we just saved.</p><p class="py-2">If unit testing is new to you, assertions may be new to you. Essentially you&#x27;re saying to the Python interpreter, &quot;I assert that X is true, so please raise an error if this is not true&quot;. Here we assert that the length of the variable <code>all_posts</code> is 1, and that that post is the same object as the previously saved object, so that the test will fail if that is not the case.</p><pre><div class="gatsby-highlight" data-language="python"><pre class="prism-code language-python" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check attributes</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEquals</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">only_post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">title</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;My first post&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEquals</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">only_post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">text</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;This is my first blog post&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEquals</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">only_post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">pub_date</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">day</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">pub_date</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">day</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEquals</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">only_post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">pub_date</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">month</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">pub_date</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">month</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEquals</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">only_post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">pub_date</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">year</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">pub_date</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">year</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEquals</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">only_post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">pub_date</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">hour</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">pub_date</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">hour</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEquals</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">only_post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">pub_date</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">minute</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">pub_date</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">minute</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEquals</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">only_post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">pub_date</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">second</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">pub_date</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">second</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Finally, we assert that the values of each of the post&#x27;s attributes as stored in the database match up with those in the post object we set. For the <code>title</code> and <code>text</code> fields, these are easy to validate as we can just check the values against those we set. For the <code>pub_date</code> field, things are a bit more complex, since this will be an object in its own right, so you need to check the day, month, year, hour, minute and second attributes separately.</p><p class="py-2">The whole thing should look like this:</p><pre><div class="gatsby-highlight" data-language="python"><pre class="prism-code language-python" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">test </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> TestCase</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">utils </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> timezone</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> blogengine</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">models </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> Post</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain"></span><span class="token comment" style="color:#999999"># Create your tests here.</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">PostTest</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">TestCase</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">def</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">test_create_post</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Create the post</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">        post </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> Post</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Set the attributes</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain">        post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">title </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;My first post&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain">        post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">text </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;This is my first blog post&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain">        post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">pub_date </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> timezone</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">now</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Save it</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token plain">        post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">save</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check we can find it</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token plain">        all_posts </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> Post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">objects</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token builtin" style="color:#D8DEE9">all</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">21</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEquals</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token builtin" style="color:#D8DEE9">len</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">all_posts</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">1</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">22</span><span class="token plain">        only_post </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> all_posts</span><span class="token punctuation" style="color:#8dc891">[</span><span class="token number" style="color:#5a9bcf">0</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">23</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEquals</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">only_post</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> post</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">24</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">25</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check attributes</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">26</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEquals</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">only_post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">title</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;My first post&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">27</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEquals</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">only_post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">text</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;This is my first blog post&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">28</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEquals</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">only_post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">pub_date</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">day</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">pub_date</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">day</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">29</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEquals</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">only_post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">pub_date</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">month</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">pub_date</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">month</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">30</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEquals</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">only_post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">pub_date</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">year</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">pub_date</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">year</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">31</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEquals</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">only_post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">pub_date</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">hour</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">pub_date</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">hour</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">32</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEquals</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">only_post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">pub_date</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">minute</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">pub_date</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">minute</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">33</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEquals</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">only_post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">pub_date</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">second</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">pub_date</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">second</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">With that in place, the time has come to run our test with the following command:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style"></span><span class="token plain">$ python manage.py </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">You should see something like this:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">venv</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain">Smith:django_tutorial_blog_ng matthewdaly$ python manage.py </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">Creating </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> database </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> </span><span class="token builtin class-name" style="color:#FAC863">alias</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;default&#x27;</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">E</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain"></span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">ERROR: blogengine.tests </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">unittest.loader.ModuleImportFailure</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">----------------------------------------------------------------------</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">ImportError: Failed to </span><span class="token function" style="color:#79b6f2">import</span><span class="token plain"> </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> module: blogengine.tests</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain">Traceback </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">most recent call last</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain">:</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">  File </span><span class="token string" style="color:#8dc891">&quot;/usr/local/Cellar/python/2.7.6/Frameworks/Python.framework/Versions/2.7/lib/python2.7/unittest/loader.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:#5a9bcf">254</span><span class="token plain">, </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> _find_tests</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain">    module </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> self._get_module_from_name</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">name</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain">  File </span><span class="token string" style="color:#8dc891">&quot;/usr/local/Cellar/python/2.7.6/Frameworks/Python.framework/Versions/2.7/lib/python2.7/unittest/loader.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:#5a9bcf">232</span><span class="token plain">, </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> _get_module_from_name</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain">    __import__</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">name</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain">  File </span><span class="token string" style="color:#8dc891">&quot;/Users/matthewdaly/Projects/django_tutorial_blog_ng/blogengine/tests.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:#5a9bcf">3</span><span class="token plain">, </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">module</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain">    from blogengine.models </span><span class="token function" style="color:#79b6f2">import</span><span class="token plain"> Post</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain">ImportError: cannot </span><span class="token function" style="color:#79b6f2">import</span><span class="token plain"> name Post</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token plain">----------------------------------------------------------------------</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token plain">Ran </span><span class="token number" style="color:#5a9bcf">1</span><span class="token plain"> </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">0</span><span class="token plain">.000s</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">21</span><span class="token plain">FAILED </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">errors</span><span class="token operator" style="color:#d7deea">=</span><span class="token number" style="color:#5a9bcf">1</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">22</span><span class="token plain">Destroying </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> database </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> </span><span class="token builtin class-name" style="color:#FAC863">alias</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;default&#x27;</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div></pre></div></pre><p class="py-2">Don&#x27;t worry about the error - this is exactly what we expect to see because we haven&#x27;t implemented our Post model yet. Now that we have a failing test in place, we can implement our model to make the test pass. Open up <code>blogengine/models.py</code> and enter the following:</p><pre><div class="gatsby-highlight" data-language="python"><pre class="prism-code language-python" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">db </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> models</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain"></span><span class="token comment" style="color:#999999"># Create your models here.</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">Post</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">models</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">Model</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">    title </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> models</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">CharField</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">max_length</span><span class="token operator" style="color:#d7deea">=</span><span class="token number" style="color:#5a9bcf">200</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">    pub_date </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> models</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">DateTimeField</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">    text </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> models</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">TextField</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Save the file and run the test again:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">venv</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain">Smith:django_tutorial_blog_ng matthewdaly$ python manage.py </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">Creating </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> database </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> </span><span class="token builtin class-name" style="color:#FAC863">alias</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;default&#x27;</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">E</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain"></span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">ERROR: test_create_post </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">blogengine.tests.PostTest</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">----------------------------------------------------------------------</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">Traceback </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">most recent call last</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain">:</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain">  File </span><span class="token string" style="color:#8dc891">&quot;/Users/matthewdaly/Projects/django_tutorial_blog_ng/blogengine/tests.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:#5a9bcf">17</span><span class="token plain">, </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> test_create_post</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">    post.save</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain">  File </span><span class="token string" style="color:#8dc891">&quot;/Users/matthewdaly/Projects/django_tutorial_blog_ng/venv/lib/python2.7/site-packages/django/db/models/base.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:#5a9bcf">545</span><span class="token plain">, </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> save</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain">    </span><span class="token assign-left variable" style="color:#d7deea">force_update</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">force_update, </span><span class="token assign-left variable" style="color:#d7deea">update_fields</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">update_fields</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain">  File </span><span class="token string" style="color:#8dc891">&quot;/Users/matthewdaly/Projects/django_tutorial_blog_ng/venv/lib/python2.7/site-packages/django/db/models/base.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:#5a9bcf">573</span><span class="token plain">, </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> save_base</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain">    updated </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> self._save_table</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">raw, cls, force_insert, force_update, using, update_fields</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain">  File </span><span class="token string" style="color:#8dc891">&quot;/Users/matthewdaly/Projects/django_tutorial_blog_ng/venv/lib/python2.7/site-packages/django/db/models/base.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:#5a9bcf">654</span><span class="token plain">, </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> _save_table</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain">    result </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> self._do_insert</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">cls._base_manager, using, fields, update_pk, raw</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token plain">  File </span><span class="token string" style="color:#8dc891">&quot;/Users/matthewdaly/Projects/django_tutorial_blog_ng/venv/lib/python2.7/site-packages/django/db/models/base.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:#5a9bcf">687</span><span class="token plain">, </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> _do_insert</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token plain">    </span><span class="token assign-left variable" style="color:#d7deea">using</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">using, </span><span class="token assign-left variable" style="color:#d7deea">raw</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">raw</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token plain">  File </span><span class="token string" style="color:#8dc891">&quot;/Users/matthewdaly/Projects/django_tutorial_blog_ng/venv/lib/python2.7/site-packages/django/db/models/manager.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:#5a9bcf">232</span><span class="token plain">, </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> _insert</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token plain">    </span><span class="token builtin class-name" style="color:#FAC863">return</span><span class="token plain"> insert_query</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">self.model, objs, fields, **kwargs</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token plain">  File </span><span class="token string" style="color:#8dc891">&quot;/Users/matthewdaly/Projects/django_tutorial_blog_ng/venv/lib/python2.7/site-packages/django/db/models/query.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:#5a9bcf">1511</span><span class="token plain">, </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> insert_query</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">21</span><span class="token plain">    </span><span class="token builtin class-name" style="color:#FAC863">return</span><span class="token plain"> query.get_compiler</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">using</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">using</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain">.execute_sql</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">return_id</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">22</span><span class="token plain">  File </span><span class="token string" style="color:#8dc891">&quot;/Users/matthewdaly/Projects/django_tutorial_blog_ng/venv/lib/python2.7/site-packages/django/db/models/sql/compiler.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:#5a9bcf">898</span><span class="token plain">, </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> execute_sql</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">23</span><span class="token plain">    cursor.execute</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">sql, params</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">24</span><span class="token plain">  File </span><span class="token string" style="color:#8dc891">&quot;/Users/matthewdaly/Projects/django_tutorial_blog_ng/venv/lib/python2.7/site-packages/django/db/backends/util.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:#5a9bcf">53</span><span class="token plain">, </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> execute</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">25</span><span class="token plain">    </span><span class="token builtin class-name" style="color:#FAC863">return</span><span class="token plain"> self.cursor.execute</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">sql, params</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">26</span><span class="token plain">  File </span><span class="token string" style="color:#8dc891">&quot;/Users/matthewdaly/Projects/django_tutorial_blog_ng/venv/lib/python2.7/site-packages/django/db/utils.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:#5a9bcf">99</span><span class="token plain">, </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> __exit__</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">27</span><span class="token plain">    six.reraise</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">dj_exc_type, dj_exc_value, traceback</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">28</span><span class="token plain">  File </span><span class="token string" style="color:#8dc891">&quot;/Users/matthewdaly/Projects/django_tutorial_blog_ng/venv/lib/python2.7/site-packages/django/db/backends/util.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:#5a9bcf">53</span><span class="token plain">, </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> execute</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">29</span><span class="token plain">    </span><span class="token builtin class-name" style="color:#FAC863">return</span><span class="token plain"> self.cursor.execute</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">sql, params</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">30</span><span class="token plain">  File </span><span class="token string" style="color:#8dc891">&quot;/Users/matthewdaly/Projects/django_tutorial_blog_ng/venv/lib/python2.7/site-packages/django/db/backends/sqlite3/base.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:#5a9bcf">450</span><span class="token plain">, </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> execute</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">31</span><span class="token plain">    </span><span class="token builtin class-name" style="color:#FAC863">return</span><span class="token plain"> Database.Cursor.execute</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">self, query, params</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">32</span><span class="token plain">OperationalError: no such table: blogengine_post</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">33</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">34</span><span class="token plain">----------------------------------------------------------------------</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">35</span><span class="token plain">Ran </span><span class="token number" style="color:#5a9bcf">1</span><span class="token plain"> </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">0</span><span class="token plain">.059s</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">36</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">37</span><span class="token plain">FAILED </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">errors</span><span class="token operator" style="color:#d7deea">=</span><span class="token number" style="color:#5a9bcf">1</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">38</span><span class="token plain">Destroying </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> database </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> </span><span class="token builtin class-name" style="color:#FAC863">alias</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;default&#x27;</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div></pre></div></pre><p class="py-2">Our test still fails, but if we take a look at this error message, we can see why - there is no database table for the posts (called <code>blogengine_post</code>). Using South, we can easily remedy that by creating a new migration to create this table:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style"></span><span class="token plain">$ python manage.py schemamigration --auto blogengine</span></div></pre></div></pre><p class="py-2">That creates the new migration. Now let&#x27;s run it:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style"></span><span class="token plain">$ python manage.py migrate</span></div></pre></div></pre><p class="py-2">Now, let&#x27;s run our tests to check it&#x27;s working as expected:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">venv</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain">Smith:django_tutorial_blog_ng matthewdaly$ python manage.py </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">Creating </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> database </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> </span><span class="token builtin class-name" style="color:#FAC863">alias</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;default&#x27;</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain"></span><span class="token builtin class-name" style="color:#FAC863">.</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">----------------------------------------------------------------------</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">Ran </span><span class="token number" style="color:#5a9bcf">1</span><span class="token plain"> </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">0</span><span class="token plain">.001s</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">OK</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain">Destroying </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> database </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> </span><span class="token builtin class-name" style="color:#FAC863">alias</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;default&#x27;</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div></pre></div></pre><p class="py-2">Success! We now have a model in place that passes our test. Let&#x27;s commit our changes:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ </span><span class="token function" style="color:#79b6f2">git</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">add</span><span class="token plain"> blogengine/</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">$ </span><span class="token function" style="color:#79b6f2">git</span><span class="token plain"> commit -m </span><span class="token string" style="color:#8dc891">&#x27;Added post model with passing test&#x27;</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Now, Django&#x27;s ORM is basically a layer on top of SQL that abstracts away differences between different relational databases, but the underlying queries are still being run. You can view the SQL created to generate the table by using the <code>sqlall</code> command. Just run <code>python manage.py sqlall blogengine</code> and you should see something like this:</p><pre><div class="gatsby-highlight" data-language="sql"><pre class="prism-code language-sql" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token keyword" style="color:#c5a5c5">BEGIN</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">TABLE</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;blogengine_post&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">    </span><span class="token string" style="color:#8dc891">&quot;id&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">integer</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#ff8b50">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">PRIMARY</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">KEY</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">    </span><span class="token string" style="color:#8dc891">&quot;title&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">varchar</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token number" style="color:#5a9bcf">200</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#ff8b50">NULL</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">    </span><span class="token string" style="color:#8dc891">&quot;pub_date&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">datetime</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#ff8b50">NULL</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">    </span><span class="token string" style="color:#8dc891">&quot;text&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">text</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#ff8b50">NULL</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">COMMIT</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Note the addition of the <code>id</code> field as the primary key. If you&#x27;re at all familiar with relational databases, you&#x27;ll know that every table must have one field, called a primary key, that is a unique reference to that row. This can be overridden, but here it&#x27;s exactly the behaviour we want.</p><h2 class="py-4 text-2xl font-bold">Creating blog posts via the admin</h2><p class="py-2">Now, we need a way to be able to create, edit and delete blog posts. Django&#x27;s admin interface allows us to do so easily. However, before we do so, we want to create automated acceptance tests for this functionality, in order to test the ability to create posts from an end-user&#x27;s perspective. While unit tests are for testing sections of an application&#x27;s functionality from the perspective of other sections of the application, acceptance tests are testing from the user&#x27;s perspective. In other words, they test what the application needs to do to be acceptable.</p><p class="py-2">First, we will test logging into the admin. Open up <code>blogengine/tests.py</code> and amend it as follows:</p><pre><div class="gatsby-highlight" data-language="python"><pre class="prism-code language-python" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">test </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> TestCase</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> LiveServerTestCase</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> Client</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">utils </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> timezone</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> blogengine</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">models </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> Post</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain"></span><span class="token comment" style="color:#999999"># Create your tests here.</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">PostTest</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">TestCase</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">def</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">test_create_post</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Create the post</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">        post </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> Post</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Set the attributes</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain">        post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">title </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;My first post&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain">        post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">text </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;This is my first blog post&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain">        post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">pub_date </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> timezone</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">now</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Save it</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token plain">        post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">save</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check we can find it</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token plain">        all_posts </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> Post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">objects</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token builtin" style="color:#D8DEE9">all</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">21</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEquals</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token builtin" style="color:#D8DEE9">len</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">all_posts</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">1</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">22</span><span class="token plain">        only_post </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> all_posts</span><span class="token punctuation" style="color:#8dc891">[</span><span class="token number" style="color:#5a9bcf">0</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">23</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEquals</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">only_post</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> post</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">24</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">25</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check attributes</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">26</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEquals</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">only_post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">title</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;My first post&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">27</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEquals</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">only_post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">text</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;This is my first blog post&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">28</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEquals</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">only_post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">pub_date</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">day</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">pub_date</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">day</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">29</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEquals</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">only_post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">pub_date</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">month</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">pub_date</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">month</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">30</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEquals</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">only_post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">pub_date</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">year</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">pub_date</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">year</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">31</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEquals</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">only_post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">pub_date</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">hour</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">pub_date</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">hour</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">32</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEquals</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">only_post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">pub_date</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">minute</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">pub_date</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">minute</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">33</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEquals</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">only_post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">pub_date</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">second</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">pub_date</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">second</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">34</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">35</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">AdminTest</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">LiveServerTestCase</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">36</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">def</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">test_login</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">37</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Create client</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">38</span><span class="token plain">        c </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> Client</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">39</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">40</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Get login page</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">41</span><span class="token plain">        response </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> c</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">get</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;/admin/&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">42</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">43</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check response code</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">44</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEquals</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">response</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">status_code</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">200</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">First of all, we import two new objects from <code>django.test</code>, <code>LiveServerTestCase</code> and <code>Client</code>. Then we create the first part of our first test for the admin, named <code>AdminTest</code>. Eventually, this will test that we can log successfully into the admin interface. For now, we&#x27;re just doing the following:</p><ul class="py-2 pl-4"><li class="list-disc">Creating a Client object</li><li class="list-disc">Fetching the <code>/admin/</code> route</li><li class="list-disc">Asserting that the status code for this HTTP request is 200, (in other words, that the page was fetched successfully).</li></ul><p class="py-2">If you run <code>python manage.py test</code>, you should see that both tests pass successfully. Now we&#x27;ll extend <code>AdminTest</code> - we&#x27;ll verify that the response contains the string &#x27;Log in&#x27;, which in the Django admin interface, appears on the login page:</p><pre><div class="gatsby-highlight" data-language="python"><pre class="prism-code language-python" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">AdminTest</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">LiveServerTestCase</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">def</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">test_login</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Create client</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">        c </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> Client</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Get login page</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">        response </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> c</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">get</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;/admin/&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check response code</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEquals</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">response</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">status_code</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">200</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check &#x27;Log in&#x27; in response</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertTrue</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;Log in&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> response</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">content</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Here <code>response.content</code> is a string containing the content of the HTTP response - we&#x27;re asserting that the substring &#x27;Log in&#x27; appears in there. If you run <code>python manage.py test</code> again, it should pass.</p><p class="py-2">Now, we need to actually log in. This could be fiddly, but Django has a handy convenience method to log you in when testing:</p><pre><div class="gatsby-highlight" data-language="python"><pre class="prism-code language-python" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">AdminTest</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">LiveServerTestCase</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">def</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">test_login</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Create client</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">        c </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> Client</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Get login page</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">        response </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> c</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">get</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;/admin/&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check response code</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEquals</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">response</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">status_code</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">200</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check &#x27;Log in&#x27; in response</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertTrue</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;Log in&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> response</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">content</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Log the user in</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token plain">        c</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">login</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">username</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&#x27;bobsmith&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> password</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&quot;password&quot;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check response code</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token plain">        response </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> c</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">get</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;/admin/&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEquals</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">response</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">status_code</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">200</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">21</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">22</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check &#x27;Log out&#x27; in response</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">23</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertTrue</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;Log out&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> response</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">content</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Here, we use the <code>login</code> method of the <code>Client</code> object to log into the admin interface, and then we fetch the <code>/admin/</code> route again. We assert that we get a 200 status code, and we assert that the response contains the string &#x27;Log out&#x27; - in other words, that we are logged in.</p><p class="py-2">Try running <code>python manage.py test</code> and we&#x27;ll get an error., because the user details we&#x27;ve used to log in don&#x27;t exist. Let&#x27;s resolve that.</p><p class="py-2">Now, you could put your own credentials in there, but that&#x27;s not a good idea because it&#x27;s a security risk. Instead, we&#x27;ll create a fixture for the test user that will be loaded when the tests are run. Run the following command:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style"></span><span class="token plain">$ python manage.py createsuperuser</span></div></pre></div></pre><p class="py-2">Give the username as <code>bobsmith</code>, the email address as <code>bob@example.com</code>, and the password as <code>password</code>. Once that&#x27;s done, run these commands to dump the existing users to a fixture:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ </span><span class="token function" style="color:#79b6f2">mkdir</span><span class="token plain"> blogengine/fixtures</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">$ python manage.py dumpdata auth.User --indent</span><span class="token operator" style="color:#d7deea">=</span><span class="token number" style="color:#5a9bcf">2</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"> blogengine/fixtures/users.json</span></div></pre></div></pre><p class="py-2">This will dump all of the existing users to <code>blogengine/fixtures/users.json</code>. You may wish to edit this file to remove your own superuser account and leave only the newly created one in there.</p><p class="py-2">Next we need to amend our test to load this fixture:</p><pre><div class="gatsby-highlight" data-language="python"><pre class="prism-code language-python" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">AdminTest</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">LiveServerTestCase</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">    fixtures </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token string" style="color:#8dc891">&#x27;users.json&#x27;</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">def</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">test_login</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Create client</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">        c </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> Client</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Get login page</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">        response </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> c</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">get</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;/admin/&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check response code</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEquals</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">response</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">status_code</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">200</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check &#x27;Log in&#x27; in response</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertTrue</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;Log in&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> response</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">content</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Log the user in</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token plain">        c</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">login</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">username</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&#x27;bobsmith&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> password</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&quot;password&quot;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check response code</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">21</span><span class="token plain">        response </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> c</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">get</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;/admin/&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">22</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEquals</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">response</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">status_code</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">200</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">23</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">24</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check &#x27;Log out&#x27; in response</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">25</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertTrue</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;Log out&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> response</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">content</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Now, if you run <code>python manage.py test</code>, you should find that the test passes. Next, we&#x27;ll test that we can log out:</p><pre><div class="gatsby-highlight" data-language="python"><pre class="prism-code language-python" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">AdminTest</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">LiveServerTestCase</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">    fixtures </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token string" style="color:#8dc891">&#x27;users.json&#x27;</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">def</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">test_login</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Create client</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">        c </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> Client</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Get login page</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">        response </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> c</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">get</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;/admin/&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check response code</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEquals</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">response</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">status_code</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">200</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check &#x27;Log in&#x27; in response</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertTrue</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;Log in&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> response</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">content</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Log the user in</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token plain">        c</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">login</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">username</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&#x27;bobsmith&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> password</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&quot;password&quot;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check response code</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">21</span><span class="token plain">        response </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> c</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">get</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;/admin/&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">22</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEquals</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">response</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">status_code</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">200</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">23</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">24</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check &#x27;Log out&#x27; in response</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">25</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertTrue</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;Log out&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> response</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">content</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">26</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">27</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">def</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">test_logout</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">28</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Create client</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">29</span><span class="token plain">        c </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> Client</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">30</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">31</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Log in</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">32</span><span class="token plain">        c</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">login</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">username</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&#x27;bobsmith&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> password</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&quot;password&quot;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">33</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">34</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check response code</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">35</span><span class="token plain">        response </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> c</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">get</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;/admin/&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">36</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEquals</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">response</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">status_code</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">200</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">37</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">38</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check &#x27;Log out&#x27; in response</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">39</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertTrue</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;Log out&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> response</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">content</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">40</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">41</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Log out</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">42</span><span class="token plain">        c</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">logout</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">43</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">44</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check response code</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">45</span><span class="token plain">        response </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> c</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">get</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;/admin/&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">46</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEquals</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">response</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">status_code</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">200</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">47</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">48</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check &#x27;Log in&#x27; in response</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">49</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertTrue</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;Log in&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> response</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">content</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">This test works along very similar lines. We log in, verify that &#x27;Log out&#x27; is in the response, then we log out, and verify that &#x27;Log in&#x27; is in the response. Run the tests again, and they should pass. Assuming they do, let&#x27;s commit our changes again:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ </span><span class="token function" style="color:#79b6f2">git</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">add</span><span class="token plain"> blogengine/</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">$ </span><span class="token function" style="color:#79b6f2">git</span><span class="token plain"> commit -m </span><span class="token string" style="color:#8dc891">&#x27;Added tests for admin auth&#x27;</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">This code is a little repetitive. We create the client twice, when we could do so only once. Amend the AdminTest class as follows:</p><pre><div class="gatsby-highlight" data-language="python"><pre class="prism-code language-python" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">AdminTest</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">LiveServerTestCase</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">    fixtures </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token string" style="color:#8dc891">&#x27;users.json&#x27;</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">def</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">setUp</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">client </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> Client</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">def</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">test_login</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Get login page</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">        response </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">client</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">get</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;/admin/&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check response code</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEquals</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">response</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">status_code</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">200</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check &#x27;Log in&#x27; in response</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertTrue</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;Log in&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> response</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">content</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Log the user in</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">client</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">login</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">username</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&#x27;bobsmith&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> password</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&quot;password&quot;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check response code</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">21</span><span class="token plain">        response </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">client</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">get</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;/admin/&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">22</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEquals</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">response</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">status_code</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">200</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">23</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">24</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check &#x27;Log out&#x27; in response</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">25</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertTrue</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;Log out&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> response</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">content</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">26</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">27</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">def</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">test_logout</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">28</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Log in</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">29</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">client</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">login</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">username</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&#x27;bobsmith&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> password</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&quot;password&quot;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">30</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">31</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check response code</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">32</span><span class="token plain">        response </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">client</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">get</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;/admin/&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">33</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEquals</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">response</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">status_code</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">200</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">34</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">35</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check &#x27;Log out&#x27; in response</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">36</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertTrue</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;Log out&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> response</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">content</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">37</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">38</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Log out</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">39</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">client</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">logout</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">40</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">41</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check response code</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">42</span><span class="token plain">        response </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">client</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">get</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;/admin/&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">43</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEquals</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">response</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">status_code</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">200</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">44</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">45</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check &#x27;Log in&#x27; in response</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">46</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertTrue</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;Log in&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> response</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">content</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">47</span><span class="token plain" style="display:inline-block">
</span></div></pre></div></pre><p class="py-2">The <code>setUp()</code> method is automatically run when the test runs, and ensures we only need to start up the client once. Run your tests to make sure they pass, then commit your changes:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ </span><span class="token function" style="color:#79b6f2">git</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">add</span><span class="token plain"> blogengine/</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">$ </span><span class="token function" style="color:#79b6f2">git</span><span class="token plain"> commit -m </span><span class="token string" style="color:#8dc891">&#x27;Refactored admin test&#x27;</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Now, we&#x27;ll implement a test for creating a new post. The admin interface implements URLs for creating new instances of a model in a consistent format of <code>/admin/app_name/model_name/add/</code>, so the URL for adding a new post will be <code>/admin/blogengine/post/add/</code>.</p><p class="py-2">Add this method to the AdminTest class:</p><pre><div class="gatsby-highlight" data-language="python"><pre class="prism-code language-python" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">def</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">test_create_post</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Log in</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">client</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">login</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">username</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&#x27;bobsmith&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> password</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&quot;password&quot;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check response code</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">        response </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">client</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">get</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;/admin/blogengine/post/add/&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEquals</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">response</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">status_code</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">200</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Try running it and this will fail, because we haven&#x27;t registered the Post model in the Django admin. So we need to do that. To do so, open a new file at <code>blogengine/admin.py</code> and add the following code:</p><pre><div class="gatsby-highlight" data-language="python"><pre class="prism-code language-python" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> models</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">contrib </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> admin</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">admin</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">site</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">register</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">models</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">Post</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Now, run <code>python manage.py test</code> and the test should pass. If you want to confirm that the post model appears in the admin, run <code>python manage.py runserver</code> and click <a href="http://127.0.0.1:8000/admin/" class="border-b-2 border-green-400">here</a>.</p><p class="py-2">So now we can reach the page for adding a post, but we haven&#x27;t yet tested that we can submit one. Let&#x27;s remedy that:</p><pre><div class="gatsby-highlight" data-language="python"><pre class="prism-code language-python" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">def</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">test_create_post</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Log in</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">client</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">login</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">username</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&#x27;bobsmith&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> password</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&quot;password&quot;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check response code</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">        response </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">client</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">get</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;/admin/blogengine/post/add/&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEquals</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">response</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">status_code</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">200</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Create the new post</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain">        response </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">client</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">post</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;/admin/blogengine/post/add/&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain">            </span><span class="token string" style="color:#8dc891">&#x27;title&#x27;</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;My first post&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain">            </span><span class="token string" style="color:#8dc891">&#x27;text&#x27;</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;This is my first post&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain">            </span><span class="token string" style="color:#8dc891">&#x27;pub_date_0&#x27;</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;2013-12-28&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain">            </span><span class="token string" style="color:#8dc891">&#x27;pub_date_1&#x27;</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;22:00:04&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain">        </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token plain">        follow</span><span class="token operator" style="color:#d7deea">=</span><span class="token boolean" style="color:#ff8b50">True</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token plain">        </span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEquals</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">response</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">status_code</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">200</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check added successfully</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">21</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertTrue</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;added successfully&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> response</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">content</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">22</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">23</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check new post now in database</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">24</span><span class="token plain">        all_posts </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> Post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">objects</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token builtin" style="color:#D8DEE9">all</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">25</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEquals</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token builtin" style="color:#D8DEE9">len</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">all_posts</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">1</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Here we submit the new post via HTTP POST, with all the data passed through. This mirrors the form created by the Django admin interface - if you take a look at the HTML generated by the admin, you&#x27;ll see that the inputs are given names that match these. Note that the <code>pub_date</code> field, because it represents a datetime object, is split up into a separate date and time field. Also note the parameter <code>follow=True</code> - this denotes that the test client should follow any HTTP redirect.</p><p class="py-2">We confirm that the POST request responded with a 200 code, denoting success. We also confirm that the response included the phrase &#x27;added successfully&#x27;. Finally we confirm that there is now a single Post object in the database. Don&#x27;t worry about any existing content - Django creates a dedicated test database and destroys it after the tests are done, so you can be sure that no posts are present unless you explicitly load them from a fixture.</p><p class="py-2">We can now test creating a post, but we also need to ensure we can test editing and deleting them. First we&#x27;ll add a test for editing posts:</p><pre><div class="gatsby-highlight" data-language="python"><pre class="prism-code language-python" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">def</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">test_edit_post</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Create the post</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">        post </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> Post</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">        post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">title </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;My first post&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">        post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">text </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;This is my first blog post&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">        post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">pub_date </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> timezone</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">now</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">        post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">save</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Log in</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">client</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">login</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">username</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&#x27;bobsmith&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> password</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&quot;password&quot;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Edit the post</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain">        response </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">client</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">post</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;/admin/blogengine/post/1/&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain">            </span><span class="token string" style="color:#8dc891">&#x27;title&#x27;</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;My second post&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain">            </span><span class="token string" style="color:#8dc891">&#x27;text&#x27;</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;This is my second blog post&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token plain">            </span><span class="token string" style="color:#8dc891">&#x27;pub_date_0&#x27;</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;2013-12-28&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token plain">            </span><span class="token string" style="color:#8dc891">&#x27;pub_date_1&#x27;</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;22:00:04&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token plain">        </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token plain">        follow</span><span class="token operator" style="color:#d7deea">=</span><span class="token boolean" style="color:#ff8b50">True</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token plain">        </span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">21</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEquals</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">response</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">status_code</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">200</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">22</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">23</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check changed successfully</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">24</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertTrue</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;changed successfully&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> response</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">content</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">25</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">26</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check post amended</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">27</span><span class="token plain">        all_posts </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> Post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">objects</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token builtin" style="color:#D8DEE9">all</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">28</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEquals</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token builtin" style="color:#D8DEE9">len</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">all_posts</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">1</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">29</span><span class="token plain">        only_post </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> all_posts</span><span class="token punctuation" style="color:#8dc891">[</span><span class="token number" style="color:#5a9bcf">0</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">30</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEquals</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">only_post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">title</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;My second post&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">31</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEquals</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">only_post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">text</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;This is my second blog post&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Here we create a new blog post, then verify we can edit it by resubmitting it with different values, and checking that we get the expected response, and that the data in the database has been updated. Run <code>python manage.py test</code>, and this should pass.</p><p class="py-2">Finally, we&#x27;ll set up a test for deleting posts:</p><pre><div class="gatsby-highlight" data-language="python"><pre class="prism-code language-python" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">def</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">test_delete_post</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Create the post</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">        post </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> Post</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">        post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">title </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;My first post&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">        post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">text </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;This is my first blog post&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">        post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">pub_date </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> timezone</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">now</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">        post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">save</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check new post saved</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain">        all_posts </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> Post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">objects</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token builtin" style="color:#D8DEE9">all</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEquals</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token builtin" style="color:#D8DEE9">len</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">all_posts</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">1</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Log in</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">client</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">login</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">username</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&#x27;bobsmith&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> password</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&quot;password&quot;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Delete the post</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token plain">        response </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">client</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">post</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;/admin/blogengine/post/1/delete/&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token plain">            </span><span class="token string" style="color:#8dc891">&#x27;post&#x27;</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;yes&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token plain">        </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> follow</span><span class="token operator" style="color:#d7deea">=</span><span class="token boolean" style="color:#ff8b50">True</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEquals</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">response</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">status_code</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">200</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">21</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">22</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check deleted successfully</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">23</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertTrue</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;deleted successfully&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> response</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">content</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">24</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">25</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check post amended</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">26</span><span class="token plain">        all_posts </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> Post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">objects</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token builtin" style="color:#D8DEE9">all</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">27</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEquals</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token builtin" style="color:#D8DEE9">len</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">all_posts</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">0</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Again, this is pretty similar to what we did before. We create a new post, verify that it is the sole post in the database, and log into the admin. Then we delete the post via the admin, and confirm that the admin interface confirmed it has been deleted, and the post is gone from the database.</p><p class="py-2">I think it&#x27;s now time to commit again:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ </span><span class="token function" style="color:#79b6f2">git</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">add</span><span class="token plain"> blogengine/</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">$ </span><span class="token function" style="color:#79b6f2">git</span><span class="token plain"> commit -m </span><span class="token string" style="color:#8dc891">&#x27;Post admin tests in place&#x27;</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">So we now know that we can create, edit and delete posts, and we have tests in place to confirm this. So our next task is to be able to display our posts.</p><p class="py-2">For now, to keep things simple, we&#x27;re only going to implement the index view - in other words, all the posts in reverse chronological order. We&#x27;ll use Django&#x27;s generic views to keep things really easy.</p><p class="py-2">Django&#x27;s generic views are another really handy feature. As mentioned earlier, a view is a function or class that describes how a specific route should render an object. Now, there are many tasks that recur in web development. For instance, many web pages you may have seen may be a list of objects - in this case, the index page for a blog is a list of blog posts. For that reason, Django has the ListView generic view, which makes it easy to render a list of objects.</p><p class="py-2">Now, like before, we want to have a test in place. Open up <code>blogengine/tests.py</code> and add the following class at the end of the file:</p><pre><div class="gatsby-highlight" data-language="python"><pre class="prism-code language-python" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">PostViewTest</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">LiveServerTestCase</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">def</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">setUp</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">client </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> Client</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">def</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">test_index</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Create the post</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">        post </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> Post</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain">        post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">title </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;My first post&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">        post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">text </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;This is my first blog post&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain">        post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">pub_date </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> timezone</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">now</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain">        post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">save</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check new post saved</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain">        all_posts </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> Post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">objects</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token builtin" style="color:#D8DEE9">all</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEquals</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token builtin" style="color:#D8DEE9">len</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">all_posts</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">1</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Fetch the index</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token plain">        response </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">client</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">get</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;/&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEquals</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">response</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">status_code</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">200</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">21</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check the post title is in the response</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">22</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertTrue</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">title </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> response</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">content</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">23</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">24</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check the post text is in the response</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">25</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertTrue</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">text </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> response</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">content</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">26</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">27</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check the post date is in the response</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">28</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertTrue</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token builtin" style="color:#D8DEE9">str</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">pub_date</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">year</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> response</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">content</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">29</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertTrue</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">pub_date</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">strftime</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;%b&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> response</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">content</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">30</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertTrue</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token builtin" style="color:#D8DEE9">str</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">pub_date</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">day</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> response</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">content</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Here we create the post, and assert that it is the sole post object. We then fetch the index page, and assert that the HTTP status code is 200 (ie. the page exists and is returned). We then verify that the response contains the post title, text and publication date.</p><p class="py-2">Note that for the month, we need to do a bit of jiggery-pokery to get the month name. By default Django will return short month names (eg Jan, Feb etc), but Python stores months as numbers, so we need to format it as a short month name using <code>%b</code>.</p><p class="py-2">If you run this, you will get an error because the index route isn&#x27;t implemented. So let&#x27;s fix that. Open up the existing <code>django_tutorial_blog_ng/urls.py</code> file and amend it to look like this:</p><pre><div class="gatsby-highlight" data-language="python"><pre class="prism-code language-python" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">conf</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">urls </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> patterns</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> include</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> url</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">contrib </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> admin</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">admin</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">autodiscover</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">urlpatterns </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> patterns</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">    </span><span class="token comment" style="color:#999999"># Examples:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain">    </span><span class="token comment" style="color:#999999"># url(r&#x27;^$&#x27;, &#x27;django_tutorial_blog_ng.views.home&#x27;, name=&#x27;home&#x27;),</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">    </span><span class="token comment" style="color:#999999"># url(r&#x27;^blog/&#x27;, include(&#x27;blog.urls&#x27;)),</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain">    url</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">r&#x27;^admin/&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> include</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">admin</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">site</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">urls</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain">    </span><span class="token comment" style="color:#999999"># Blog URLs</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain">    url</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">r&#x27;^.*$&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> include</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;blogengine.urls&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Then, create a new file at <code>blogengine/urls.py</code> and edit it as follows:</p><pre><div class="gatsby-highlight" data-language="python"><pre class="prism-code language-python" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">conf</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">urls </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> patterns</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> url</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">views</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">generic </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> ListView</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> blogengine</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">models </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> Post</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">urlpatterns </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> patterns</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">    </span><span class="token comment" style="color:#999999"># Index</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">    url</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;^$&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> ListView</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">as_view</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain">        model</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">Post</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">        </span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">A little explanation is called for. The project has its own <code>urls.py</code> file that handles routing throughout the project. However, because Django encourages you to make your apps reusable, we want to keep the routes in the individual apps as far as possible. So, in the project file, we include the <code>blogengine/urls.py</code> file.</p><p class="py-2">In the app-specific <code>urls.py</code>, we import the Post model and the ListView generic view. We then define a route for the index page - the regular expression <code>^$</code> will match only an empty string, so that page will be the index. For this route, we then call the <code>as_view()</code> method of the ListView object, and set the model as Post.</p><p class="py-2">Now, if you either run the tests, or run the development server and visit <a href="http://127.0.0.1:8000" class="border-b-2 border-green-400">the index page</a>, you&#x27;ll see that it isn&#x27;t working yet - you should see the error <code>TemplateDoesNotExist: blogengine/post_list.html</code>. This tells us that we need to create a template called <code>blogengine/post_list.html</code>, so let&#x27;s do that. First of all, add the following at the end of <code>django_tutorial_blog_ng/settings.py</code>:</p><pre><div class="gatsby-highlight" data-language="python"><pre class="prism-code language-python" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain"></span><span class="token comment" style="color:#999999"># Template directory</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">TEMPLATE_DIRS </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token plain">os</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">join</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">BASE_DIR</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;templates&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Next, create the folders for the templates, and a blank <code>post_list.html</code> file:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ </span><span class="token function" style="color:#79b6f2">mkdir</span><span class="token plain"> templates</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">$ </span><span class="token function" style="color:#79b6f2">mkdir</span><span class="token plain"> templates/blogengine</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">$ </span><span class="token function" style="color:#79b6f2">touch</span><span class="token plain"> templates/blogengine/post_list.html</span></div></pre></div></pre><p class="py-2">Now, run your tests again, and you&#x27;ll see that the template now exists, but a new error is showing up:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">Creating </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> database </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> </span><span class="token builtin class-name" style="color:#FAC863">alias</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;default&#x27;</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">..</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">F</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain"></span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">FAIL: test_index </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">blogengine.tests.PostViewTest</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">----------------------------------------------------------------------</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">Traceback </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">most recent call last</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain">:</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">  File </span><span class="token string" style="color:#8dc891">&quot;/Users/matthewdaly/Projects/django_tutorial_blog_ng/blogengine/tests.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:#5a9bcf">189</span><span class="token plain">, </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> test_index</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain">    self.assertTrue</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">post.title </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> response.content</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">AssertionError: False is not </span><span class="token boolean" style="color:#ff8b50">true</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain">----------------------------------------------------------------------</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain">Ran </span><span class="token number" style="color:#5a9bcf">7</span><span class="token plain"> tests </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">2</span><span class="token plain">.162s</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain">FAILED </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">failures</span><span class="token operator" style="color:#d7deea">=</span><span class="token number" style="color:#5a9bcf">1</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain">Destroying </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> database </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> </span><span class="token builtin class-name" style="color:#FAC863">alias</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;default&#x27;</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div></pre></div></pre><p class="py-2">To fix this, we make sure the template shows the data we want. Open up <code>templates/blogengine/post_list.html</code> and enter the following:</p><pre><div class="gatsby-highlight" data-language="django"><pre class="prism-code language-django" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token variable" style="color:#d7deea">html</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">    </span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token variable" style="color:#d7deea">head</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">        </span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token variable" style="color:#d7deea">title</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token variable" style="color:#d7deea">My</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">Django</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">Blog</span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token operator" style="color:#d7deea">/</span><span class="token variable" style="color:#d7deea">title</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">    </span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token operator" style="color:#d7deea">/</span><span class="token variable" style="color:#d7deea">head</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">    </span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token variable" style="color:#d7deea">body</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">        </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token operator" style="color:#d7deea">%</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">post</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">object_list</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">%</span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">        </span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token variable" style="color:#d7deea">h1</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token punctuation" style="color:#8dc891">{</span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token variable" style="color:#d7deea">title</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token punctuation" style="color:#8dc891">}</span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token operator" style="color:#d7deea">/</span><span class="token variable" style="color:#d7deea">h1</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain">        </span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token variable" style="color:#d7deea">h3</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token punctuation" style="color:#8dc891">{</span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token variable" style="color:#d7deea">pub_date</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token punctuation" style="color:#8dc891">}</span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token operator" style="color:#d7deea">/</span><span class="token variable" style="color:#d7deea">h3</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">        </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">post</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token variable" style="color:#d7deea">text</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain">        </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token operator" style="color:#d7deea">%</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">endfor</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">%</span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain">    </span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token operator" style="color:#d7deea">/</span><span class="token variable" style="color:#d7deea">body</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain"></span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token operator" style="color:#d7deea">/</span><span class="token variable" style="color:#d7deea">html</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">This is only a very basic template, and we&#x27;ll expand upon it in future.</p><p class="py-2">With that done, you can run <code>python manage.py test</code>, and it should pass. Well done! Don&#x27;t forget to commit your changes:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ </span><span class="token function" style="color:#79b6f2">git</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">add</span><span class="token plain"> django_tutorial_blog_ng/ templates/ blogengine/</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">$ </span><span class="token function" style="color:#79b6f2">git</span><span class="token plain"> commit -m </span><span class="token string" style="color:#8dc891">&#x27;Implemented list view for posts&#x27;</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">And that&#x27;s all for this lesson! We&#x27;ve done a hell of a lot in this lesson - set up our project, created a comprehensive test suite for it, and implemented the basic functionality. Next time we&#x27;ll make it a bit prettier using Twitter Bootstrap, as well as implementing more of the basic functionality for the blog.</p><p class="py-2">You can find the source code <a href="https://github.com/matthewbdaly/django_tutorial_blog_ng" class="border-b-2 border-green-400">on Github</a>. For your convenience, I&#x27;ve tagged this lesson as <code>lesson-1</code>, so you can just clone the repository and switch to the end of this lesson with the following commands:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ </span><span class="token function" style="color:#79b6f2">git</span><span class="token plain"> clone https://github.com/matthewbdaly/django_tutorial_blog_ng.git</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">$ </span><span class="token builtin class-name" style="color:#FAC863">cd</span><span class="token plain"> django_tutorial_blog_ng</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">$ </span><span class="token function" style="color:#79b6f2">git</span><span class="token plain"> checkout lesson-1</span></div></pre></div></pre><p class="py-2">That way, you can easily check that what you&#x27;ve done matches up with the repository. Future lessons will be similarly tagged to make them easy to navigate.</p></section><hr/><div class="py-4"><a class="p-category" href="/blog/categories/python/"><span class="inline-block px-4 py-2 my-2 mr-2 text-sm font-bold text-gray-900 bg-purple-200 rounded-full hover:bg-purple-800 hover:text-gray-200 transition-colors duration-500">python</span></a><a class="p-category" href="/blog/categories/django/"><span class="inline-block px-4 py-2 my-2 mr-2 text-sm font-bold text-gray-900 bg-purple-200 rounded-full hover:bg-purple-800 hover:text-gray-200 transition-colors duration-500">django</span></a><a class="p-category" href="/blog/categories/tdd/"><span class="inline-block px-4 py-2 my-2 mr-2 text-sm font-bold text-gray-900 bg-purple-200 rounded-full hover:bg-purple-800 hover:text-gray-200 transition-colors duration-500">tdd</span></a><a class="p-category" href="/blog/categories/django-blog-tutorial/"><span class="inline-block px-4 py-2 my-2 mr-2 text-sm font-bold text-gray-900 bg-purple-200 rounded-full hover:bg-purple-800 hover:text-gray-200 transition-colors duration-500">django-blog-tutorial</span></a></div><nav class="pt-4 clear-both box-border"><a rel="prev" class="float-left w-1/2 p-2 shadow-sm hover:bg-gray-200 dark:hover:bg-gray-800 transition duration-300 ease-in-out" href="/blog/2013/08/16/a-starting-boilerplate-for-php-development-with-vagrant/"><p><strong class="font-bold clear-both">← Previous page</strong></p><p class="pl-6">A starting boilerplate for PHP development with Vagrant</p></a><a rel="next" class="float-right w-1/2 p-2 shadow-sm hover:bg-gray-200 dark:hover:bg-gray-800 transition duration-300 ease-in-out" href="/blog/2014/01/02/django-blog-tutorial-the-next-generation-part-2/"><p><strong>→ Next page</strong></p><p class="pl-6">Django blog tutorial - the next generation - part 2</p></a></nav><div id="disqus_thread"></div></article></main></div><footer class="w-full p-4 text-gray-100 bg-gray-800"><ul class="flex flex-row flex-wrap justify-center w-full p-2 mx-auto text-center md:w-2/3 box-border"><li class="w-1/3 my-2 md:w-1/6"><a href="/posts/1">Blog</a></li><li class="w-1/3 my-2 md:w-1/6"><a href="/about">About</a></li><li class="w-1/3 my-2 md:w-1/6"><a href="/contact">Contact</a></li><li class="w-1/3 my-2 md:w-1/6"><a href="https://twitter.com/mattbd">Twitter</a></li><li class="w-1/3 my-2 md:w-1/6"><a href="https://github.com/matthewbdaly">Github</a></li><li class="w-1/3 my-2 md:w-1/6"><a href="/rss.xml">Feed</a></li></ul><div class="w-full p-4 mx-auto text-center md:w-2/3"><p>© Matthew Daly <!-- -->2021</p></div></footer></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-17043630-1', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/2013/12/28/django-blog-tutorial-the-next-generation-part-1/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-6860dcd81490c6aa82f7.js"],"app":["/app-d77411d2a9a71ac63dc7.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-f73ba0fd1f8ccd9c9e51.js"],"component---src-pages-contact-tsx":["/component---src-pages-contact-tsx-1898c96d7580571807c5.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-5205a883277333822a72.js"],"component---src-pages-search-tsx":["/component---src-pages-search-tsx-73edb3a3894897c2442d.js"],"component---src-templates-404-tsx":["/component---src-templates-404-tsx-ab0075b3d63edf37ce8b.js"],"component---src-templates-archives-tsx":["/component---src-templates-archives-tsx-d6565df0adcf40921e81.js"],"component---src-templates-categories-tsx":["/component---src-templates-categories-tsx-9d8c91434e407a29b108.js"],"component---src-templates-category-tsx":["/component---src-templates-category-tsx-c4b49257550e7ce69c55.js"],"component---src-templates-chunk-tsx":["/component---src-templates-chunk-tsx-8964f592e3e995933e96.js"],"component---src-templates-page-tsx":["/component---src-templates-page-tsx-26f553a9953981738a84.js"],"component---src-templates-post-tsx":["/component---src-templates-post-tsx-cc8c6bdbcd5a1c0c91b6.js"]};/*]]>*/</script><script src="/polyfill-6860dcd81490c6aa82f7.js" nomodule=""></script><script src="/component---src-templates-post-tsx-cc8c6bdbcd5a1c0c91b6.js" async=""></script><script src="/7840d69eefded84ab93ff6e879351e9a3a16821f-3cc77dc4aa7437d407dd.js" async=""></script><script src="/15a3be27178e285ff113e12c60c30466a8f4d4c5-05c94d59cdf70f961f79.js" async=""></script><script src="/751e6587c41c404721231b94fec2753859fa1aad-238a8becfca1bae1e52b.js" async=""></script><script src="/f0e45107-1ab5e6e9877396d2cf44.js" async=""></script><script src="/app-d77411d2a9a71ac63dc7.js" async=""></script><script src="/framework-aeedefbd40854c93cd6e.js" async=""></script><script src="/webpack-runtime-f2370bab0d9de35ca289.js" async=""></script></body></html>