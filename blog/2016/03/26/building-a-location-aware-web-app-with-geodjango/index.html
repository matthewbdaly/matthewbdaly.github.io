<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta http-equiv="Content-Security-Policy" content="base-uri &#x27;self&#x27;; default-src &#x27;self&#x27; *.google-analytics.com disqus.com *.disqus.com *.disquscdn.com getform.io; script-src &#x27;self&#x27; localhost:* *.addthis.com *.google-analytics.com *.googletagmanager.com *.disquscdn.com *.disqus.com disqus.com *.addthisedge.com graph.facebook.com &#x27;unsafe-inline&#x27; &#x27;unsafe-eval&#x27;; style-src &#x27;self&#x27; fonts.googleapis.com *.addthis.com google-analytics.com *.disquscdn.com *.disqus.com &#x27;unsafe-inline&#x27;; object-src &#x27;none&#x27;; form-action &#x27;self&#x27; getform.io; font-src &#x27;self&#x27; data: fonts.google-apis.com fonts.gstatic.com; connect-src &#x27;self&#x27; ws://localhost:* *.google-analytics.com stats.g.doubleclick.net; img-src &#x27;self&#x27; *.google-analytics.com *.disquscdn.com *.disqus.com stats.g.doubleclick.net; child-src &#x27;self&#x27;; frame-src disqus.com *.addthis.com; frame-ancestors &#x27;none&#x27;;"/><meta name="generator" content="Gatsby 4.20.0"/><meta data-react-helmet="true" name="description" content="PostgreSQL has excellent support for geographical data thanks to the PostGIS extension, and Django allows you to take full advantage of it thanks to GeoDjango. In this tutorial, I…"/><meta data-react-helmet="true" property="og:title" content="Building a location aware web app with GeoDjango"/><meta data-react-helmet="true" property="og:description" content="PostgreSQL has excellent support for geographical data thanks to the PostGIS extension, and Django allows you to take full advantage of it thanks to GeoDjango. In this tutorial, I…"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="mattbd"/><meta data-react-helmet="true" name="twitter:title" content="Building a location aware web app with GeoDjango"/><meta data-react-helmet="true" name="twitter:description" content="PostgreSQL has excellent support for geographical data thanks to the PostGIS extension, and Django allows you to take full advantage of it thanks to GeoDjango. In this tutorial, I…"/><meta name="theme-color" content="#3b82f6"/><style data-href="/styles.652d15e3bd4b53c7a6d8.css" data-identity="gatsby-global-css">/* ! tailwindcss v3.1.8 | MIT License | https://tailwindcss.com */*,:after,:before{border:0 solid #e5e7eb;box-sizing:border-box}:after,:before{--tw-content:""}html{-webkit-text-size-adjust:100%;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4}body{line-height:inherit;margin:0}hr{border-top-width:1px;color:inherit;height:0}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{border-collapse:collapse;border-color:inherit;text-indent:0}button,input,optgroup,select,textarea{color:inherit;font-family:inherit;font-size:100%;font-weight:inherit;line-height:inherit;margin:0;padding:0}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0}fieldset,legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:#9ca3af;opacity:1}input::placeholder,textarea::placeholder{color:#9ca3af;opacity:1}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{height:auto;max-width:100%}*,:after,:before{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }::-webkit-backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }.float-right{float:right}.float-left{float:left}.float-none{float:none}.clear-both{clear:both}.m-0{margin:0}.mx-auto{margin-left:auto;margin-right:auto}.my-2{margin-bottom:.5rem;margin-top:.5rem}.my-4{margin-bottom:1rem;margin-top:1rem}.mx-0{margin-left:0;margin-right:0}.mt-2{margin-top:.5rem}.-mb-8{margin-bottom:-2rem}.-mb-4{margin-bottom:-1rem}.mr-8{margin-right:2rem}.mt-16{margin-top:4rem}.mr-2{margin-right:.5rem}.box-border{box-sizing:border-box}.block{display:block}.inline-block{display:inline-block}.flex{display:flex}.hidden{display:none}.h-2{height:.5rem}.h-4{height:1rem}.min-h-screen{min-height:100vh}.w-full{width:100%}.w-1\/3{width:33.333333%}.w-1\/2{width:50%}.w-3\/4{width:75%}.w-1\/4{width:25%}.flex-grow{flex-grow:1}.list-disc{list-style-type:disc}.flex-row{flex-direction:row}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.justify-center{justify-content:center}.space-y-32>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-bottom:calc(8rem*var(--tw-space-y-reverse));margin-top:calc(8rem*(1 - var(--tw-space-y-reverse)))}.space-y-16>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-bottom:calc(4rem*var(--tw-space-y-reverse));margin-top:calc(4rem*(1 - var(--tw-space-y-reverse)))}.space-y-8>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-bottom:calc(2rem*var(--tw-space-y-reverse));margin-top:calc(2rem*(1 - var(--tw-space-y-reverse)))}.divide-y>:not([hidden])~:not([hidden]){--tw-divide-y-reverse:0;border-bottom-width:calc(1px*var(--tw-divide-y-reverse));border-top-width:calc(1px*(1 - var(--tw-divide-y-reverse)))}.divide-gray-800>:not([hidden])~:not([hidden]){--tw-divide-opacity:1;border-color:rgb(31 41 55/var(--tw-divide-opacity))}.overflow-x-auto{overflow-x:auto}.overflow-x-scroll{overflow-x:scroll}.rounded-lg{border-radius:.5rem}.rounded-full{border-radius:9999px}.rounded-t-lg{border-top-left-radius:.5rem;border-top-right-radius:.5rem}.border-2{border-width:2px}.border-b-2{border-bottom-width:2px}.border-l-8{border-left-width:8px}.border-b-4{border-bottom-width:4px}.border-green-400{--tw-border-opacity:1;border-color:rgb(74 222 128/var(--tw-border-opacity))}.border-gray-500{--tw-border-opacity:1;border-color:rgb(107 114 128/var(--tw-border-opacity))}.border-gray-800{--tw-border-opacity:1;border-color:rgb(31 41 55/var(--tw-border-opacity))}.border-transparent{border-color:transparent}.border-gray-100{--tw-border-opacity:1;border-color:rgb(243 244 246/var(--tw-border-opacity))}.bg-gray-100{--tw-bg-opacity:1;background-color:rgb(243 244 246/var(--tw-bg-opacity))}.bg-gray-300{--tw-bg-opacity:1;background-color:rgb(209 213 219/var(--tw-bg-opacity))}.bg-gray-800{--tw-bg-opacity:1;background-color:rgb(31 41 55/var(--tw-bg-opacity))}.bg-gray-50{--tw-bg-opacity:1;background-color:rgb(249 250 251/var(--tw-bg-opacity))}.bg-red-200{--tw-bg-opacity:1;background-color:rgb(254 202 202/var(--tw-bg-opacity))}.bg-purple-200{--tw-bg-opacity:1;background-color:rgb(233 213 255/var(--tw-bg-opacity))}.bg-gradient-to-b{background-image:linear-gradient(to bottom,var(--tw-gradient-stops))}.bg-gradient-to-r{background-image:linear-gradient(to right,var(--tw-gradient-stops))}.from-gray-200{--tw-gradient-from:#e5e7eb;--tw-gradient-to:rgba(229,231,235,0);--tw-gradient-stops:var(--tw-gradient-from),var(--tw-gradient-to)}.from-green-400{--tw-gradient-from:#4ade80;--tw-gradient-to:rgba(74,222,128,0);--tw-gradient-stops:var(--tw-gradient-from),var(--tw-gradient-to)}.via-blue-500{--tw-gradient-to:rgba(59,130,246,0);--tw-gradient-stops:var(--tw-gradient-from),#3b82f6,var(--tw-gradient-to)}.to-gray-300{--tw-gradient-to:#d1d5db}.to-purple-500{--tw-gradient-to:#a855f7}.p-4{padding:1rem}.p-2{padding:.5rem}.px-8{padding-left:2rem;padding-right:2rem}.py-4{padding-bottom:1rem;padding-top:1rem}.py-2{padding-bottom:.5rem;padding-top:.5rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-4{padding-right:1rem}.pl-4,.px-4{padding-left:1rem}.pb-16{padding-bottom:4rem}.pt-4{padding-top:1rem}.pl-6{padding-left:1.5rem}.text-center{text-align:center}.font-mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.font-sans{font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji}.text-sm{font-size:.875rem;line-height:1.25rem}.text-4xl{font-size:2.25rem;line-height:2.5rem}.text-2xl{font-size:1.5rem;line-height:2rem}.text-xl{font-size:1.25rem}.text-lg,.text-xl{line-height:1.75rem}.text-lg{font-size:1.125rem}.font-bold{font-weight:700}.font-semibold{font-weight:600}.lowercase{text-transform:lowercase}.italic{font-style:italic}.leading-6{line-height:1.5rem}.text-gray-200{--tw-text-opacity:1;color:rgb(229 231 235/var(--tw-text-opacity))}.text-gray-900{--tw-text-opacity:1;color:rgb(17 24 39/var(--tw-text-opacity))}.text-gray-800{--tw-text-opacity:1;color:rgb(31 41 55/var(--tw-text-opacity))}.text-gray-100{--tw-text-opacity:1;color:rgb(243 244 246/var(--tw-text-opacity))}.antialiased{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.shadow-lg{--tw-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -4px rgba(0,0,0,.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color),0 4px 6px -4px var(--tw-shadow-color)}.shadow-lg,.shadow-sm{box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.shadow-sm{--tw-shadow:0 1px 2px 0 rgba(0,0,0,.05);--tw-shadow-colored:0 1px 2px 0 var(--tw-shadow-color)}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.transition-colors{transition-duration:.15s;transition-property:color,background-color,border-color,fill,stroke,-webkit-text-decoration-color;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,-webkit-text-decoration-color;transition-timing-function:cubic-bezier(.4,0,.2,1)}.transition{transition-duration:.15s;transition-property:color,background-color,border-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-text-decoration-color,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-text-decoration-color,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1)}.duration-500{transition-duration:.5s}.duration-300{transition-duration:.3s}.ease-in-out{transition-timing-function:cubic-bezier(.4,0,.2,1)}code[class*=language-],pre[class*=language-]{display:block}.hover\:border-green-400:hover{--tw-border-opacity:1;border-color:rgb(74 222 128/var(--tw-border-opacity))}.hover\:bg-gray-200:hover{--tw-bg-opacity:1;background-color:rgb(229 231 235/var(--tw-bg-opacity))}.hover\:bg-purple-800:hover{--tw-bg-opacity:1;background-color:rgb(107 33 168/var(--tw-bg-opacity))}.hover\:text-gray-200:hover{--tw-text-opacity:1;color:rgb(229 231 235/var(--tw-text-opacity))}.focus\:border-blue-300:focus{--tw-border-opacity:1;border-color:rgb(147 197 253/var(--tw-border-opacity))}.focus\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.focus\:ring:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(3px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}@media (prefers-color-scheme:dark){.dark\:divide-gray-200>:not([hidden])~:not([hidden]){--tw-divide-opacity:1;border-color:rgb(229 231 235/var(--tw-divide-opacity))}.dark\:bg-gray-800{--tw-bg-opacity:1;background-color:rgb(31 41 55/var(--tw-bg-opacity))}.dark\:bg-gray-900{--tw-bg-opacity:1;background-color:rgb(17 24 39/var(--tw-bg-opacity))}.dark\:bg-gray-700{--tw-bg-opacity:1;background-color:rgb(55 65 81/var(--tw-bg-opacity))}.dark\:text-gray-300{--tw-text-opacity:1;color:rgb(209 213 219/var(--tw-text-opacity))}.dark\:text-gray-100{--tw-text-opacity:1;color:rgb(243 244 246/var(--tw-text-opacity))}.dark\:text-gray-200{--tw-text-opacity:1;color:rgb(229 231 235/var(--tw-text-opacity))}.dark\:text-gray-800{--tw-text-opacity:1;color:rgb(31 41 55/var(--tw-text-opacity))}.dark\:hover\:bg-gray-800:hover{--tw-bg-opacity:1;background-color:rgb(31 41 55/var(--tw-bg-opacity))}}@media (min-width:768px){.md\:float-none{float:none}.md\:block{display:block}.md\:w-2\/3{width:66.666667%}.md\:w-1\/6{width:16.666667%}}@media (min-width:1024px){.lg\:float-right{float:right}.lg\:float-left{float:left}.lg\:mt-4{margin-top:1rem}.lg\:text-left{text-align:left}}.prism-code{-webkit-overflow-scrolling:touch;background-color:transparent;border-radius:.2em;float:left;font-size:1rem;margin-bottom:1rem;margin-top:1rem;overflow:initial;padding-bottom:1rem;padding-top:1rem;position:relative}.prism-code.title{border-radius:0 0 .2em .2em}pre.prism-code{float:left;min-width:100%;overflow:initial;padding:20px}.token{display:inline-block}li>code,p>code{word-wrap:break-word;color:#ab79d6;white-space:pre-wrap}.gatsby-highlight{-webkit-overflow-scrolling:touch;font-size:1rem;overflow:auto;position:relative}.gatsby-highlight::-webkit-scrollbar{display:none}.gatsby-highlight>code[class*=language-],.gatsby>pre[class*=language-]{-webkit-hyphens:none;hyphens:none;line-height:1.5;overflow-wrap:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-break:normal;word-spacing:normal}.gatsby-highlight .token-line{border-left:4px solid transparent;margin-left:-20px;margin-right:-20px}.line-number-style{display:inline-block;opacity:.3;padding-left:1em;padding-right:2em;position:relative;text-align:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:1.2em}.gatsby-highlight .token-line.highlight-line{background-color:#023751;border-left:4px solid #029bce}.gatsby-highlight .token-line.highlight-line .line-number-style{left:0;opacity:.5;width:calc(1.2em - 4px)}</style><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link rel="search" type="application/opensearchdescription+xml" title="Matthew Daly" href="/opensearch.xml"/><script data-gatsby="web-vitals-polyfill">
              !function(){var e,t,n,i,r={passive:!0,capture:!0},a=new Date,o=function(){i=[],t=-1,e=null,f(addEventListener)},c=function(i,r){e||(e=r,t=i,n=new Date,f(removeEventListener),u())},u=function(){if(t>=0&&t<n-a){var r={entryType:"first-input",name:e.type,target:e.target,cancelable:e.cancelable,startTime:e.timeStamp,processingStart:e.timeStamp+t};i.forEach((function(e){e(r)})),i=[]}},s=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var n=function(){c(e,t),a()},i=function(){a()},a=function(){removeEventListener("pointerup",n,r),removeEventListener("pointercancel",i,r)};addEventListener("pointerup",n,r),addEventListener("pointercancel",i,r)}(t,e):c(t,e)}},f=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,s,r)}))},p="hidden"===document.visibilityState?0:1/0;addEventListener("visibilitychange",(function e(t){"hidden"===document.visibilityState&&(p=t.timeStamp,removeEventListener("visibilitychange",e,!0))}),!0);o(),self.webVitals={firstInputPolyfill:function(e){i.push(e),u()},resetFirstInputPolyfill:o,get firstHiddenTime(){return p}}}();
            </script><script>window.dataLayer = window.dataLayer || [];window.dataLayer.push({"platform":"gatsby"}); (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= 'https://www.googletagmanager.com/gtm.js?id='+i+dl+'';f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer', 'G-68VZX216JS');</script><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><title data-react-helmet="true">Building a location aware web app with GeoDjango | Matthew Daly</title><link data-react-helmet="true" href="https://matthewdaly.co.uk/blog/2016/03/26/building-a-location-aware-web-app-with-geodjango/" rel="canonical"/><link data-react-helmet="true" href="https://twitter.com/mattbd" rel="me"/><link data-react-helmet="true" href="https://github.com/matthewbdaly" rel="me"/><link data-react-helmet="true" href="https://mstdn.social/@matthewbdaly" rel="me"/><link data-react-helmet="true" href="mailto:matthew@matthewdaly.co.uk" rel="me"/><link data-react-helmet="true" href="/key.pub" rel="pgpkey"/><link data-react-helmet="true" href="https://webmention.io/matthewdaly.co.uk/xmlrpc" rel="pingback"/><link data-react-helmet="true" href="https://webmention.io/matthewdaly.co.uk/webmention" rel="webmention"/><link data-react-helmet="true" rel="authorization_endpoint" href="https://indieauth.com/auth"/><link data-react-helmet="true" rel="token_endpoint" href="https://tokens.indieauth.com/token"/><link data-react-helmet="true" rel="openid.delegate" href="https://matthewdaly.co.uk"/><link data-react-helmet="true" rel="openid.server" href="https://openid.indieauth.com/openid"/><link data-react-helmet="true" rel="alternate" type="application/rss+xml" title="Matthew Daly - feed" href="/rss.xml"/><link data-react-helmet="true" rel="alternate" type="application/atom+xml" title="Matthew Daly - feed" href="/atom.xml"/><link data-react-helmet="true" rel="alternate" type="application/feed+json" title="Matthew Daly - feed" href="/feed.json"/><link rel="sitemap" type="application/xml" href="/sitemap/sitemap-index.xml"/><link rel="icon" href="/favicon-32x32.png?v=53aa06cf17e4239d0dba6ffd09854e02" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=53aa06cf17e4239d0dba6ffd09854e02"/></head><body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=G-68VZX216JS" height="0" width="0" style="display: none; visibility: hidden" aria-hidden="true"></iframe></noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="flex flex-col min-h-screen pb-16 font-sans text-lg antialiased text-gray-800 bg-gray-50 dark:text-gray-100 dark:bg-gray-700 leading-6"><div class="w-full h-2 bg-gradient-to-r from-green-400 via-blue-500 to-purple-500"></div><nav class="w-full p-4 mx-auto lowercase md:w-2/3"><h1 class="block float-none py-4 text-4xl text-center lg:float-left lg:text-left"><a href="/">Matthew Daly</a></h1><ul class="py-2 text-center lg:float-right md:block lg:text-left"><li class="inline-block pr py-2 mr-8 lg:mt-4 text-sm text-gray-900 dark:text-gray-200 border-b-4 border-transparent hover:border-green-400 transition-colors duration-500"><a href="/blog/archives">Archives</a></li><li class="inline-block pr py-2 mr-8 lg:mt-4 text-sm text-gray-900 dark:text-gray-200 border-b-4 border-transparent hover:border-green-400 transition-colors duration-500"><a href="/about">About</a></li><li class="inline-block pr py-2 mr-8 lg:mt-4 text-sm text-gray-900 dark:text-gray-200 border-b-4 border-transparent hover:border-green-400 transition-colors duration-500"><a href="/uses">Uses</a></li><li class="inline-block pr py-2 mr-8 lg:mt-4 text-sm text-gray-900 dark:text-gray-200 border-b-4 border-transparent hover:border-green-400 transition-colors duration-500"><a href="/posts/1">Blog</a></li><li class="inline-block pr py-2 mr-8 lg:mt-4 text-sm text-gray-900 dark:text-gray-200 border-b-4 border-transparent hover:border-green-400 transition-colors duration-500"><a href="/blog/categories">Categories</a></li><li class="inline-block pr py-2 mr-8 lg:mt-4 text-sm text-gray-900 dark:text-gray-200 border-b-4 border-transparent hover:border-green-400 transition-colors duration-500"><a href="/search">Search</a></li></ul></nav><div class="w-full h-4 clear"></div><main class="flex-grow w-full p-4 mx-auto md:w-2/3"><article class="h-entry"><header><h2 class="py-4 text-2xl font-bold e-content p-name"><a class="u-url" href="https://matthewdaly.co.uk/blog/2016/03/26/building-a-location-aware-web-app-with-geodjango/">Building a location aware web app with GeoDjango</a></h2><p class="my-4 text-lg font-semibold">Published by <a href="/" rel="author">Matthew Daly</a> at <!-- -->26th March 2016 9:30 pm</p><time class="hidden dt-published">2016-03-26T21:30:29+00:00</time></header><section><p class="py-2">PostgreSQL has excellent support for geographical data thanks to the PostGIS extension, and Django allows you to take full advantage of it thanks to GeoDjango. In this tutorial, I&#x27;ll show you how to use GeoDjango to build a web app that allows users to search for gigs and events near them.</p><h2 class="py-4 text-2xl font-bold">Requirements</h2><p class="py-2">I&#x27;ve made the jump to Python 3, and if you haven&#x27;t done so yet, I highly recommend it - it&#x27;s not hard, and there&#x27;s very few modules left that haven&#x27;t been ported across. As such, this tutorial assumes you&#x27;re using Python 3. You&#x27;ll also need to have Git, PostgreSQL and PostGIS installed - I&#x27;ll leave the details of doing so up to you as it varies by platform, but you can generally do so easily with a package manager on most Linux distros. On Mac OS X I recommend using Homebrew. If you&#x27;re on Windows I think your best bet is probably to use a Vagrant VM.</p><p class="py-2">We&#x27;ll be using Django 1.9 - if by the time you read this a newer version of Django is out, it&#x27;s quite possible that some things may have changed and you&#x27;ll need to work around any problems caused. Generally search engines are the best place to look for this, and I&#x27;ll endeavour to keep the resulting Github repository as up to date as I can, so try those if you get stuck.</p><h2 class="py-4 text-2xl font-bold">Getting started</h2><p class="py-2">First of all, let&#x27;s create our database. Make sure you&#x27;re running as a user that has the required privileges to create users and databases for PostgreSQL and run the following command:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style"></span><span class="token plain">$ createdb gigfinder</span></div></pre></div></pre><p class="py-2">This creates the database. Next, we create the user:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style"></span><span class="token plain">$ createuser -s giguser -P</span></div></pre></div></pre><p class="py-2">You&#x27;ll be prompted to enter a password for the new user. Next, we want to use the <code>psql</code> command-line client to interact with our new database:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style"></span><span class="token plain">$ psql gigfinder</span></div></pre></div></pre><p class="py-2">This connects to the database. Run these commands to set up access to the database and install the PostGIS extension:</p><pre><div class="gatsby-highlight" data-language="psql"><pre class="prism-code language-psql" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain"># GRANT ALL PRIVILEGES ON DATABASE gigfinder TO giguser;</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain"># CREATE EXTENSION postgis;</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain"># \q</span></div></pre></div></pre><p class="py-2">With our database set up, it&#x27;s time to start work on our project. Let&#x27;s create our virtualenv in a new folder:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style"></span><span class="token plain">$ pyvenv venv</span></div></pre></div></pre><p class="py-2">Then activate it:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style"></span><span class="token plain">$ </span><span class="token builtin class-name" style="color:#FAC863">source</span><span class="token plain"> venv/bin/activate</span></div></pre></div></pre><p class="py-2">Then we install Django, along with a few other production dependencies:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style"></span><span class="token plain">$ pip </span><span class="token function" style="color:#79b6f2">install</span><span class="token plain"> django-toolbelt</span></div></pre></div></pre><p class="py-2">And record our dependencies:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style"></span><span class="token plain">$ pip freeze </span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"> requirements.txt</span></div></pre></div></pre><p class="py-2">Next, we create our application skeleton:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style"></span><span class="token plain">$ django-admin.py startproject gigfinder </span><span class="token builtin class-name" style="color:#FAC863">.</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">We&#x27;ll also create a <code>.gitignore</code> file:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">venv/</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">.DS_Store</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">*.swp</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">node_modules/</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">*.pyc</span></div></pre></div></pre><p class="py-2">Let&#x27;s commit our changes:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ </span><span class="token function" style="color:#79b6f2">git</span><span class="token plain"> init</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">$ </span><span class="token function" style="color:#79b6f2">git</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">add</span><span class="token plain"> .gitignore requirements.txt manage.py gigfinder</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">$ </span><span class="token function" style="color:#79b6f2">git</span><span class="token plain"> commit -m </span><span class="token string" style="color:#8dc891">&#x27;Initial commit&#x27;</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Next, let&#x27;s create our first app, which we will call <code>gigs</code>:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style"></span><span class="token plain">$ python manage.py startapp gigs</span></div></pre></div></pre><p class="py-2">We need to add our new app to the <code>INSTALLED_APPS</code> setting. While we&#x27;re there we&#x27;ll also add GIS support and set up the database connection. First, add the required apps to <code>INSTALLED_APPS</code>:</p><pre><div class="gatsby-highlight" data-language="python"><pre class="prism-code language-python" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">INSTALLED_APPS </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">.</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">    </span><span class="token string" style="color:#8dc891">&#x27;django.contrib.gis&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">    </span><span class="token string" style="color:#8dc891">&#x27;gigs&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Next, configure the database:</p><pre><div class="gatsby-highlight" data-language="python"><pre class="prism-code language-python" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">DATABASES </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">    </span><span class="token string" style="color:#8dc891">&#x27;default&#x27;</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">         </span><span class="token string" style="color:#8dc891">&#x27;ENGINE&#x27;</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;django.contrib.gis.db.backends.postgis&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">         </span><span class="token string" style="color:#8dc891">&#x27;NAME&#x27;</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;gigfinder&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">         </span><span class="token string" style="color:#8dc891">&#x27;USER&#x27;</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;giguser&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">         </span><span class="token string" style="color:#8dc891">&#x27;PASSWORD&#x27;</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;password&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Let&#x27;s run the migrations:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ python manage.py migrate</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">Operations to perform:</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">  Apply all migrations: sessions, contenttypes, admin, auth</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">Running migrations:</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">  Rendering model states</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">. DONE</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">  Applying contenttypes.0001_initial</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">. OK</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">  Applying auth.0001_initial</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">. OK</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain">  Applying admin.0001_initial</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">. OK</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">  Applying admin.0002_logentry_remove_auto_add</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">. OK</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain">  Applying contenttypes.0002_remove_content_type_name</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">. OK</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain">  Applying auth.0002_alter_permission_name_max_length</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">. OK</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain">  Applying auth.0003_alter_user_email_max_length</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">. OK</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain">  Applying auth.0004_alter_user_username_opts</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">. OK</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain">  Applying auth.0005_alter_user_last_login_null</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">. OK</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain">  Applying auth.0006_require_contenttypes_0002</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">. OK</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token plain">  Applying auth.0007_alter_validators_add_error_messages</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">. OK</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token plain">  Applying sessions.0001_initial</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">. OK</span></div></pre></div></pre><p class="py-2">And create our superuser account:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style"></span><span class="token plain">$ python manage.py createsuperuser</span></div></pre></div></pre><p class="py-2">Now, we&#x27;ll commit our changes:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ </span><span class="token function" style="color:#79b6f2">git</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">add</span><span class="token plain"> gigfinder/ gigs/</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">$ </span><span class="token function" style="color:#79b6f2">git</span><span class="token plain"> commit -m </span><span class="token string" style="color:#8dc891">&#x27;Created gigs app&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">[</span><span class="token plain">master e72a846</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"> Created gigs app</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">8</span><span class="token plain"> files changed, </span><span class="token number" style="color:#5a9bcf">24</span><span class="token plain"> insertions</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">+</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain">, </span><span class="token number" style="color:#5a9bcf">3</span><span class="token plain"> deletions</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">-</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain"> create mode </span><span class="token number" style="color:#5a9bcf">100644</span><span class="token plain"> gigs/__init__.py</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain"> create mode </span><span class="token number" style="color:#5a9bcf">100644</span><span class="token plain"> gigs/admin.py</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain"> create mode </span><span class="token number" style="color:#5a9bcf">100644</span><span class="token plain"> gigs/apps.py</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain"> create mode </span><span class="token number" style="color:#5a9bcf">100644</span><span class="token plain"> gigs/migrations/__init__.py</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain"> create mode </span><span class="token number" style="color:#5a9bcf">100644</span><span class="token plain"> gigs/models.py</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain"> create mode </span><span class="token number" style="color:#5a9bcf">100644</span><span class="token plain"> gigs/tests.py</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain"> create mode </span><span class="token number" style="color:#5a9bcf">100644</span><span class="token plain"> gigs/views.py</span></div></pre></div></pre><h2 class="py-4 text-2xl font-bold">Our first model</h2><p class="py-2">At this point, it&#x27;s worth thinking about the models we plan for our app to have. First we&#x27;ll have a <code>Venue</code> model that contains details of an individual venue, which will include a name and a geographical location. We&#x27;ll also have an <code>Event</code> model that will represent an individual gig or event at a venue, and will include a name, date/time and a venue as a foreign key.</p><p class="py-2">Before we start writing our first model, we need to write a test for it, but we also need to be able to create objects easily in our tests. We also want to be able to easily examine our objects, so we&#x27;ll install iPDB and Factory Boy:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ pip </span><span class="token function" style="color:#79b6f2">install</span><span class="token plain"> ipdb factory-boy</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">$ pip freeze </span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"> requirements.txt</span></div></pre></div></pre><p class="py-2">Next, we write a test for the <code>Venue</code> model:</p><pre><div class="gatsby-highlight" data-language="python"><pre class="prism-code language-python" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">test </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> TestCase</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> gigs</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">models </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> Venue</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> factory</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">fuzzy </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> BaseFuzzyAttribute</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">contrib</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">gis</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">geos </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> Point</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> factory</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">django</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> random</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">FuzzyPoint</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">BaseFuzzyAttribute</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">def</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">fuzz</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> Point</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">random</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">uniform</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token operator" style="color:#d7deea">-</span><span class="token number" style="color:#5a9bcf">180.0</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">180.0</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain">                     random</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">uniform</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token operator" style="color:#d7deea">-</span><span class="token number" style="color:#5a9bcf">90.0</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">90.0</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain"></span><span class="token comment" style="color:#999999"># Factories for tests</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">VenueFactory</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">factory</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">DjangoModelFactory</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">Meta</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain">        model </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> Venue</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token plain">        django_get_or_create </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token plain">            </span><span class="token string" style="color:#8dc891">&#x27;name&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token plain">            </span><span class="token string" style="color:#8dc891">&#x27;location&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token plain">        </span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">21</span><span class="token plain">    name </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;Wembley Arena&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">22</span><span class="token plain">    location </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> FuzzyPoint</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">23</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">24</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">VenueTest</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">TestCase</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">25</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">def</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">test_create_venue</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">26</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Create the venue</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">27</span><span class="token plain">        venue </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> VenueFactory</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">28</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">29</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check we can find it</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">30</span><span class="token plain">        all_venues </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> Venue</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">objects</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token builtin" style="color:#D8DEE9">all</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">31</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEqual</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token builtin" style="color:#D8DEE9">len</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">all_venues</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">1</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">32</span><span class="token plain">        only_venue </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> all_venues</span><span class="token punctuation" style="color:#8dc891">[</span><span class="token number" style="color:#5a9bcf">0</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">33</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEqual</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">only_venue</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> venue</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">34</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">35</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check attributes</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">36</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEqual</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">only_venue</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">name</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;Wembley Arena&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Note that we randomly generate our location - this is done as suggested in <a href="http://stackoverflow.com/questions/32828890/using-factory-boy-with-geodjango-pointfields" class="border-b-2 border-green-400">this Stack Overflow post</a>.</p><p class="py-2">Now, running our tests brings up an expected error:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ python manage.py </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> gigs</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">Creating </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> database </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> </span><span class="token builtin class-name" style="color:#FAC863">alias</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;default&#x27;</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">E</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain"></span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">ERROR: gigs.tests </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">unittest.loader._FailedTest</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">----------------------------------------------------------------------</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">ImportError: Failed to </span><span class="token function" style="color:#79b6f2">import</span><span class="token plain"> </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> module: gigs.tests</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain">Traceback </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">most recent call last</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain">:</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">  File </span><span class="token string" style="color:#8dc891">&quot;/usr/local/Cellar/python3/3.5.1/Frameworks/Python.framework/Versions/3.5/lib/python3.5/unittest/loader.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:#5a9bcf">428</span><span class="token plain">, </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> _find_test_path</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain">    module </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> self._get_module_from_name</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">name</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain">  File </span><span class="token string" style="color:#8dc891">&quot;/usr/local/Cellar/python3/3.5.1/Frameworks/Python.framework/Versions/3.5/lib/python3.5/unittest/loader.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:#5a9bcf">369</span><span class="token plain">, </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> _get_module_from_name</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain">    __import__</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">name</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain">  File </span><span class="token string" style="color:#8dc891">&quot;/Users/matthewdaly/Projects/gigfinder/gigs/tests.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:#5a9bcf">2</span><span class="token plain">, </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">module</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain">    from gigs.models </span><span class="token function" style="color:#79b6f2">import</span><span class="token plain"> Venue</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain">ImportError: cannot </span><span class="token function" style="color:#79b6f2">import</span><span class="token plain"> name </span><span class="token string" style="color:#8dc891">&#x27;Venue&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token plain">----------------------------------------------------------------------</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token plain">Ran </span><span class="token number" style="color:#5a9bcf">1</span><span class="token plain"> </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">0</span><span class="token plain">.001s</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">21</span><span class="token plain">FAILED </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">errors</span><span class="token operator" style="color:#d7deea">=</span><span class="token number" style="color:#5a9bcf">1</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">22</span><span class="token plain">Destroying </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> database </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> </span><span class="token builtin class-name" style="color:#FAC863">alias</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;default&#x27;</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div></pre></div></pre><p class="py-2">Let&#x27;s create our <code>Venue</code> model in <code>gigs/models.py</code>:</p><pre><div class="gatsby-highlight" data-language="python"><pre class="prism-code language-python" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">contrib</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">gis</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">db </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> models</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">Venue</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">models</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">Model</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#8dc891">&quot;&quot;&quot;</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token triple-quoted-string string" style="color:#8dc891">    Model for a venue</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token triple-quoted-string string" style="color:#8dc891">    &quot;&quot;&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">pass</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">For now, we&#x27;re just creating a simple dummy model. Note that we import <code>models</code> from <code>django.contrib.gis.db</code> instead of the usual place - this gives us access to the additional geographical fields.</p><p class="py-2">If we run our tests again we get an error:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ python manage.py </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> gigs</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">Creating </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> database </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> </span><span class="token builtin class-name" style="color:#FAC863">alias</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;default&#x27;</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">Traceback </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">most recent call last</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain">:</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">  File </span><span class="token string" style="color:#8dc891">&quot;/Users/matthewdaly/Projects/gigfinder/venv/lib/python3.5/site-packages/django/db/backends/utils.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:#5a9bcf">64</span><span class="token plain">, </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> execute</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">    </span><span class="token builtin class-name" style="color:#FAC863">return</span><span class="token plain"> self.cursor.execute</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">sql, params</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">psycopg2.ProgrammingError: relation </span><span class="token string" style="color:#8dc891">&quot;gigs_venue&quot;</span><span class="token plain"> does not exist</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">LINE </span><span class="token number" style="color:#5a9bcf">1</span><span class="token plain">: SELECT </span><span class="token string" style="color:#8dc891">&quot;gigs_venue&quot;</span><span class="token builtin class-name" style="color:#FAC863">.</span><span class="token string" style="color:#8dc891">&quot;id&quot;</span><span class="token plain"> FROM </span><span class="token string" style="color:#8dc891">&quot;gigs_venue&quot;</span><span class="token plain"> ORDER BY </span><span class="token string" style="color:#8dc891">&quot;gigs_ve...</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token string" style="color:#8dc891">                                      ^</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token string" style="display:inline-block;color:#8dc891">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token string" style="display:inline-block;color:#8dc891">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token string" style="color:#8dc891">The above exception was the direct cause of the following exception:</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token string" style="display:inline-block;color:#8dc891">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token string" style="color:#8dc891">Traceback (most recent call last):</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token string" style="color:#8dc891">  File &quot;</span><span class="token plain">manage.py</span><span class="token string" style="color:#8dc891">&quot;, line 10, in &lt;module&gt;</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token string" style="color:#8dc891">    execute_from_command_line(sys.argv)</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token string" style="color:#8dc891">  File &quot;</span><span class="token plain">/Users/matthewdaly/Projects/gigfinder/venv/lib/python3.5/site-packages/django/core/management/__init__.py</span><span class="token string" style="color:#8dc891">&quot;, line 353, in execute_from_command_line</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token string" style="color:#8dc891">    utility.execute()</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token string" style="color:#8dc891">  File &quot;</span><span class="token plain">/Users/matthewdaly/Projects/gigfinder/venv/lib/python3.5/site-packages/django/core/management/__init__.py</span><span class="token string" style="color:#8dc891">&quot;, line 345, in execute</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token string" style="color:#8dc891">    self.fetch_command(subcommand).run_from_argv(self.argv)</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token string" style="color:#8dc891">  File &quot;</span><span class="token plain">/Users/matthewdaly/Projects/gigfinder/venv/lib/python3.5/site-packages/django/core/management/commands/test.py</span><span class="token string" style="color:#8dc891">&quot;, line 30, in run_from_argv</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">21</span><span class="token string" style="color:#8dc891">    super(Command, self).run_from_argv(argv)</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">22</span><span class="token string" style="color:#8dc891">  File &quot;</span><span class="token plain">/Users/matthewdaly/Projects/gigfinder/venv/lib/python3.5/site-packages/django/core/management/base.py</span><span class="token string" style="color:#8dc891">&quot;, line 348, in run_from_argv</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">23</span><span class="token string" style="color:#8dc891">    self.execute(*args, **cmd_options)</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">24</span><span class="token string" style="color:#8dc891">  File &quot;</span><span class="token plain">/Users/matthewdaly/Projects/gigfinder/venv/lib/python3.5/site-packages/django/core/management/commands/test.py</span><span class="token string" style="color:#8dc891">&quot;, line 74, in execute</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">25</span><span class="token string" style="color:#8dc891">    super(Command, self).execute(*args, **options)</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">26</span><span class="token string" style="color:#8dc891">  File &quot;</span><span class="token plain">/Users/matthewdaly/Projects/gigfinder/venv/lib/python3.5/site-packages/django/core/management/base.py</span><span class="token string" style="color:#8dc891">&quot;, line 399, in execute</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">27</span><span class="token string" style="color:#8dc891">    output = self.handle(*args, **options)</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">28</span><span class="token string" style="color:#8dc891">  File &quot;</span><span class="token plain">/Users/matthewdaly/Projects/gigfinder/venv/lib/python3.5/site-packages/django/core/management/commands/test.py</span><span class="token string" style="color:#8dc891">&quot;, line 90, in handle</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">29</span><span class="token string" style="color:#8dc891">    failures = test_runner.run_tests(test_labels)</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">30</span><span class="token string" style="color:#8dc891">  File &quot;</span><span class="token plain">/Users/matthewdaly/Projects/gigfinder/venv/lib/python3.5/site-packages/django/test/runner.py</span><span class="token string" style="color:#8dc891">&quot;, line 532, in run_tests</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">31</span><span class="token string" style="color:#8dc891">    old_config = self.setup_databases()</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">32</span><span class="token string" style="color:#8dc891">  File &quot;</span><span class="token plain">/Users/matthewdaly/Projects/gigfinder/venv/lib/python3.5/site-packages/django/test/runner.py</span><span class="token string" style="color:#8dc891">&quot;, line 482, in setup_databases</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">33</span><span class="token string" style="color:#8dc891">    self.parallel, **kwargs</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">34</span><span class="token string" style="color:#8dc891">  File &quot;</span><span class="token plain">/Users/matthewdaly/Projects/gigfinder/venv/lib/python3.5/site-packages/django/test/runner.py</span><span class="token string" style="color:#8dc891">&quot;, line 726, in setup_databases</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">35</span><span class="token string" style="color:#8dc891">    serialize=connection.settings_dict.get(&quot;</span><span class="token plain">TEST</span><span class="token string" style="color:#8dc891">&quot;, {}).get(&quot;</span><span class="token plain">SERIALIZE</span><span class="token string" style="color:#8dc891">&quot;, True),</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">36</span><span class="token string" style="color:#8dc891">  File &quot;</span><span class="token plain">/Users/matthewdaly/Projects/gigfinder/venv/lib/python3.5/site-packages/django/db/backends/base/creation.py</span><span class="token string" style="color:#8dc891">&quot;, line 78, in create_test_db</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">37</span><span class="token string" style="color:#8dc891">    self.connection._test_serialized_contents = self.serialize_db_to_string()</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">38</span><span class="token string" style="color:#8dc891">  File &quot;</span><span class="token plain">/Users/matthewdaly/Projects/gigfinder/venv/lib/python3.5/site-packages/django/db/backends/base/creation.py</span><span class="token string" style="color:#8dc891">&quot;, line 122, in serialize_db_to_string</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">39</span><span class="token string" style="color:#8dc891">    serializers.serialize(&quot;</span><span class="token plain">json</span><span class="token string" style="color:#8dc891">&quot;, get_objects(), indent=None, stream=out)</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">40</span><span class="token string" style="color:#8dc891">  File &quot;</span><span class="token plain">/Users/matthewdaly/Projects/gigfinder/venv/lib/python3.5/site-packages/django/core/serializers/__init__.py</span><span class="token string" style="color:#8dc891">&quot;, line 129, in serialize</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">41</span><span class="token string" style="color:#8dc891">    s.serialize(queryset, **options)</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">42</span><span class="token string" style="color:#8dc891">  File &quot;</span><span class="token plain">/Users/matthewdaly/Projects/gigfinder/venv/lib/python3.5/site-packages/django/core/serializers/base.py</span><span class="token string" style="color:#8dc891">&quot;, line 79, in serialize</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">43</span><span class="token string" style="color:#8dc891">    for count, obj in enumerate(queryset, start=1):</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">44</span><span class="token string" style="color:#8dc891">  File &quot;</span><span class="token plain">/Users/matthewdaly/Projects/gigfinder/venv/lib/python3.5/site-packages/django/db/backends/base/creation.py</span><span class="token string" style="color:#8dc891">&quot;, line 118, in get_objects</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">45</span><span class="token string" style="color:#8dc891">    for obj in queryset.iterator():</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">46</span><span class="token string" style="color:#8dc891">  File &quot;</span><span class="token plain">/Users/matthewdaly/Projects/gigfinder/venv/lib/python3.5/site-packages/django/db/models/query.py</span><span class="token string" style="color:#8dc891">&quot;, line 52, in __iter__</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">47</span><span class="token string" style="color:#8dc891">    results = compiler.execute_sql()</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">48</span><span class="token string" style="color:#8dc891">  File &quot;</span><span class="token plain">/Users/matthewdaly/Projects/gigfinder/venv/lib/python3.5/site-packages/django/db/models/sql/compiler.py</span><span class="token string" style="color:#8dc891">&quot;, line 848, in execute_sql</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">49</span><span class="token string" style="color:#8dc891">    cursor.execute(sql, params)</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">50</span><span class="token string" style="color:#8dc891">  File &quot;</span><span class="token plain">/Users/matthewdaly/Projects/gigfinder/venv/lib/python3.5/site-packages/django/db/backends/utils.py</span><span class="token string" style="color:#8dc891">&quot;, line 64, in execute</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">51</span><span class="token string" style="color:#8dc891">    return self.cursor.execute(sql, params)</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">52</span><span class="token string" style="color:#8dc891">  File &quot;</span><span class="token plain">/Users/matthewdaly/Projects/gigfinder/venv/lib/python3.5/site-packages/django/db/utils.py</span><span class="token string" style="color:#8dc891">&quot;, line 95, in __exit__</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">53</span><span class="token string" style="color:#8dc891">    six.reraise(dj_exc_type, dj_exc_value, traceback)</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">54</span><span class="token string" style="color:#8dc891">  File &quot;</span><span class="token plain">/Users/matthewdaly/Projects/gigfinder/venv/lib/python3.5/site-packages/django/utils/six.py</span><span class="token string" style="color:#8dc891">&quot;, line 685, in reraise</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">55</span><span class="token string" style="color:#8dc891">    raise value.with_traceback(tb)</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">56</span><span class="token string" style="color:#8dc891">  File &quot;</span><span class="token plain">/Users/matthewdaly/Projects/gigfinder/venv/lib/python3.5/site-packages/django/db/backends/utils.py</span><span class="token string" style="color:#8dc891">&quot;, line 64, in execute</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">57</span><span class="token string" style="color:#8dc891">    return self.cursor.execute(sql, params)</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">58</span><span class="token string" style="color:#8dc891">django.db.utils.ProgrammingError: relation &quot;</span><span class="token plain">gigs_venue</span><span class="token string" style="color:#8dc891">&quot; does not exist</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">59</span><span class="token string" style="color:#8dc891">LINE 1: SELECT &quot;</span><span class="token plain">gigs_venue</span><span class="token string" style="color:#8dc891">&quot;.&quot;</span><span class="token function" style="color:#79b6f2">id</span><span class="token string" style="color:#8dc891">&quot; FROM &quot;</span><span class="token plain">gigs_venue</span><span class="token string" style="color:#8dc891">&quot; ORDER BY &quot;</span><span class="token plain">gigs_ve</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div></pre></div></pre><p class="py-2">Let&#x27;s update our model:</p><pre><div class="gatsby-highlight" data-language="python"><pre class="prism-code language-python" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">contrib</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">gis</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">db </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> models</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">Venue</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">models</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">Model</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#8dc891">&quot;&quot;&quot;</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token triple-quoted-string string" style="color:#8dc891">    Model for a venue</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token triple-quoted-string string" style="color:#8dc891">    &quot;&quot;&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">    name </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> models</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">CharField</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">max_length</span><span class="token operator" style="color:#d7deea">=</span><span class="token number" style="color:#5a9bcf">200</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain">    location </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> models</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">PointField</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Then create our migration:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ python manage.py makemigrations</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">Migrations </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;gigs&#x27;</span><span class="token builtin class-name" style="color:#FAC863">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">  0001_initial.py:</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">    - Create model Venue</span></div></pre></div></pre><p class="py-2">And run it:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ python manage.py migrate</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">Operations to perform:</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">  Apply all migrations: gigs, sessions, contenttypes, auth, admin</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">Running migrations:</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">  Rendering model states</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">. DONE</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">  Applying gigs.0001_initial</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">. OK</span></div></pre></div></pre><p class="py-2">Then if we run our tests:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ python manage.py </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> gigs</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">Creating </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> database </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> </span><span class="token builtin class-name" style="color:#FAC863">alias</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;default&#x27;</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain"></span><span class="token builtin class-name" style="color:#FAC863">.</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">----------------------------------------------------------------------</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">Ran </span><span class="token number" style="color:#5a9bcf">1</span><span class="token plain"> </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">0</span><span class="token plain">.362s</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">OK</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain">Destroying </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> database </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> </span><span class="token builtin class-name" style="color:#FAC863">alias</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;default&#x27;</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div></pre></div></pre><p class="py-2">They should pass. Note that Django may complain about needing to delete the test database before running the tests, but this should not cause any problems. Let&#x27;s commit our changes:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ </span><span class="token function" style="color:#79b6f2">git</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">add</span><span class="token plain"> requirements.txt gigs/</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">$ </span><span class="token function" style="color:#79b6f2">git</span><span class="token plain"> commit -m </span><span class="token string" style="color:#8dc891">&#x27;Venue model in place&#x27;</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">With our venue done, let&#x27;s turn to our <code>Event</code> model. Amend <code>gigs/tests.py</code> as follows:</p><pre><div class="gatsby-highlight" data-language="python"><pre class="prism-code language-python" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">test </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> TestCase</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> gigs</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">models </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> Venue</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> Event</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> factory</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">fuzzy </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> BaseFuzzyAttribute</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">contrib</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">gis</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">geos </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> Point</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> factory</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">django</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> random</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">utils </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> timezone</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">FuzzyPoint</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">BaseFuzzyAttribute</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">def</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">fuzz</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> Point</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">random</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">uniform</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token operator" style="color:#d7deea">-</span><span class="token number" style="color:#5a9bcf">180.0</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">180.0</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain">                     random</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">uniform</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token operator" style="color:#d7deea">-</span><span class="token number" style="color:#5a9bcf">90.0</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">90.0</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain"></span><span class="token comment" style="color:#999999"># Factories for tests</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">VenueFactory</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">factory</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">DjangoModelFactory</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">Meta</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token plain">        model </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> Venue</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token plain">        django_get_or_create </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token plain">            </span><span class="token string" style="color:#8dc891">&#x27;name&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token plain">            </span><span class="token string" style="color:#8dc891">&#x27;location&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token plain">        </span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">21</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">22</span><span class="token plain">    name </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;Wembley Arena&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">23</span><span class="token plain">    location </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> FuzzyPoint</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">24</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">25</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">EventFactory</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">factory</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">DjangoModelFactory</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">26</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">Meta</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">27</span><span class="token plain">        model </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> Event</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">28</span><span class="token plain">        django_get_or_create </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">29</span><span class="token plain">            </span><span class="token string" style="color:#8dc891">&#x27;name&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">30</span><span class="token plain">            </span><span class="token string" style="color:#8dc891">&#x27;venue&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">31</span><span class="token plain">            </span><span class="token string" style="color:#8dc891">&#x27;datetime&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">32</span><span class="token plain">        </span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">33</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">34</span><span class="token plain">    name </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;Queens of the Stone Age&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">35</span><span class="token plain">    datetime </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> timezone</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">now</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">36</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">37</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">VenueTest</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">TestCase</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">38</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">def</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">test_create_venue</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">39</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Create the venue</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">40</span><span class="token plain">        venue </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> VenueFactory</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">41</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">42</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check we can find it</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">43</span><span class="token plain">        all_venues </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> Venue</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">objects</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token builtin" style="color:#D8DEE9">all</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">44</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEqual</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token builtin" style="color:#D8DEE9">len</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">all_venues</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">1</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">45</span><span class="token plain">        only_venue </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> all_venues</span><span class="token punctuation" style="color:#8dc891">[</span><span class="token number" style="color:#5a9bcf">0</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">46</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEqual</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">only_venue</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> venue</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">47</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">48</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check attributes</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">49</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEqual</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">only_venue</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">name</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;Wembley Arena&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">50</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">51</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">52</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">EventTest</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">TestCase</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">53</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">def</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">test_create_event</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">54</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Create the venue</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">55</span><span class="token plain">        venue </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> VenueFactory</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">56</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">57</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Create the event</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">58</span><span class="token plain">        event </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> EventFactory</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">venue</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">venue</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">59</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">60</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check we can find it</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">61</span><span class="token plain">        all_events </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> Event</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">objects</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token builtin" style="color:#D8DEE9">all</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">62</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEqual</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token builtin" style="color:#D8DEE9">len</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">all_events</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">1</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">63</span><span class="token plain">        only_event </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> all_events</span><span class="token punctuation" style="color:#8dc891">[</span><span class="token number" style="color:#5a9bcf">0</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">64</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEqual</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">only_event</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> event</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">65</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">66</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check attributes</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">67</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEqual</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">only_event</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">name</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;Queens of the Stone Age&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">68</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEqual</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">only_event</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">venue</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">name</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;Wembley Arena&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Then we run our tests:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ python manage.py </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> gigs</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">Creating </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> database </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> </span><span class="token builtin class-name" style="color:#FAC863">alias</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;default&#x27;</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">E</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain"></span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">ERROR: gigs.tests </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">unittest.loader._FailedTest</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">----------------------------------------------------------------------</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">ImportError: Failed to </span><span class="token function" style="color:#79b6f2">import</span><span class="token plain"> </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> module: gigs.tests</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain">Traceback </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">most recent call last</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain">:</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">  File </span><span class="token string" style="color:#8dc891">&quot;/usr/local/Cellar/python3/3.5.1/Frameworks/Python.framework/Versions/3.5/lib/python3.5/unittest/loader.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:#5a9bcf">428</span><span class="token plain">, </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> _find_test_path</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain">    module </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> self._get_module_from_name</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">name</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain">  File </span><span class="token string" style="color:#8dc891">&quot;/usr/local/Cellar/python3/3.5.1/Frameworks/Python.framework/Versions/3.5/lib/python3.5/unittest/loader.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:#5a9bcf">369</span><span class="token plain">, </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> _get_module_from_name</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain">    __import__</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">name</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain">  File </span><span class="token string" style="color:#8dc891">&quot;/Users/matthewdaly/Projects/gigfinder/gigs/tests.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:#5a9bcf">2</span><span class="token plain">, </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">module</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain">    from gigs.models </span><span class="token function" style="color:#79b6f2">import</span><span class="token plain"> Venue, Event</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain">ImportError: cannot </span><span class="token function" style="color:#79b6f2">import</span><span class="token plain"> name </span><span class="token string" style="color:#8dc891">&#x27;Event&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token plain">----------------------------------------------------------------------</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token plain">Ran </span><span class="token number" style="color:#5a9bcf">1</span><span class="token plain"> </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">0</span><span class="token plain">.001s</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">21</span><span class="token plain">FAILED </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">errors</span><span class="token operator" style="color:#d7deea">=</span><span class="token number" style="color:#5a9bcf">1</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">22</span><span class="token plain">Destroying </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> database </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> </span><span class="token builtin class-name" style="color:#FAC863">alias</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;default&#x27;</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div></pre></div></pre><p class="py-2">As expected, this fails, so create an empty <code>Event</code> model in <code>gigs/models.py</code>:</p><pre><div class="gatsby-highlight" data-language="python"><pre class="prism-code language-python" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">Event</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">models</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">Model</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#8dc891">&quot;&quot;&quot;</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token triple-quoted-string string" style="color:#8dc891">    Model for an event</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token triple-quoted-string string" style="color:#8dc891">    &quot;&quot;&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">pass</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Running the tests now will raise an error due to the table not existing:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ python manage.py </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> gigs</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">Creating </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> database </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> </span><span class="token builtin class-name" style="color:#FAC863">alias</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;default&#x27;</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">Traceback </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">most recent call last</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain">:</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">  File </span><span class="token string" style="color:#8dc891">&quot;/Users/matthewdaly/Projects/gigfinder/venv/lib/python3.5/site-packages/django/db/backends/utils.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:#5a9bcf">64</span><span class="token plain">, </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> execute</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">    </span><span class="token builtin class-name" style="color:#FAC863">return</span><span class="token plain"> self.cursor.execute</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">sql, params</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">psycopg2.ProgrammingError: relation </span><span class="token string" style="color:#8dc891">&quot;gigs_event&quot;</span><span class="token plain"> does not exist</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">LINE </span><span class="token number" style="color:#5a9bcf">1</span><span class="token plain">: SELECT </span><span class="token string" style="color:#8dc891">&quot;gigs_event&quot;</span><span class="token builtin class-name" style="color:#FAC863">.</span><span class="token string" style="color:#8dc891">&quot;id&quot;</span><span class="token plain"> FROM </span><span class="token string" style="color:#8dc891">&quot;gigs_event&quot;</span><span class="token plain"> ORDER BY </span><span class="token string" style="color:#8dc891">&quot;gigs_ev...</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token string" style="color:#8dc891">                                      ^</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token string" style="display:inline-block;color:#8dc891">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token string" style="display:inline-block;color:#8dc891">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token string" style="color:#8dc891">The above exception was the direct cause of the following exception:</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token string" style="display:inline-block;color:#8dc891">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token string" style="color:#8dc891">Traceback (most recent call last):</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token string" style="color:#8dc891">  File &quot;</span><span class="token plain">manage.py</span><span class="token string" style="color:#8dc891">&quot;, line 10, in &lt;module&gt;</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token string" style="color:#8dc891">    execute_from_command_line(sys.argv)</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token string" style="color:#8dc891">  File &quot;</span><span class="token plain">/Users/matthewdaly/Projects/gigfinder/venv/lib/python3.5/site-packages/django/core/management/__init__.py</span><span class="token string" style="color:#8dc891">&quot;, line 353, in execute_from_command_line</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token string" style="color:#8dc891">    utility.execute()</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token string" style="color:#8dc891">  File &quot;</span><span class="token plain">/Users/matthewdaly/Projects/gigfinder/venv/lib/python3.5/site-packages/django/core/management/__init__.py</span><span class="token string" style="color:#8dc891">&quot;, line 345, in execute</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token string" style="color:#8dc891">    self.fetch_command(subcommand).run_from_argv(self.argv)</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token string" style="color:#8dc891">  File &quot;</span><span class="token plain">/Users/matthewdaly/Projects/gigfinder/venv/lib/python3.5/site-packages/django/core/management/commands/test.py</span><span class="token string" style="color:#8dc891">&quot;, line 30, in run_from_argv</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">21</span><span class="token string" style="color:#8dc891">    super(Command, self).run_from_argv(argv)</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">22</span><span class="token string" style="color:#8dc891">  File &quot;</span><span class="token plain">/Users/matthewdaly/Projects/gigfinder/venv/lib/python3.5/site-packages/django/core/management/base.py</span><span class="token string" style="color:#8dc891">&quot;, line 348, in run_from_argv</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">23</span><span class="token string" style="color:#8dc891">    self.execute(*args, **cmd_options)</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">24</span><span class="token string" style="color:#8dc891">  File &quot;</span><span class="token plain">/Users/matthewdaly/Projects/gigfinder/venv/lib/python3.5/site-packages/django/core/management/commands/test.py</span><span class="token string" style="color:#8dc891">&quot;, line 74, in execute</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">25</span><span class="token string" style="color:#8dc891">    super(Command, self).execute(*args, **options)</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">26</span><span class="token string" style="color:#8dc891">  File &quot;</span><span class="token plain">/Users/matthewdaly/Projects/gigfinder/venv/lib/python3.5/site-packages/django/core/management/base.py</span><span class="token string" style="color:#8dc891">&quot;, line 399, in execute</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">27</span><span class="token string" style="color:#8dc891">    output = self.handle(*args, **options)</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">28</span><span class="token string" style="color:#8dc891">  File &quot;</span><span class="token plain">/Users/matthewdaly/Projects/gigfinder/venv/lib/python3.5/site-packages/django/core/management/commands/test.py</span><span class="token string" style="color:#8dc891">&quot;, line 90, in handle</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">29</span><span class="token string" style="color:#8dc891">    failures = test_runner.run_tests(test_labels)</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">30</span><span class="token string" style="color:#8dc891">  File &quot;</span><span class="token plain">/Users/matthewdaly/Projects/gigfinder/venv/lib/python3.5/site-packages/django/test/runner.py</span><span class="token string" style="color:#8dc891">&quot;, line 532, in run_tests</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">31</span><span class="token string" style="color:#8dc891">    old_config = self.setup_databases()</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">32</span><span class="token string" style="color:#8dc891">  File &quot;</span><span class="token plain">/Users/matthewdaly/Projects/gigfinder/venv/lib/python3.5/site-packages/django/test/runner.py</span><span class="token string" style="color:#8dc891">&quot;, line 482, in setup_databases</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">33</span><span class="token string" style="color:#8dc891">    self.parallel, **kwargs</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">34</span><span class="token string" style="color:#8dc891">  File &quot;</span><span class="token plain">/Users/matthewdaly/Projects/gigfinder/venv/lib/python3.5/site-packages/django/test/runner.py</span><span class="token string" style="color:#8dc891">&quot;, line 726, in setup_databases</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">35</span><span class="token string" style="color:#8dc891">    serialize=connection.settings_dict.get(&quot;</span><span class="token plain">TEST</span><span class="token string" style="color:#8dc891">&quot;, {}).get(&quot;</span><span class="token plain">SERIALIZE</span><span class="token string" style="color:#8dc891">&quot;, True),</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">36</span><span class="token string" style="color:#8dc891">  File &quot;</span><span class="token plain">/Users/matthewdaly/Projects/gigfinder/venv/lib/python3.5/site-packages/django/db/backends/base/creation.py</span><span class="token string" style="color:#8dc891">&quot;, line 78, in create_test_db</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">37</span><span class="token string" style="color:#8dc891">    self.connection._test_serialized_contents = self.serialize_db_to_string()</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">38</span><span class="token string" style="color:#8dc891">  File &quot;</span><span class="token plain">/Users/matthewdaly/Projects/gigfinder/venv/lib/python3.5/site-packages/django/db/backends/base/creation.py</span><span class="token string" style="color:#8dc891">&quot;, line 122, in serialize_db_to_string</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">39</span><span class="token string" style="color:#8dc891">    serializers.serialize(&quot;</span><span class="token plain">json</span><span class="token string" style="color:#8dc891">&quot;, get_objects(), indent=None, stream=out)</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">40</span><span class="token string" style="color:#8dc891">  File &quot;</span><span class="token plain">/Users/matthewdaly/Projects/gigfinder/venv/lib/python3.5/site-packages/django/core/serializers/__init__.py</span><span class="token string" style="color:#8dc891">&quot;, line 129, in serialize</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">41</span><span class="token string" style="color:#8dc891">    s.serialize(queryset, **options)</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">42</span><span class="token string" style="color:#8dc891">  File &quot;</span><span class="token plain">/Users/matthewdaly/Projects/gigfinder/venv/lib/python3.5/site-packages/django/core/serializers/base.py</span><span class="token string" style="color:#8dc891">&quot;, line 79, in serialize</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">43</span><span class="token string" style="color:#8dc891">    for count, obj in enumerate(queryset, start=1):</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">44</span><span class="token string" style="color:#8dc891">  File &quot;</span><span class="token plain">/Users/matthewdaly/Projects/gigfinder/venv/lib/python3.5/site-packages/django/db/backends/base/creation.py</span><span class="token string" style="color:#8dc891">&quot;, line 118, in get_objects</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">45</span><span class="token string" style="color:#8dc891">    for obj in queryset.iterator():</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">46</span><span class="token string" style="color:#8dc891">  File &quot;</span><span class="token plain">/Users/matthewdaly/Projects/gigfinder/venv/lib/python3.5/site-packages/django/db/models/query.py</span><span class="token string" style="color:#8dc891">&quot;, line 52, in __iter__</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">47</span><span class="token string" style="color:#8dc891">    results = compiler.execute_sql()</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">48</span><span class="token string" style="color:#8dc891">  File &quot;</span><span class="token plain">/Users/matthewdaly/Projects/gigfinder/venv/lib/python3.5/site-packages/django/db/models/sql/compiler.py</span><span class="token string" style="color:#8dc891">&quot;, line 848, in execute_sql</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">49</span><span class="token string" style="color:#8dc891">    cursor.execute(sql, params)</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">50</span><span class="token string" style="color:#8dc891">  File &quot;</span><span class="token plain">/Users/matthewdaly/Projects/gigfinder/venv/lib/python3.5/site-packages/django/db/backends/utils.py</span><span class="token string" style="color:#8dc891">&quot;, line 64, in execute</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">51</span><span class="token string" style="color:#8dc891">    return self.cursor.execute(sql, params)</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">52</span><span class="token string" style="color:#8dc891">  File &quot;</span><span class="token plain">/Users/matthewdaly/Projects/gigfinder/venv/lib/python3.5/site-packages/django/db/utils.py</span><span class="token string" style="color:#8dc891">&quot;, line 95, in __exit__</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">53</span><span class="token string" style="color:#8dc891">    six.reraise(dj_exc_type, dj_exc_value, traceback)</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">54</span><span class="token string" style="color:#8dc891">  File &quot;</span><span class="token plain">/Users/matthewdaly/Projects/gigfinder/venv/lib/python3.5/site-packages/django/utils/six.py</span><span class="token string" style="color:#8dc891">&quot;, line 685, in reraise</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">55</span><span class="token string" style="color:#8dc891">    raise value.with_traceback(tb)</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">56</span><span class="token string" style="color:#8dc891">  File &quot;</span><span class="token plain">/Users/matthewdaly/Projects/gigfinder/venv/lib/python3.5/site-packages/django/db/backends/utils.py</span><span class="token string" style="color:#8dc891">&quot;, line 64, in execute</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">57</span><span class="token string" style="color:#8dc891">    return self.cursor.execute(sql, params)</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">58</span><span class="token string" style="color:#8dc891">django.db.utils.ProgrammingError: relation &quot;</span><span class="token plain">gigs_event</span><span class="token string" style="color:#8dc891">&quot; does not exist</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">59</span><span class="token string" style="color:#8dc891">LINE 1: SELECT &quot;</span><span class="token plain">gigs_event</span><span class="token string" style="color:#8dc891">&quot;.&quot;</span><span class="token function" style="color:#79b6f2">id</span><span class="token string" style="color:#8dc891">&quot; FROM &quot;</span><span class="token plain">gigs_event</span><span class="token string" style="color:#8dc891">&quot; ORDER BY &quot;</span><span class="token plain">gigs_ev</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div></pre></div></pre><p class="py-2">So let&#x27;s populate our model:</p><pre><div class="gatsby-highlight" data-language="python"><pre class="prism-code language-python" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">Event</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">models</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">Model</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#8dc891">&quot;&quot;&quot;</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token triple-quoted-string string" style="color:#8dc891">    Model for an event</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token triple-quoted-string string" style="color:#8dc891">    &quot;&quot;&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">    name </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> models</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">CharField</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">max_length</span><span class="token operator" style="color:#d7deea">=</span><span class="token number" style="color:#5a9bcf">200</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">    datetime </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> models</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">DateTimeField</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">    venue </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> models</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">ForeignKey</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">Venue</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">And create our migration:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ python manage.py makemigrations</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">Migrations </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;gigs&#x27;</span><span class="token builtin class-name" style="color:#FAC863">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">  0002_event.py:</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">    - Create model Event</span></div></pre></div></pre><p class="py-2">And run it:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ python manage.py migrate</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">Operations to perform:</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">  Apply all migrations: auth, admin, sessions, contenttypes, gigs</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">Running migrations:</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">  Rendering model states</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">. DONE</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">  Applying gigs.0002_event</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">. OK</span></div></pre></div></pre><p class="py-2">And run our tests:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ python manage.py </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> gigs</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">Creating </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> database </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> </span><span class="token builtin class-name" style="color:#FAC863">alias</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;default&#x27;</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">----------------------------------------------------------------------</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">Ran </span><span class="token number" style="color:#5a9bcf">2</span><span class="token plain"> tests </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">0</span><span class="token plain">.033s</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">OK</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain">Destroying </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> database </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> </span><span class="token builtin class-name" style="color:#FAC863">alias</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;default&#x27;</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div></pre></div></pre><p class="py-2">Again, you may be prompted to delete the test database, but this should not be an issue.</p><p class="py-2">With this done, let&#x27;s commit our changes:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ </span><span class="token function" style="color:#79b6f2">git</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">add</span><span class="token plain"> gigs</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">$ </span><span class="token function" style="color:#79b6f2">git</span><span class="token plain"> commit -m </span><span class="token string" style="color:#8dc891">&#x27;Added Event model&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">[</span><span class="token plain">master 47ba686</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"> Added Event model</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">3</span><span class="token plain"> files changed, </span><span class="token number" style="color:#5a9bcf">67</span><span class="token plain"> insertions</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">+</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain">, </span><span class="token number" style="color:#5a9bcf">1</span><span class="token plain"> deletion</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">-</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain"> create mode </span><span class="token number" style="color:#5a9bcf">100644</span><span class="token plain"> gigs/migrations/0002_event.py</span></div></pre></div></pre><h2 class="py-4 text-2xl font-bold">Setting up the admin</h2><p class="py-2">For an application like this, you&#x27;d expect the curators of the site to maintain the gigs and venues stored in the database, and that&#x27;s an obvious use case for the Django admin. So let&#x27;s set our models up to be available in the admin. Open up <code>gigs/admin.py</code> and amend it as follows:</p><pre><div class="gatsby-highlight" data-language="python"><pre class="prism-code language-python" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">contrib </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> admin</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> gigs</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">models </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> Venue</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> Event</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">admin</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">site</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">register</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">Venue</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">admin</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">site</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">register</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">Event</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Now, if you start up the dev server as usual with <code>python manage.py runserver</code> and visit <a href="http://127.0.0.1:8000/admin/" class="border-b-2 border-green-400">http://127.0.0.1:8000/admin/</a>, you can see that our <code>Event</code> and <code>Venue</code> models are now available. However, the string representations of them are pretty useless. Let&#x27;s fix that. First, we amend our tests:</p><pre><div class="gatsby-highlight" data-language="python"><pre class="prism-code language-python" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">test </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> TestCase</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> gigs</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">models </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> Venue</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> Event</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> factory</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">fuzzy </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> BaseFuzzyAttribute</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">contrib</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">gis</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">geos </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> Point</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> factory</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">django</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> random</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">utils </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> timezone</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">FuzzyPoint</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">BaseFuzzyAttribute</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">def</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">fuzz</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> Point</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">random</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">uniform</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token operator" style="color:#d7deea">-</span><span class="token number" style="color:#5a9bcf">180.0</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">180.0</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain">                     random</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">uniform</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token operator" style="color:#d7deea">-</span><span class="token number" style="color:#5a9bcf">90.0</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">90.0</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain"></span><span class="token comment" style="color:#999999"># Factories for tests</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">VenueFactory</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">factory</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">DjangoModelFactory</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">Meta</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token plain">        model </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> Venue</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token plain">        django_get_or_create </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token plain">            </span><span class="token string" style="color:#8dc891">&#x27;name&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token plain">            </span><span class="token string" style="color:#8dc891">&#x27;location&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token plain">        </span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">21</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">22</span><span class="token plain">    name </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;Wembley Arena&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">23</span><span class="token plain">    location </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> FuzzyPoint</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">24</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">25</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">EventFactory</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">factory</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">DjangoModelFactory</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">26</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">Meta</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">27</span><span class="token plain">        model </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> Event</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">28</span><span class="token plain">        django_get_or_create </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">29</span><span class="token plain">            </span><span class="token string" style="color:#8dc891">&#x27;name&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">30</span><span class="token plain">            </span><span class="token string" style="color:#8dc891">&#x27;venue&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">31</span><span class="token plain">            </span><span class="token string" style="color:#8dc891">&#x27;datetime&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">32</span><span class="token plain">        </span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">33</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">34</span><span class="token plain">    name </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;Queens of the Stone Age&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">35</span><span class="token plain">    datetime </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> timezone</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">now</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">36</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">37</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">VenueTest</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">TestCase</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">38</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">def</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">test_create_venue</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">39</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Create the venue</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">40</span><span class="token plain">        venue </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> VenueFactory</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">41</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">42</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check we can find it</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">43</span><span class="token plain">        all_venues </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> Venue</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">objects</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token builtin" style="color:#D8DEE9">all</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">44</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEqual</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token builtin" style="color:#D8DEE9">len</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">all_venues</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">1</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">45</span><span class="token plain">        only_venue </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> all_venues</span><span class="token punctuation" style="color:#8dc891">[</span><span class="token number" style="color:#5a9bcf">0</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">46</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEqual</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">only_venue</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> venue</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">47</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">48</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check attributes</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">49</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEqual</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">only_venue</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">name</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;Wembley Arena&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">50</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">51</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check string representation</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">52</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEqual</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">only_venue</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">__str__</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;Wembley Arena&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">53</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">54</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">55</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">EventTest</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">TestCase</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">56</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">def</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">test_create_event</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">57</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Create the venue</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">58</span><span class="token plain">        venue </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> VenueFactory</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">59</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">60</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Create the event</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">61</span><span class="token plain">        event </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> EventFactory</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">venue</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">venue</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">62</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">63</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check we can find it</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">64</span><span class="token plain">        all_events </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> Event</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">objects</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token builtin" style="color:#D8DEE9">all</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">65</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEqual</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token builtin" style="color:#D8DEE9">len</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">all_events</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">1</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">66</span><span class="token plain">        only_event </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> all_events</span><span class="token punctuation" style="color:#8dc891">[</span><span class="token number" style="color:#5a9bcf">0</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">67</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEqual</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">only_event</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> event</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">68</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">69</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check attributes</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">70</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEqual</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">only_event</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">name</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;Queens of the Stone Age&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">71</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEqual</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">only_event</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">venue</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">name</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;Wembley Arena&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">72</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">73</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check string representation</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">74</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEqual</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">only_event</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">__str__</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;Queens of the Stone Age - Wembley Arena&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Next, we run our tests:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ python manage.py </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> gigs</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">Creating </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> database </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> </span><span class="token builtin class-name" style="color:#FAC863">alias</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;default&#x27;</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">FF</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain"></span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">FAIL: test_create_event </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">gigs.tests.EventTest</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">----------------------------------------------------------------------</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">Traceback </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">most recent call last</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain">:</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain">  File </span><span class="token string" style="color:#8dc891">&quot;/Users/matthewdaly/Projects/gigfinder/gigs/tests.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:#5a9bcf">74</span><span class="token plain">, </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> test_create_event</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">    self.assertEqual</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">only_event.__str__</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain">, </span><span class="token string" style="color:#8dc891">&#x27;Queens of the Stone Age - Wembley Arena&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain">AssertionError: </span><span class="token string" style="color:#8dc891">&#x27;Event object&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">!=</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;Queens of the Stone Age - Wembley Arena&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain">- Event object</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain">+ Queens of the Stone Age - Wembley Arena</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain"></span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token plain">FAIL: test_create_venue </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">gigs.tests.VenueTest</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token plain">----------------------------------------------------------------------</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token plain">Traceback </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">most recent call last</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain">:</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token plain">  File </span><span class="token string" style="color:#8dc891">&quot;/Users/matthewdaly/Projects/gigfinder/gigs/tests.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:#5a9bcf">52</span><span class="token plain">, </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> test_create_venue</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token plain">    self.assertEqual</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">only_venue.__str__</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain">, </span><span class="token string" style="color:#8dc891">&#x27;Wembley Arena&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">21</span><span class="token plain">AssertionError: </span><span class="token string" style="color:#8dc891">&#x27;Venue object&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">!=</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;Wembley Arena&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">22</span><span class="token plain">- Venue object</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">23</span><span class="token plain">+ Wembley Arena</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">24</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">25</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">26</span><span class="token plain">----------------------------------------------------------------------</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">27</span><span class="token plain">Ran </span><span class="token number" style="color:#5a9bcf">2</span><span class="token plain"> tests </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">0</span><span class="token plain">.059s</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">28</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">29</span><span class="token plain">FAILED </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">failures</span><span class="token operator" style="color:#d7deea">=</span><span class="token number" style="color:#5a9bcf">2</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">30</span><span class="token plain">Destroying </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> database </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> </span><span class="token builtin class-name" style="color:#FAC863">alias</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;default&#x27;</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div></pre></div></pre><p class="py-2">They fail as expected. So let&#x27;s update <code>gigs/models.py</code>:</p><pre><div class="gatsby-highlight" data-language="python"><pre class="prism-code language-python" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">contrib</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">gis</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">db </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> models</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">Venue</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">models</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">Model</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#8dc891">&quot;&quot;&quot;</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token triple-quoted-string string" style="color:#8dc891">    Model for a venue</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token triple-quoted-string string" style="color:#8dc891">    &quot;&quot;&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">    name </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> models</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">CharField</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">max_length</span><span class="token operator" style="color:#d7deea">=</span><span class="token number" style="color:#5a9bcf">200</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain">    location </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> models</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">PointField</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">def</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">__str__</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">name</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">Event</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">models</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">Model</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#8dc891">&quot;&quot;&quot;</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token triple-quoted-string string" style="color:#8dc891">    Model for an event</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token triple-quoted-string string" style="color:#8dc891">    &quot;&quot;&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token plain">    name </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> models</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">CharField</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">max_length</span><span class="token operator" style="color:#d7deea">=</span><span class="token number" style="color:#5a9bcf">200</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token plain">    datetime </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> models</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">DateTimeField</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token plain">    venue </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> models</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">ForeignKey</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">Venue</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">21</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">22</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">def</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">__str__</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">23</span><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;%s - %s&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">%</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">name</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">venue</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">name</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">For the venue, we just use the name. For the event, we use the event name and the venue name.</p><p class="py-2">Now, we run our tests again:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ python manage.py </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> gigs</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">Creating </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> database </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> </span><span class="token builtin class-name" style="color:#FAC863">alias</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;default&#x27;</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">----------------------------------------------------------------------</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">Ran </span><span class="token number" style="color:#5a9bcf">2</span><span class="token plain"> tests </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">0</span><span class="token plain">.048s</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">OK</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain">Destroying </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> database </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> </span><span class="token builtin class-name" style="color:#FAC863">alias</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;default&#x27;</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div></pre></div></pre><p class="py-2">Time to commit our changes:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ </span><span class="token function" style="color:#79b6f2">git</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">add</span><span class="token plain"> gigs</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">$ </span><span class="token function" style="color:#79b6f2">git</span><span class="token plain"> commit -m </span><span class="token string" style="color:#8dc891">&#x27;Added models to admin&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">[</span><span class="token plain">master 65d051f</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"> Added models to admin</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">3</span><span class="token plain"> files changed, </span><span class="token number" style="color:#5a9bcf">15</span><span class="token plain"> insertions</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">+</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain">, </span><span class="token number" style="color:#5a9bcf">1</span><span class="token plain"> deletion</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">-</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Our models are now in place, so you may want to log into the admin and create a few venues and events so you can see it in action. Note that the location field for the <code>Venue</code> model creates a map widget that allows you to select a geographical location. It is a bit basic, however, so let&#x27;s make it better. Let&#x27;s install <code>django-floppyforms</code>:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style"></span><span class="token plain">$ pip </span><span class="token function" style="color:#79b6f2">install</span><span class="token plain"> django-floppyforms</span></div></pre></div></pre><p class="py-2">And add it to our requirements:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style"></span><span class="token plain">$ pip freeze -r requirements.txt</span></div></pre></div></pre><p class="py-2">Then add it to <code>INSTALLED_APPS</code> in <code>gigfinder/setttings.py</code>:</p><pre><div class="gatsby-highlight" data-language="python"><pre class="prism-code language-python" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">INSTALLED_APPS </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">.</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">    </span><span class="token string" style="color:#8dc891">&#x27;django.contrib.gis&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">    </span><span class="token string" style="color:#8dc891">&#x27;gigs&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">    </span><span class="token string" style="color:#8dc891">&#x27;floppyforms&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Now we create a custom point widget for our admin, a custom form for the venues, and a custom venue admin:</p><pre><div class="gatsby-highlight" data-language="python"><pre class="prism-code language-python" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">contrib </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> admin</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> gigs</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">models </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> Venue</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> Event</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">forms </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> ModelForm</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> floppyforms</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">gis </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> PointWidget</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> BaseGMapWidget</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">CustomPointWidget</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">PointWidget</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> BaseGMapWidget</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">Media</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain">        js </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;/static/floppyforms/js/MapWidget.js&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">VenueAdminForm</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">ModelForm</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">Meta</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain">        model </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> Venue</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain">        fields </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token string" style="color:#8dc891">&#x27;name&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;location&#x27;</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain">        widgets </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain">            </span><span class="token string" style="color:#8dc891">&#x27;location&#x27;</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> CustomPointWidget</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token plain">        </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">VenueAdmin</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">admin</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">ModelAdmin</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token plain">    form </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> VenueAdminForm</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">21</span><span class="token plain">admin</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">site</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">register</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">Venue</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> VenueAdmin</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">22</span><span class="token plain">admin</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">site</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">register</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">Event</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Note in particular that we define the media for our widget so we can include some required Javascript. If you run the dev server again, you should see that the map widget in the admin is now provided by Google Maps, making it much easier to identify the correct location of the venue.</p><p class="py-2">Time to commit our changes:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ </span><span class="token function" style="color:#79b6f2">git</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">add</span><span class="token plain"> gigfinder/ gigs/ requirements.txt</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">$ </span><span class="token function" style="color:#79b6f2">git</span><span class="token plain"> commit -m </span><span class="token string" style="color:#8dc891">&#x27;Customised location widget&#x27;</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">With our admin ready, it&#x27;s time to move on to the user-facing part of the web app.</p><h2 class="py-4 text-2xl font-bold">Creating our views</h2><p class="py-2">We will keep the front end for this app as simple as possible for the purposes of this tutorial, but of course you should feel free to expand upon this as you see fit. What we&#x27;ll do is create a form that uses HTML5 geolocation to get the user&#x27;s current geographical coordinates. It will then return events in the next week, ordered by how close the venue is. Please note that there are plans afoot in some browsers to prevent HTML5 geolocation from working unless content is server over HTTPS, so that may complicate things.</p><p class="py-2">How do we query the database to get this data? It&#x27;s not too difficult, as shown in this example:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ python manage.py shell</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">Python </span><span class="token number" style="color:#5a9bcf">3.5</span><span class="token plain">.1 </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">default, Mar </span><span class="token number" style="color:#5a9bcf">25</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">2016</span><span class="token plain">, 00:17:15</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">Type </span><span class="token string" style="color:#8dc891">&quot;copyright&quot;</span><span class="token plain">, </span><span class="token string" style="color:#8dc891">&quot;credits&quot;</span><span class="token plain"> or </span><span class="token string" style="color:#8dc891">&quot;license&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">more</span><span class="token plain"> information.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">IPython </span><span class="token number" style="color:#5a9bcf">4.1</span><span class="token plain">.2 -- An enhanced Interactive Python.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">?         -</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"> Introduction and overview of IPython</span><span class="token string" style="color:#8dc891">&#x27;s features.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token string" style="color:#8dc891">%quickref -&gt; Quick reference.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token string" style="color:#8dc891">help      -&gt; Python&#x27;</span><span class="token plain">s own </span><span class="token builtin class-name" style="color:#FAC863">help</span><span class="token plain"> system.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">object?   -</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"> Details about </span><span class="token string" style="color:#8dc891">&#x27;object&#x27;</span><span class="token plain">, use </span><span class="token string" style="color:#8dc891">&#x27;object??&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> extra details.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain">In </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token number" style="color:#5a9bcf">1</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain">: from gigs.models </span><span class="token function" style="color:#79b6f2">import</span><span class="token plain"> *</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain">In </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token number" style="color:#5a9bcf">2</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain">: from django.contrib.gis.geos </span><span class="token function" style="color:#79b6f2">import</span><span class="token plain"> Point</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain">In </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token number" style="color:#5a9bcf">3</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain">: from django.contrib.gis.db.models.functions </span><span class="token function" style="color:#79b6f2">import</span><span class="token plain"> Distance</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token plain">In </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token number" style="color:#5a9bcf">4</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain">: location </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> Point</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token number" style="color:#5a9bcf">52.3749159</span><span class="token plain">, </span><span class="token number" style="color:#5a9bcf">1.1067473</span><span class="token plain">, </span><span class="token assign-left variable" style="color:#d7deea">srid</span><span class="token operator" style="color:#d7deea">=</span><span class="token number" style="color:#5a9bcf">4326</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token plain">In </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token number" style="color:#5a9bcf">5</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain">: Venue.objects.all</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain">.annotate</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">distance</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">Distance</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;location&#x27;</span><span class="token plain">, location</span><span class="token punctuation" style="color:#8dc891">))</span><span class="token plain">.order_by</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;distance&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token plain">Out</span><span class="token punctuation" style="color:#8dc891">[</span><span class="token number" style="color:#5a9bcf">5</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain">: </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">Venue: Diss Corn Hall</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain">, </span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">Venue: Waterfront Norwich</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain">, </span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">Venue: UEA Norwich</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain">, </span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">Venue: Wembley Arena</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">I&#x27;ve set up a number of venues using the admin, one round the corner, two in Norwich, and one in London. I then imported the models, the <code>Point</code> class, and the <code>Distance</code> function, and created a <code>Point</code> object. Note that the <code>Point</code> is passed three fields - the first and second are the latitude and longitude, respectively, while the <code>srid</code> field takes a value of <code>4326</code>. This field represents the <a href="https://en.wikipedia.org/wiki/SRID" class="border-b-2 border-green-400">Spatial Reference System Identifier</a> used for this query - we&#x27;ve gone for <a href="https://en.wikipedia.org/wiki/World_Geodetic_System#WGS84" class="border-b-2 border-green-400">WGS 84</a>, which is a common choice and is referred to with the SRID 4326.</p><p class="py-2">Now, we want the user to be able to submit the form and get the 5 nearest events in the next week. We can get the date for this time next week as follows:</p><pre><div class="gatsby-highlight" data-language="python"><pre class="prism-code language-python" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style"></span><span class="token plain">In </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token number" style="color:#5a9bcf">6</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> next_week </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> timezone</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">now</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">+</span><span class="token plain"> timezone</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">timedelta</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">weeks</span><span class="token operator" style="color:#d7deea">=</span><span class="token number" style="color:#5a9bcf">1</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Then we can get the events we want, sorted by distance, like this:</p><pre><div class="gatsby-highlight" data-language="python"><pre class="prism-code language-python" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">In </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token number" style="color:#5a9bcf">7</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> Event</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">objects</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token builtin" style="color:#D8DEE9">filter</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">datetime__gte</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">timezone</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">now</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token builtin" style="color:#D8DEE9">filter</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">datetime__lte</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">next_week</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">annotate</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">distance</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">Distance</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;venue__location&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> location</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">order_by</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;distance&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">[</span><span class="token number" style="color:#5a9bcf">0</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token number" style="color:#5a9bcf">5</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">Out</span><span class="token punctuation" style="color:#8dc891">[</span><span class="token number" style="color:#5a9bcf">7</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">Event</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> Primal Scream </span><span class="token operator" style="color:#d7deea">-</span><span class="token plain"> UEA Norwich</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">Event</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> Queens of the Stone Age </span><span class="token operator" style="color:#d7deea">-</span><span class="token plain"> Wembley Arena</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">With that in mind, let&#x27;s write the test for our view. The view should contain a single form that accepts a user&#x27;s geographical coordinates - for convenience we&#x27;ll auto-complete this with HTML5 geolocation. On submit, the user should see a list of the five closest events in the next week.</p><p class="py-2">First, let&#x27;s test the GET request. Amend <code>gigs/tests.py</code> as follows:</p><pre><div class="gatsby-highlight" data-language="python"><pre class="prism-code language-python" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">test </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> TestCase</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> gigs</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">models </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> Venue</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> Event</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> factory</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">fuzzy </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> BaseFuzzyAttribute</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">contrib</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">gis</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">geos </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> Point</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> factory</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">django</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> random</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">utils </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> timezone</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">test </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> RequestFactory</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">core</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">urlresolvers </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> reverse</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> gigs</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">views </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> LookupView</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">FuzzyPoint</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">BaseFuzzyAttribute</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">def</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">fuzz</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> Point</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">random</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">uniform</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token operator" style="color:#d7deea">-</span><span class="token number" style="color:#5a9bcf">180.0</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">180.0</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain">                     random</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">uniform</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token operator" style="color:#d7deea">-</span><span class="token number" style="color:#5a9bcf">90.0</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">90.0</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token plain"></span><span class="token comment" style="color:#999999"># Factories for tests</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">VenueFactory</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">factory</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">DjangoModelFactory</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">Meta</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token plain">        model </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> Venue</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token plain">        django_get_or_create </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">21</span><span class="token plain">            </span><span class="token string" style="color:#8dc891">&#x27;name&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">22</span><span class="token plain">            </span><span class="token string" style="color:#8dc891">&#x27;location&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">23</span><span class="token plain">        </span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">24</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">25</span><span class="token plain">    name </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;Wembley Arena&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">26</span><span class="token plain">    location </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> FuzzyPoint</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">27</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">28</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">EventFactory</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">factory</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">DjangoModelFactory</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">29</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">Meta</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">30</span><span class="token plain">        model </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> Event</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">31</span><span class="token plain">        django_get_or_create </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">32</span><span class="token plain">            </span><span class="token string" style="color:#8dc891">&#x27;name&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">33</span><span class="token plain">            </span><span class="token string" style="color:#8dc891">&#x27;venue&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">34</span><span class="token plain">            </span><span class="token string" style="color:#8dc891">&#x27;datetime&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">35</span><span class="token plain">        </span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">36</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">37</span><span class="token plain">    name </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;Queens of the Stone Age&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">38</span><span class="token plain">    datetime </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> timezone</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">now</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">39</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">40</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">VenueTest</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">TestCase</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">41</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">def</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">test_create_venue</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">42</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Create the venue</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">43</span><span class="token plain">        venue </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> VenueFactory</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">44</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">45</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check we can find it</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">46</span><span class="token plain">        all_venues </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> Venue</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">objects</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token builtin" style="color:#D8DEE9">all</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">47</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEqual</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token builtin" style="color:#D8DEE9">len</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">all_venues</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">1</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">48</span><span class="token plain">        only_venue </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> all_venues</span><span class="token punctuation" style="color:#8dc891">[</span><span class="token number" style="color:#5a9bcf">0</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">49</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEqual</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">only_venue</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> venue</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">50</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">51</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check attributes</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">52</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEqual</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">only_venue</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">name</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;Wembley Arena&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">53</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">54</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check string representation</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">55</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEqual</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">only_venue</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">__str__</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;Wembley Arena&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">56</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">57</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">58</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">EventTest</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">TestCase</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">59</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">def</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">test_create_event</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">60</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Create the venue</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">61</span><span class="token plain">        venue </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> VenueFactory</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">62</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">63</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Create the event</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">64</span><span class="token plain">        event </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> EventFactory</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">venue</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">venue</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">65</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">66</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check we can find it</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">67</span><span class="token plain">        all_events </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> Event</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">objects</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token builtin" style="color:#D8DEE9">all</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">68</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEqual</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token builtin" style="color:#D8DEE9">len</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">all_events</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">1</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">69</span><span class="token plain">        only_event </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> all_events</span><span class="token punctuation" style="color:#8dc891">[</span><span class="token number" style="color:#5a9bcf">0</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">70</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEqual</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">only_event</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> event</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">71</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">72</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check attributes</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">73</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEqual</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">only_event</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">name</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;Queens of the Stone Age&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">74</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEqual</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">only_event</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">venue</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">name</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;Wembley Arena&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">75</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">76</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Check string representation</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">77</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEqual</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">only_event</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">__str__</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;Queens of the Stone Age - Wembley Arena&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">78</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">79</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">80</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">LookupViewTest</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">TestCase</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">81</span><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#8dc891">&quot;&quot;&quot;</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">82</span><span class="token triple-quoted-string string" style="color:#8dc891">    Test lookup view</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">83</span><span class="token triple-quoted-string string" style="color:#8dc891">    &quot;&quot;&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">84</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">def</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">setUp</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">85</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">factory </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> RequestFactory</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">86</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">87</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">def</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">test_get</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">88</span><span class="token plain">        request </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">factory</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">get</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">reverse</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;lookup&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">89</span><span class="token plain">        response </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> LookupView</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">as_view</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">request</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">90</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEqual</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">response</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">status_code</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">200</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">91</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertTemplateUsed</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;gigs/lookup.html&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Let&#x27;s run our tests:</p><pre><div class="gatsby-highlight" data-language="python"><pre class="prism-code language-python" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ python manage</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">py test gigs</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">Creating test database </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> alias </span><span class="token string" style="color:#8dc891">&#x27;default&#x27;</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">E</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain"></span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">ERROR</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> gigs</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">tests </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">unittest</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">loader</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">_FailedTest</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain"></span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">ImportError</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> Failed to </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> test module</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> gigs</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">tests</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain">Traceback </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">most recent call last</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">  File </span><span class="token string" style="color:#8dc891">&quot;/usr/local/Cellar/python3/3.5.1/Frameworks/Python.framework/Versions/3.5/lib/python3.5/unittest/loader.py&quot;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> line </span><span class="token number" style="color:#5a9bcf">428</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> _find_test_path</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain">    module </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">_get_module_from_name</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">name</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain">  File </span><span class="token string" style="color:#8dc891">&quot;/usr/local/Cellar/python3/3.5.1/Frameworks/Python.framework/Versions/3.5/lib/python3.5/unittest/loader.py&quot;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> line </span><span class="token number" style="color:#5a9bcf">369</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> _get_module_from_name</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain">    </span><span class="token builtin" style="color:#D8DEE9">__import__</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">name</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain">  File </span><span class="token string" style="color:#8dc891">&quot;/Users/matthewdaly/Projects/gigfinder/gigs/tests.py&quot;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> line </span><span class="token number" style="color:#5a9bcf">9</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">module</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> gigs</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">views </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> LookupView</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain">ImportError</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> cannot </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> name </span><span class="token string" style="color:#8dc891">&#x27;LookupView&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token plain"></span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token operator" style="color:#d7deea">-</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token plain">Ran </span><span class="token number" style="color:#5a9bcf">1</span><span class="token plain"> test </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">0</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">000s</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">21</span><span class="token plain">FAILED </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">errors</span><span class="token operator" style="color:#d7deea">=</span><span class="token number" style="color:#5a9bcf">1</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">22</span><span class="token plain">Destroying test database </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> alias </span><span class="token string" style="color:#8dc891">&#x27;default&#x27;</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Our first issue is that we can&#x27;t import the view in the test. Let&#x27;s fix that by amending <code>gigs/views.py</code>:</p><pre><div class="gatsby-highlight" data-language="python"><pre class="prism-code language-python" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">shortcuts </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> render</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">views</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">generic</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">base </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> View</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">LookupView</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">View</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">pass</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Running the tests again results in the following:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ python manage.py </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> gigs</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">Creating </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> database </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> </span><span class="token builtin class-name" style="color:#FAC863">alias</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;default&#x27;</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">.E.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain"></span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">ERROR: test_get </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">gigs.tests.LookupViewTest</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">----------------------------------------------------------------------</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">Traceback </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">most recent call last</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain">:</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain">  File </span><span class="token string" style="color:#8dc891">&quot;/Users/matthewdaly/Projects/gigfinder/gigs/tests.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:#5a9bcf">88</span><span class="token plain">, </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> test_get</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">    request </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> self.factory.get</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">reverse</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;lookup&#x27;</span><span class="token punctuation" style="color:#8dc891">))</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain">  File </span><span class="token string" style="color:#8dc891">&quot;/Users/matthewdaly/Projects/gigfinder/venv/lib/python3.5/site-packages/django/core/urlresolvers.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:#5a9bcf">600</span><span class="token plain">, </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> reverse</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain">    </span><span class="token builtin class-name" style="color:#FAC863">return</span><span class="token plain"> force_text</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">iri_to_uri</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">resolver._reverse_with_prefix</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">view, prefix, *args, **kwargs</span><span class="token punctuation" style="color:#8dc891">))</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain">  File </span><span class="token string" style="color:#8dc891">&quot;/Users/matthewdaly/Projects/gigfinder/venv/lib/python3.5/site-packages/django/core/urlresolvers.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:#5a9bcf">508</span><span class="token plain">, </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> _reverse_with_prefix</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">lookup_view_s, args, kwargs, len</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">patterns</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain">, patterns</span><span class="token punctuation" style="color:#8dc891">))</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain">django.core.urlresolvers.NoReverseMatch: Reverse </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;lookup&#x27;</span><span class="token plain"> with arguments </span><span class="token string" style="color:#8dc891">&#x27;()&#x27;</span><span class="token plain"> and keyword arguments </span><span class="token string" style="color:#8dc891">&#x27;{}&#x27;</span><span class="token plain"> not found. </span><span class="token number" style="color:#5a9bcf">0</span><span class="token plain"> pattern</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">s</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> tried: </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token plain">----------------------------------------------------------------------</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token plain">Ran </span><span class="token number" style="color:#5a9bcf">3</span><span class="token plain"> tests </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">0</span><span class="token plain">.154s</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token plain">FAILED </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">errors</span><span class="token operator" style="color:#d7deea">=</span><span class="token number" style="color:#5a9bcf">1</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token plain">Destroying </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> database </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> </span><span class="token builtin class-name" style="color:#FAC863">alias</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;default&#x27;</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div></pre></div></pre><p class="py-2">We can&#x27;t resolve the URL for our new view, so we need to add it to our URLconf. First of all, save this as <code>gigs/urls.py</code>:</p><pre><div class="gatsby-highlight" data-language="python"><pre class="prism-code language-python" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">conf</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">urls </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> url</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> gigs</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">views </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> LookupView</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">urlpatterns </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">    </span><span class="token comment" style="color:#999999"># Lookup</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">    url</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">r&#x27;&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> LookupView</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">as_view</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> name</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&#x27;lookup&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Then amend <code>gigfinder/urls.py</code> as follows:</p><pre><div class="gatsby-highlight" data-language="python"><pre class="prism-code language-python" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">conf</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">urls </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> url</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> include</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">contrib </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> admin</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">urlpatterns </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">    url</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">r&#x27;^admin/&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> admin</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">site</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">urls</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">    </span><span class="token comment" style="color:#999999"># Gig URLs</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain">    url</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">r&#x27;&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> include</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;gigs.urls&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Then run the tests:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ python manage.py </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> gigs</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">Creating </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> database </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> </span><span class="token builtin class-name" style="color:#FAC863">alias</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;default&#x27;</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">.F.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain"></span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">FAIL: test_get </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">gigs.tests.LookupViewTest</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">----------------------------------------------------------------------</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">Traceback </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">most recent call last</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain">:</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain">  File </span><span class="token string" style="color:#8dc891">&quot;/Users/matthewdaly/Projects/gigfinder/gigs/tests.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:#5a9bcf">90</span><span class="token plain">, </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> test_get</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">    self.assertEqual</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">response.status_code, </span><span class="token number" style="color:#5a9bcf">200</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain">AssertionError: </span><span class="token number" style="color:#5a9bcf">405</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">!=</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">200</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain">----------------------------------------------------------------------</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain">Ran </span><span class="token number" style="color:#5a9bcf">3</span><span class="token plain"> tests </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">0</span><span class="token plain">.417s</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain">FAILED </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">failures</span><span class="token operator" style="color:#d7deea">=</span><span class="token number" style="color:#5a9bcf">1</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token plain">Destroying </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> database </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> </span><span class="token builtin class-name" style="color:#FAC863">alias</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;default&#x27;</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div></pre></div></pre><p class="py-2">We get a 405 response because the view does not accept GET requests. Let&#x27;s resolve that:</p><pre><div class="gatsby-highlight" data-language="python"><pre class="prism-code language-python" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">shortcuts </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> render_to_response</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">views</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">generic</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">base </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> View</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">LookupView</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">View</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">def</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">get</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> request</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> render_to_response</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;gigs/lookup.html&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">If we run our tests now:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ python manage.py </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> gigs</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">Creating </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> database </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> </span><span class="token builtin class-name" style="color:#FAC863">alias</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;default&#x27;</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">.E.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain"></span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">ERROR: test_get </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">gigs.tests.LookupViewTest</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">----------------------------------------------------------------------</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">Traceback </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">most recent call last</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain">:</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain">  File </span><span class="token string" style="color:#8dc891">&quot;/Users/matthewdaly/Projects/gigfinder/gigs/tests.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:#5a9bcf">89</span><span class="token plain">, </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> test_get</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">    response </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> LookupView.as_view</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">request</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain">  File </span><span class="token string" style="color:#8dc891">&quot;/Users/matthewdaly/Projects/gigfinder/venv/lib/python3.5/site-packages/django/views/generic/base.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:#5a9bcf">68</span><span class="token plain">, </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> view</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain">    </span><span class="token builtin class-name" style="color:#FAC863">return</span><span class="token plain"> self.dispatch</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">request, *args, **kwargs</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain">  File </span><span class="token string" style="color:#8dc891">&quot;/Users/matthewdaly/Projects/gigfinder/venv/lib/python3.5/site-packages/django/views/generic/base.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:#5a9bcf">88</span><span class="token plain">, </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> dispatch</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain">    </span><span class="token builtin class-name" style="color:#FAC863">return</span><span class="token plain"> handler</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">request, *args, **kwargs</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain">  File </span><span class="token string" style="color:#8dc891">&quot;/Users/matthewdaly/Projects/gigfinder/gigs/views.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:#5a9bcf">6</span><span class="token plain">, </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> get</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain">    </span><span class="token builtin class-name" style="color:#FAC863">return</span><span class="token plain"> render_to_response</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;gigs/lookup.html&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token plain">  File </span><span class="token string" style="color:#8dc891">&quot;/Users/matthewdaly/Projects/gigfinder/venv/lib/python3.5/site-packages/django/shortcuts.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:#5a9bcf">39</span><span class="token plain">, </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> render_to_response</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token plain">    content </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> loader.render_to_string</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">template_name, context, </span><span class="token assign-left variable" style="color:#d7deea">using</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">using</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token plain">  File </span><span class="token string" style="color:#8dc891">&quot;/Users/matthewdaly/Projects/gigfinder/venv/lib/python3.5/site-packages/django/template/loader.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:#5a9bcf">96</span><span class="token plain">, </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> render_to_string</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token plain">    template </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> get_template</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">template_name, </span><span class="token assign-left variable" style="color:#d7deea">using</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">using</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token plain">  File </span><span class="token string" style="color:#8dc891">&quot;/Users/matthewdaly/Projects/gigfinder/venv/lib/python3.5/site-packages/django/template/loader.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:#5a9bcf">43</span><span class="token plain">, </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> get_template</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">21</span><span class="token plain">    raise TemplateDoesNotExist</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">template_name, </span><span class="token assign-left variable" style="color:#d7deea">chain</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">chain</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">22</span><span class="token plain">django.template.exceptions.TemplateDoesNotExist: gigs/lookup.html</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">23</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">24</span><span class="token plain">----------------------------------------------------------------------</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">25</span><span class="token plain">Ran </span><span class="token number" style="color:#5a9bcf">3</span><span class="token plain"> tests </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">0</span><span class="token plain">.409s</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">26</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">27</span><span class="token plain">FAILED </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">errors</span><span class="token operator" style="color:#d7deea">=</span><span class="token number" style="color:#5a9bcf">1</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">28</span><span class="token plain">Destroying </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> database </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> </span><span class="token builtin class-name" style="color:#FAC863">alias</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;default&#x27;</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div></pre></div></pre><p class="py-2">We see that the template is not defined. Save the following as <code>gigs/templates/gigs/includes/base.html</code>:</p><pre><div class="gatsby-highlight" data-language="django"><pre class="prism-code language-django" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token doctype punctuation" style="color:#8dc891">&lt;!</span><span class="token doctype doctype-tag" style="color:#999999">DOCTYPE</span><span class="token doctype" style="color:#999999"> </span><span class="token doctype name" style="color:#999999">html</span><span class="token doctype punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain"></span><span class="token tag punctuation" style="color:#8dc891">&lt;</span><span class="token tag" style="color:#fc929e">html</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">    </span><span class="token tag punctuation" style="color:#8dc891">&lt;</span><span class="token tag" style="color:#fc929e">head</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">        </span><span class="token tag punctuation" style="color:#8dc891">&lt;</span><span class="token tag" style="color:#fc929e">title</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain">Gig finder</span><span class="token tag punctuation" style="color:#8dc891">&lt;/</span><span class="token tag" style="color:#fc929e">title</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">        </span><span class="token tag punctuation" style="color:#8dc891">&lt;</span><span class="token tag" style="color:#fc929e">meta</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">charset</span><span class="token tag attr-value punctuation attr-equals" style="color:#8dc891">=</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag attr-value" style="color:#8dc891">utf-8</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">        </span><span class="token tag punctuation" style="color:#8dc891">&lt;</span><span class="token tag" style="color:#fc929e">meta</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">http-equiv</span><span class="token tag attr-value punctuation attr-equals" style="color:#8dc891">=</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag attr-value" style="color:#8dc891">X-UA-Compatible</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">content</span><span class="token tag attr-value punctuation attr-equals" style="color:#8dc891">=</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag attr-value" style="color:#8dc891">IE=edge</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">        </span><span class="token tag punctuation" style="color:#8dc891">&lt;</span><span class="token tag" style="color:#fc929e">meta</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#8dc891">=</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag attr-value" style="color:#8dc891">viewport</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">content</span><span class="token tag attr-value punctuation attr-equals" style="color:#8dc891">=</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag attr-value" style="color:#8dc891">width=device-width, initial-scale=1</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain">        </span><span class="token tag punctuation" style="color:#8dc891">&lt;</span><span class="token tag" style="color:#fc929e">link</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">rel</span><span class="token tag attr-value punctuation attr-equals" style="color:#8dc891">=</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag attr-value" style="color:#8dc891">stylesheet</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#8dc891">=</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag attr-value" style="color:#8dc891">text/css</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">href</span><span class="token tag attr-value punctuation attr-equals" style="color:#8dc891">=</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag attr-value" style="color:#8dc891">https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token tag punctuation" style="color:#8dc891">&lt;/</span><span class="token tag" style="color:#fc929e">link</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">    </span><span class="token tag punctuation" style="color:#8dc891">&lt;/</span><span class="token tag" style="color:#fc929e">head</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain">    </span><span class="token tag punctuation" style="color:#8dc891">&lt;</span><span class="token tag" style="color:#fc929e">body</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain">        </span><span class="token tag punctuation" style="color:#8dc891">&lt;</span><span class="token tag" style="color:#fc929e">h1</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain">Gig Finder</span><span class="token tag punctuation" style="color:#8dc891">&lt;/</span><span class="token tag" style="color:#fc929e">h1</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain">        </span><span class="token tag punctuation" style="color:#8dc891">&lt;</span><span class="token tag" style="color:#fc929e">div</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#8dc891">=</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag attr-value" style="color:#8dc891">container</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain">            </span><span class="token tag punctuation" style="color:#8dc891">&lt;</span><span class="token tag" style="color:#fc929e">div</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#8dc891">=</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag attr-value" style="color:#8dc891">row</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain">                </span><span class="token django language-django delimiter punctuation" style="color:#8dc891">{%</span><span class="token django language-django"> </span><span class="token django language-django tag keyword" style="color:#c5a5c5">block</span><span class="token django language-django"> </span><span class="token django language-django variable" style="color:#d7deea">content</span><span class="token django language-django"> </span><span class="token django language-django delimiter punctuation" style="color:#8dc891">%}</span><span class="token django language-django delimiter punctuation" style="color:#8dc891">{%</span><span class="token django language-django"> </span><span class="token django language-django tag keyword" style="color:#c5a5c5">endblock</span><span class="token django language-django"> </span><span class="token django language-django delimiter punctuation" style="color:#8dc891">%}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain">            </span><span class="token tag punctuation" style="color:#8dc891">&lt;/</span><span class="token tag" style="color:#fc929e">div</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token plain">        </span><span class="token tag punctuation" style="color:#8dc891">&lt;/</span><span class="token tag" style="color:#fc929e">div</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token plain">        </span><span class="token tag punctuation" style="color:#8dc891">&lt;</span><span class="token tag" style="color:#fc929e">script</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#8dc891">=</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag attr-value" style="color:#8dc891">https://code.jquery.com/jquery-2.2.2.min.js</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">integrity</span><span class="token tag attr-value punctuation attr-equals" style="color:#8dc891">=</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag attr-value" style="color:#8dc891">sha256-36cp2Co+/62rEAAYHLmRCPIych47CvdM+uTBJwSzWjI=</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">crossorigin</span><span class="token tag attr-value punctuation attr-equals" style="color:#8dc891">=</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag attr-value" style="color:#8dc891">anonymous</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token script"></span><span class="token tag punctuation" style="color:#8dc891">&lt;/</span><span class="token tag" style="color:#fc929e">script</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token plain">        </span><span class="token tag punctuation" style="color:#8dc891">&lt;</span><span class="token tag" style="color:#fc929e">script</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">language</span><span class="token tag attr-value punctuation attr-equals" style="color:#8dc891">=</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag attr-value" style="color:#8dc891">javascript</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#8dc891">=</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag attr-value" style="color:#8dc891">text/javascript</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#8dc891">=</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag attr-value" style="color:#8dc891">https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token script"></span><span class="token tag punctuation" style="color:#8dc891">&lt;/</span><span class="token tag" style="color:#fc929e">script</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token plain">    </span><span class="token tag punctuation" style="color:#8dc891">&lt;/</span><span class="token tag" style="color:#fc929e">body</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token plain"></span><span class="token tag punctuation" style="color:#8dc891">&lt;/</span><span class="token tag" style="color:#fc929e">html</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">And the following as <code>gigs/templates/gigs/lookup.html</code>:</p><pre><div class="gatsby-highlight" data-language="django"><pre class="prism-code language-django" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token django language-django delimiter punctuation" style="color:#8dc891">{%</span><span class="token django language-django"> </span><span class="token django language-django tag keyword" style="color:#c5a5c5">extends</span><span class="token django language-django"> </span><span class="token django language-django string" style="color:#8dc891">&quot;gigs/includes/base.html&quot;</span><span class="token django language-django"> </span><span class="token django language-django delimiter punctuation" style="color:#8dc891">%}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain"></span><span class="token django language-django delimiter punctuation" style="color:#8dc891">{%</span><span class="token django language-django"> </span><span class="token django language-django tag keyword" style="color:#c5a5c5">block</span><span class="token django language-django"> </span><span class="token django language-django variable" style="color:#d7deea">content</span><span class="token django language-django"> </span><span class="token django language-django delimiter punctuation" style="color:#8dc891">%}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">    </span><span class="token tag punctuation" style="color:#8dc891">&lt;</span><span class="token tag" style="color:#fc929e">form</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">role</span><span class="token tag attr-value punctuation attr-equals" style="color:#8dc891">=</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag attr-value" style="color:#8dc891">form</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">action</span><span class="token tag attr-value punctuation attr-equals" style="color:#8dc891">=</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag attr-value" style="color:#8dc891">/</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">method</span><span class="token tag attr-value punctuation attr-equals" style="color:#8dc891">=</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag attr-value" style="color:#8dc891">post</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token django language-django delimiter punctuation" style="color:#8dc891">{%</span><span class="token django language-django"> </span><span class="token django language-django tag keyword" style="color:#c5a5c5">csrf_token</span><span class="token django language-django"> </span><span class="token django language-django delimiter punctuation" style="color:#8dc891">%}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">        </span><span class="token tag punctuation" style="color:#8dc891">&lt;</span><span class="token tag" style="color:#fc929e">div</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#8dc891">=</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag attr-value" style="color:#8dc891">form-group</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">            </span><span class="token tag punctuation" style="color:#8dc891">&lt;</span><span class="token tag" style="color:#fc929e">label</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">for</span><span class="token tag attr-value punctuation attr-equals" style="color:#8dc891">=</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag attr-value" style="color:#8dc891">latitude</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain">Latitude:</span><span class="token tag punctuation" style="color:#8dc891">&lt;/</span><span class="token tag" style="color:#fc929e">label</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">            </span><span class="token tag punctuation" style="color:#8dc891">&lt;</span><span class="token tag" style="color:#fc929e">input</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#8dc891">=</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag attr-value" style="color:#8dc891">id_latitude</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#8dc891">=</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag attr-value" style="color:#8dc891">latitude</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#8dc891">=</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag attr-value" style="color:#8dc891">text</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#8dc891">=</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag attr-value" style="color:#8dc891">form-control</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token tag punctuation" style="color:#8dc891">&lt;/</span><span class="token tag" style="color:#fc929e">input</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain">        </span><span class="token tag punctuation" style="color:#8dc891">&lt;/</span><span class="token tag" style="color:#fc929e">div</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">        </span><span class="token tag punctuation" style="color:#8dc891">&lt;</span><span class="token tag" style="color:#fc929e">div</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#8dc891">=</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag attr-value" style="color:#8dc891">form-group</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain">            </span><span class="token tag punctuation" style="color:#8dc891">&lt;</span><span class="token tag" style="color:#fc929e">label</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">for</span><span class="token tag attr-value punctuation attr-equals" style="color:#8dc891">=</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag attr-value" style="color:#8dc891">longitude</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain">Longitude:</span><span class="token tag punctuation" style="color:#8dc891">&lt;/</span><span class="token tag" style="color:#fc929e">label</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain">            </span><span class="token tag punctuation" style="color:#8dc891">&lt;</span><span class="token tag" style="color:#fc929e">input</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#8dc891">=</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag attr-value" style="color:#8dc891">id_longitude</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#8dc891">=</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag attr-value" style="color:#8dc891">longitude</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#8dc891">=</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag attr-value" style="color:#8dc891">text</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#8dc891">=</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag attr-value" style="color:#8dc891">form-control</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token tag punctuation" style="color:#8dc891">&lt;/</span><span class="token tag" style="color:#fc929e">input</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain">        </span><span class="token tag punctuation" style="color:#8dc891">&lt;/</span><span class="token tag" style="color:#fc929e">div</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain">        </span><span class="token tag punctuation" style="color:#8dc891">&lt;</span><span class="token tag" style="color:#fc929e">input</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#8dc891">=</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag attr-value" style="color:#8dc891">btn btn-primary</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#8dc891">=</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag attr-value" style="color:#8dc891">submit</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#8dc891">=</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag attr-value" style="color:#8dc891">Submit</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag punctuation" style="color:#8dc891">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain">    </span><span class="token tag punctuation" style="color:#8dc891">&lt;/</span><span class="token tag" style="color:#fc929e">form</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain">    </span><span class="token tag punctuation" style="color:#8dc891">&lt;</span><span class="token tag" style="color:#fc929e">script</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">language</span><span class="token tag attr-value punctuation attr-equals" style="color:#8dc891">=</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag attr-value" style="color:#8dc891">javascript</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#8dc891">=</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag attr-value" style="color:#8dc891">text/javascript</span><span class="token tag attr-value punctuation" style="color:#8dc891">&quot;</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token script language-javascript">        </span><span class="token script language-javascript dom variable" style="color:#d7deea">navigator</span><span class="token script language-javascript punctuation" style="color:#8dc891">.</span><span class="token script language-javascript property-access">geolocation</span><span class="token script language-javascript punctuation" style="color:#8dc891">.</span><span class="token script language-javascript method function property-access" style="color:#79b6f2">getCurrentPosition</span><span class="token script language-javascript punctuation" style="color:#8dc891">(</span><span class="token script language-javascript keyword" style="color:#c5a5c5">function</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:#8dc891">(</span><span class="token script language-javascript parameter">position</span><span class="token script language-javascript punctuation" style="color:#8dc891">)</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:#8dc891">{</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token script language-javascript">            </span><span class="token script language-javascript keyword" style="color:#c5a5c5">var</span><span class="token script language-javascript"> lat </span><span class="token script language-javascript operator" style="color:#d7deea">=</span><span class="token script language-javascript"> </span><span class="token script language-javascript dom variable" style="color:#d7deea">document</span><span class="token script language-javascript punctuation" style="color:#8dc891">.</span><span class="token script language-javascript method function property-access" style="color:#79b6f2">getElementById</span><span class="token script language-javascript punctuation" style="color:#8dc891">(</span><span class="token script language-javascript string" style="color:#8dc891">&#x27;id_latitude&#x27;</span><span class="token script language-javascript punctuation" style="color:#8dc891">)</span><span class="token script language-javascript punctuation" style="color:#8dc891">;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token script language-javascript">            </span><span class="token script language-javascript keyword" style="color:#c5a5c5">var</span><span class="token script language-javascript"> lon </span><span class="token script language-javascript operator" style="color:#d7deea">=</span><span class="token script language-javascript"> </span><span class="token script language-javascript dom variable" style="color:#d7deea">document</span><span class="token script language-javascript punctuation" style="color:#8dc891">.</span><span class="token script language-javascript method function property-access" style="color:#79b6f2">getElementById</span><span class="token script language-javascript punctuation" style="color:#8dc891">(</span><span class="token script language-javascript string" style="color:#8dc891">&#x27;id_longitude&#x27;</span><span class="token script language-javascript punctuation" style="color:#8dc891">)</span><span class="token script language-javascript punctuation" style="color:#8dc891">;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token script language-javascript">            lat</span><span class="token script language-javascript punctuation" style="color:#8dc891">.</span><span class="token script language-javascript property-access">value</span><span class="token script language-javascript"> </span><span class="token script language-javascript operator" style="color:#d7deea">=</span><span class="token script language-javascript"> position</span><span class="token script language-javascript punctuation" style="color:#8dc891">.</span><span class="token script language-javascript property-access">coords</span><span class="token script language-javascript punctuation" style="color:#8dc891">.</span><span class="token script language-javascript property-access">latitude</span><span class="token script language-javascript punctuation" style="color:#8dc891">;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token script language-javascript">            lon</span><span class="token script language-javascript punctuation" style="color:#8dc891">.</span><span class="token script language-javascript property-access">value</span><span class="token script language-javascript"> </span><span class="token script language-javascript operator" style="color:#d7deea">=</span><span class="token script language-javascript"> position</span><span class="token script language-javascript punctuation" style="color:#8dc891">.</span><span class="token script language-javascript property-access">coords</span><span class="token script language-javascript punctuation" style="color:#8dc891">.</span><span class="token script language-javascript property-access">longitude</span><span class="token script language-javascript punctuation" style="color:#8dc891">;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">21</span><span class="token script language-javascript">        </span><span class="token script language-javascript punctuation" style="color:#8dc891">}</span><span class="token script language-javascript punctuation" style="color:#8dc891">)</span><span class="token script language-javascript punctuation" style="color:#8dc891">;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">22</span><span class="token script language-javascript">    </span><span class="token tag punctuation" style="color:#8dc891">&lt;/</span><span class="token tag" style="color:#fc929e">script</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">23</span><span class="token plain"></span><span class="token django language-django delimiter punctuation" style="color:#8dc891">{%</span><span class="token django language-django"> </span><span class="token django language-django tag keyword" style="color:#c5a5c5">endblock</span><span class="token django language-django"> </span><span class="token django language-django delimiter punctuation" style="color:#8dc891">%}</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Note the JavaScript to populate the latitude and longitude. Now, if we run our tests:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ python manage.py </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> gigs</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">Creating </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> database </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> </span><span class="token builtin class-name" style="color:#FAC863">alias</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;default&#x27;</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">----------------------------------------------------------------------</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">Ran </span><span class="token number" style="color:#5a9bcf">3</span><span class="token plain"> tests </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">1</span><span class="token plain">.814s</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">OK</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain">Destroying </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> database </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> </span><span class="token builtin class-name" style="color:#FAC863">alias</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;default&#x27;</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div></pre></div></pre><p class="py-2">Success! We now render our form as expected. Time to commit:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ </span><span class="token function" style="color:#79b6f2">git</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">add</span><span class="token plain"> gigs gigfinder</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">$ </span><span class="token function" style="color:#79b6f2">git</span><span class="token plain"> commit -m </span><span class="token string" style="color:#8dc891">&#x27;Implemented GET handler&#x27;</span><span class="token plain"></span></div></pre></div></pre><h2 class="py-4 text-2xl font-bold">Handling POST requests</h2><p class="py-2">Now we need to be able to handle POST requests and return the appropriate results. First, let&#x27;s write a test for it in our existing <code>LookupViewTest</code> class:</p><pre><div class="gatsby-highlight" data-language="python"><pre class="prism-code language-python" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">def</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">test_post</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Create venues to return</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">        v1 </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> VenueFactory</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">name</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&#x27;Venue1&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">        v2 </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> VenueFactory</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">name</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&#x27;Venue2&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">        v3 </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> VenueFactory</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">name</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&#x27;Venue3&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">        v4 </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> VenueFactory</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">name</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&#x27;Venue4&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">        v5 </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> VenueFactory</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">name</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&#x27;Venue5&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain">        v6 </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> VenueFactory</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">name</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&#x27;Venue6&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">        v7 </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> VenueFactory</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">name</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&#x27;Venue7&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain">        v8 </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> VenueFactory</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">name</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&#x27;Venue8&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain">        v9 </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> VenueFactory</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">name</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&#x27;Venue9&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain">        v10 </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> VenueFactory</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">name</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&#x27;Venue10&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Create events to return</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain">        e1 </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> EventFactory</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">name</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&#x27;Event1&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> venue</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">v1</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token plain">        e2 </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> EventFactory</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">name</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&#x27;Event2&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> venue</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">v2</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token plain">        e3 </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> EventFactory</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">name</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&#x27;Event3&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> venue</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">v3</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token plain">        e4 </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> EventFactory</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">name</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&#x27;Event4&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> venue</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">v4</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token plain">        e5 </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> EventFactory</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">name</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&#x27;Event5&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> venue</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">v5</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token plain">        e6 </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> EventFactory</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">name</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&#x27;Event6&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> venue</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">v6</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">21</span><span class="token plain">        e7 </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> EventFactory</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">name</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&#x27;Event7&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> venue</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">v7</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">22</span><span class="token plain">        e8 </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> EventFactory</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">name</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&#x27;Event8&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> venue</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">v8</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">23</span><span class="token plain">        e9 </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> EventFactory</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">name</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&#x27;Event9&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> venue</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">v9</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">24</span><span class="token plain">        e10 </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> EventFactory</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">name</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&#x27;Event10&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> venue</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">v10</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">25</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">26</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Set parameters</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">27</span><span class="token plain">        lat </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">52.3749159</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">28</span><span class="token plain">        lon </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">1.1067473</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">29</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">30</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Put together request</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">31</span><span class="token plain">        data </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">32</span><span class="token plain">            </span><span class="token string" style="color:#8dc891">&#x27;latitude&#x27;</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> lat</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">33</span><span class="token plain">            </span><span class="token string" style="color:#8dc891">&#x27;longitude&#x27;</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> lon</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">34</span><span class="token plain">        </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">35</span><span class="token plain">        request </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">factory</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">post</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">reverse</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;lookup&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> data</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">36</span><span class="token plain">        response </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> LookupView</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">as_view</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">request</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">37</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertEqual</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">response</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">status_code</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">200</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">38</span><span class="token plain">        self</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">assertTemplateUsed</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;gigs/lookupresults.html&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">If we now run this test:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ python manage.py </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> gigs</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">Creating </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> database </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> </span><span class="token builtin class-name" style="color:#FAC863">alias</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;default&#x27;</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">F.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain"></span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">FAIL: test_post </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">gigs.tests.LookupViewTest</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">----------------------------------------------------------------------</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">Traceback </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">most recent call last</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain">:</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain">  File </span><span class="token string" style="color:#8dc891">&quot;/Users/matthewdaly/Projects/gigfinder/gigs/tests.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:#5a9bcf">117</span><span class="token plain">, </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> test_post</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">    self.assertEqual</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">response.status_code, </span><span class="token number" style="color:#5a9bcf">200</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain">AssertionError: </span><span class="token number" style="color:#5a9bcf">405</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">!=</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">200</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain">----------------------------------------------------------------------</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain">Ran </span><span class="token number" style="color:#5a9bcf">4</span><span class="token plain"> tests </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">1</span><span class="token plain">.281s</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain">FAILED </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">failures</span><span class="token operator" style="color:#d7deea">=</span><span class="token number" style="color:#5a9bcf">1</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token plain">Destroying </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> database </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> </span><span class="token builtin class-name" style="color:#FAC863">alias</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;default&#x27;</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div></pre></div></pre><p class="py-2">We can see that it fails because the POST method is not supported. Now we can start work on implementing it. First, let&#x27;s create a form in <code>gigs/forms.py</code>:</p><pre><div class="gatsby-highlight" data-language="python"><pre class="prism-code language-python" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">forms </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> Form</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> FloatField</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">LookupForm</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">Form</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">    latitude </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> FloatField</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">    longitude </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> FloatField</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Next, edit <code>gigs/views.py</code>:</p><pre><div class="gatsby-highlight" data-language="python"><pre class="prism-code language-python" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">shortcuts </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> render_to_response</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">views</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">generic</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">edit </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> FormView</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> gigs</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">forms </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> LookupForm</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> gigs</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">models </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> Event</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">utils </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> timezone</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">contrib</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">gis</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">geos </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> Point</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">contrib</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">gis</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">db</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">models</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">functions </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> Distance</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">LookupView</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">FormView</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain">    form_class </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> LookupForm</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">def</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">get</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> request</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> render_to_response</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;gigs/lookup.html&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">def</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">form_valid</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> form</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Get data</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token plain">        latitude </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> form</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">cleaned_data</span><span class="token punctuation" style="color:#8dc891">[</span><span class="token string" style="color:#8dc891">&#x27;latitude&#x27;</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token plain">        longitude </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> form</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">cleaned_data</span><span class="token punctuation" style="color:#8dc891">[</span><span class="token string" style="color:#8dc891">&#x27;longitude&#x27;</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Get today&#x27;s date</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">21</span><span class="token plain">        now </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> timezone</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">now</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">22</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">23</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Get next week&#x27;s date</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">24</span><span class="token plain">        next_week </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> now </span><span class="token operator" style="color:#d7deea">+</span><span class="token plain"> timezone</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">timedelta</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">weeks</span><span class="token operator" style="color:#d7deea">=</span><span class="token number" style="color:#5a9bcf">1</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">25</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">26</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Get Point</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">27</span><span class="token plain">        location </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> Point</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">longitude</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> latitude</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> srid</span><span class="token operator" style="color:#d7deea">=</span><span class="token number" style="color:#5a9bcf">4326</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">28</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">29</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Look up events</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">30</span><span class="token plain">        events </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> Event</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">objects</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token builtin" style="color:#D8DEE9">filter</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">datetime__gte</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">now</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token builtin" style="color:#D8DEE9">filter</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">datetime__lte</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">next_week</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">annotate</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">distance</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">Distance</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;venue__location&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> location</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">order_by</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;distance&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">[</span><span class="token number" style="color:#5a9bcf">0</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token number" style="color:#5a9bcf">5</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">31</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">32</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Render the template</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">33</span><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> render_to_response</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;gigs/lookupresults.html&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">34</span><span class="token plain">            </span><span class="token string" style="color:#8dc891">&#x27;events&#x27;</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> events</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">35</span><span class="token plain">            </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Note that we&#x27;re switching from a <code>View</code> to a <code>FormView</code> so that it can more easily handle our form. We could render the form using this as well, but as it&#x27;s a simple form I decided it wasn&#x27;t worth the bother. Also, note that the longitude goes first - this caught me out as I expected the latitude to be the first argument.</p><p class="py-2">Now, if we run our tests, they should complain about our missing template:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ python manage.py </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> gigs</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">Creating </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> database </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> </span><span class="token builtin class-name" style="color:#FAC863">alias</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;default&#x27;</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">E.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain"></span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token operator" style="color:#d7deea">==</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">ERROR: test_post </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">gigs.tests.LookupViewTest</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">----------------------------------------------------------------------</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">Traceback </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">most recent call last</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain">:</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain">  File </span><span class="token string" style="color:#8dc891">&quot;/Users/matthewdaly/Projects/gigfinder/gigs/tests.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:#5a9bcf">116</span><span class="token plain">, </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> test_post</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">    response </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> LookupView.as_view</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">request</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain">  File </span><span class="token string" style="color:#8dc891">&quot;/Users/matthewdaly/Projects/gigfinder/venv/lib/python3.5/site-packages/django/views/generic/base.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:#5a9bcf">68</span><span class="token plain">, </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> view</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain">    </span><span class="token builtin class-name" style="color:#FAC863">return</span><span class="token plain"> self.dispatch</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">request, *args, **kwargs</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain">  File </span><span class="token string" style="color:#8dc891">&quot;/Users/matthewdaly/Projects/gigfinder/venv/lib/python3.5/site-packages/django/views/generic/base.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:#5a9bcf">88</span><span class="token plain">, </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> dispatch</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain">    </span><span class="token builtin class-name" style="color:#FAC863">return</span><span class="token plain"> handler</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">request, *args, **kwargs</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain">  File </span><span class="token string" style="color:#8dc891">&quot;/Users/matthewdaly/Projects/gigfinder/venv/lib/python3.5/site-packages/django/views/generic/edit.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:#5a9bcf">222</span><span class="token plain">, </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> post</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain">    </span><span class="token builtin class-name" style="color:#FAC863">return</span><span class="token plain"> self.form_valid</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">form</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token plain">  File </span><span class="token string" style="color:#8dc891">&quot;/Users/matthewdaly/Projects/gigfinder/gigs/views.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:#5a9bcf">31</span><span class="token plain">, </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> form_valid</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token plain">    </span><span class="token string" style="color:#8dc891">&#x27;events&#x27;</span><span class="token builtin class-name" style="color:#FAC863">:</span><span class="token plain"> events</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token plain">  File </span><span class="token string" style="color:#8dc891">&quot;/Users/matthewdaly/Projects/gigfinder/venv/lib/python3.5/site-packages/django/shortcuts.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:#5a9bcf">39</span><span class="token plain">, </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> render_to_response</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token plain">    content </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> loader.render_to_string</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">template_name, context, </span><span class="token assign-left variable" style="color:#d7deea">using</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">using</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token plain">  File </span><span class="token string" style="color:#8dc891">&quot;/Users/matthewdaly/Projects/gigfinder/venv/lib/python3.5/site-packages/django/template/loader.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:#5a9bcf">96</span><span class="token plain">, </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> render_to_string</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">21</span><span class="token plain">    template </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> get_template</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">template_name, </span><span class="token assign-left variable" style="color:#d7deea">using</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">using</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">22</span><span class="token plain">  File </span><span class="token string" style="color:#8dc891">&quot;/Users/matthewdaly/Projects/gigfinder/venv/lib/python3.5/site-packages/django/template/loader.py&quot;</span><span class="token plain">, line </span><span class="token number" style="color:#5a9bcf">43</span><span class="token plain">, </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> get_template</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">23</span><span class="token plain">    raise TemplateDoesNotExist</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">template_name, </span><span class="token assign-left variable" style="color:#d7deea">chain</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">chain</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">24</span><span class="token plain">django.template.exceptions.TemplateDoesNotExist: gigs/lookupresults.html</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">25</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">26</span><span class="token plain">----------------------------------------------------------------------</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">27</span><span class="token plain">Ran </span><span class="token number" style="color:#5a9bcf">4</span><span class="token plain"> tests </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">0</span><span class="token plain">.506s</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">28</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">29</span><span class="token plain">FAILED </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">errors</span><span class="token operator" style="color:#d7deea">=</span><span class="token number" style="color:#5a9bcf">1</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">30</span><span class="token plain">Destroying </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> database </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> </span><span class="token builtin class-name" style="color:#FAC863">alias</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;default&#x27;</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div></pre></div></pre><p class="py-2">So let&#x27;s create <code>gigs/templates/gigs/lookupresults.html</code>:</p><pre><div class="gatsby-highlight" data-language="django"><pre class="prism-code language-django" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token django language-django delimiter punctuation" style="color:#8dc891">{%</span><span class="token django language-django"> </span><span class="token django language-django tag keyword" style="color:#c5a5c5">extends</span><span class="token django language-django"> </span><span class="token django language-django string" style="color:#8dc891">&quot;gigs/includes/base.html&quot;</span><span class="token django language-django"> </span><span class="token django language-django delimiter punctuation" style="color:#8dc891">%}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain"></span><span class="token django language-django delimiter punctuation" style="color:#8dc891">{%</span><span class="token django language-django"> </span><span class="token django language-django tag keyword" style="color:#c5a5c5">block</span><span class="token django language-django"> </span><span class="token django language-django variable" style="color:#d7deea">content</span><span class="token django language-django"> </span><span class="token django language-django delimiter punctuation" style="color:#8dc891">%}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">    </span><span class="token tag punctuation" style="color:#8dc891">&lt;</span><span class="token tag" style="color:#fc929e">ul</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">    </span><span class="token django language-django delimiter punctuation" style="color:#8dc891">{%</span><span class="token django language-django"> </span><span class="token django language-django tag keyword" style="color:#c5a5c5">for</span><span class="token django language-django"> </span><span class="token django language-django variable" style="color:#d7deea">event</span><span class="token django language-django"> </span><span class="token django language-django keyword" style="color:#c5a5c5">in</span><span class="token django language-django"> </span><span class="token django language-django variable" style="color:#d7deea">events</span><span class="token django language-django"> </span><span class="token django language-django delimiter punctuation" style="color:#8dc891">%}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">    </span><span class="token tag punctuation" style="color:#8dc891">&lt;</span><span class="token tag" style="color:#fc929e">li</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token django language-django delimiter punctuation" style="color:#8dc891">{{</span><span class="token django language-django"> </span><span class="token django language-django variable" style="color:#d7deea">event</span><span class="token django language-django punctuation" style="color:#8dc891">.</span><span class="token django language-django variable" style="color:#d7deea">name</span><span class="token django language-django"> </span><span class="token django language-django delimiter punctuation" style="color:#8dc891">}}</span><span class="token plain"> - </span><span class="token django language-django delimiter punctuation" style="color:#8dc891">{{</span><span class="token django language-django"> </span><span class="token django language-django variable" style="color:#d7deea">event</span><span class="token django language-django punctuation" style="color:#8dc891">.</span><span class="token django language-django variable" style="color:#d7deea">venue</span><span class="token django language-django punctuation" style="color:#8dc891">.</span><span class="token django language-django variable" style="color:#d7deea">name</span><span class="token django language-django"> </span><span class="token django language-django delimiter punctuation" style="color:#8dc891">}}</span><span class="token tag punctuation" style="color:#8dc891">&lt;/</span><span class="token tag" style="color:#fc929e">li</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">    </span><span class="token django language-django delimiter punctuation" style="color:#8dc891">{%</span><span class="token django language-django"> </span><span class="token django language-django tag keyword" style="color:#c5a5c5">endfor</span><span class="token django language-django"> </span><span class="token django language-django delimiter punctuation" style="color:#8dc891">%}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain">    </span><span class="token tag punctuation" style="color:#8dc891">&lt;/</span><span class="token tag" style="color:#fc929e">ul</span><span class="token tag punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain"></span><span class="token django language-django delimiter punctuation" style="color:#8dc891">{%</span><span class="token django language-django"> </span><span class="token django language-django tag keyword" style="color:#c5a5c5">endblock</span><span class="token django language-django"> </span><span class="token django language-django delimiter punctuation" style="color:#8dc891">%}</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Now, if we run our tests, they should pass:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ python manage.py </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> gigs</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">Creating </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> database </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> </span><span class="token builtin class-name" style="color:#FAC863">alias</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;default&#x27;</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">..</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">----------------------------------------------------------------------</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">Ran </span><span class="token number" style="color:#5a9bcf">4</span><span class="token plain"> tests </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">0</span><span class="token plain">.728s</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">OK</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain">Destroying </span><span class="token builtin class-name" style="color:#FAC863">test</span><span class="token plain"> database </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> </span><span class="token builtin class-name" style="color:#FAC863">alias</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;default&#x27;</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div></pre></div></pre><p class="py-2">However, if we try actually submitting the form by hand, we get the error <code>CSRF token missing or incorrect</code>. Edit <code>views.py</code> as follows to resolve this:</p><pre><div class="gatsby-highlight" data-language="python"><pre class="prism-code language-python" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">shortcuts </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> render_to_response</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">views</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">generic</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">edit </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> FormView</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> gigs</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">forms </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> LookupForm</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> gigs</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">models </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> Event</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">utils </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> timezone</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">contrib</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">gis</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">geos </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> Point</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">contrib</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">gis</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">db</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">models</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">functions </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> Distance</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">template </span><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> RequestContext</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">LookupView</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">FormView</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain">    form_class </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> LookupForm</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">def</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">get</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> request</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> render_to_response</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;gigs/lookup.html&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> RequestContext</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">request</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">def</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">form_valid</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> form</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Get data</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token plain">        latitude </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> form</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">cleaned_data</span><span class="token punctuation" style="color:#8dc891">[</span><span class="token string" style="color:#8dc891">&#x27;latitude&#x27;</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token plain">        longitude </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> form</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">cleaned_data</span><span class="token punctuation" style="color:#8dc891">[</span><span class="token string" style="color:#8dc891">&#x27;longitude&#x27;</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">21</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Get today&#x27;s date</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">22</span><span class="token plain">        now </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> timezone</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">now</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">23</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">24</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Get next week&#x27;s date</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">25</span><span class="token plain">        next_week </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> now </span><span class="token operator" style="color:#d7deea">+</span><span class="token plain"> timezone</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">timedelta</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">weeks</span><span class="token operator" style="color:#d7deea">=</span><span class="token number" style="color:#5a9bcf">1</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">26</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">27</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Get Point</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">28</span><span class="token plain">        location </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> Point</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">longitude</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> latitude</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> srid</span><span class="token operator" style="color:#d7deea">=</span><span class="token number" style="color:#5a9bcf">4326</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">29</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">30</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Look up events</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">31</span><span class="token plain">        events </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> Event</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">objects</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token builtin" style="color:#D8DEE9">filter</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">datetime__gte</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">now</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token builtin" style="color:#D8DEE9">filter</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">datetime__lte</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">next_week</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">annotate</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">distance</span><span class="token operator" style="color:#d7deea">=</span><span class="token plain">Distance</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;venue__location&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> location</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">order_by</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;distance&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">[</span><span class="token number" style="color:#5a9bcf">0</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token number" style="color:#5a9bcf">5</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">32</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">33</span><span class="token plain">        </span><span class="token comment" style="color:#999999"># Render the template</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">34</span><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> render_to_response</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;gigs/lookupresults.html&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">35</span><span class="token plain">            </span><span class="token string" style="color:#8dc891">&#x27;events&#x27;</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> events</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">36</span><span class="token plain">            </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Here we&#x27;re adding the request context so that the CSRF token is available.</p><p class="py-2">If you run the dev server, add a few events and venues via the admin, and submit a search, you&#x27;ll see that you&#x27;re returning events closest to you first.</p><p class="py-2">Now that we can submit searches, we&#x27;re ready to commit:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ </span><span class="token function" style="color:#79b6f2">git</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">add</span><span class="token plain"> gigs/</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">$ </span><span class="token function" style="color:#79b6f2">git</span><span class="token plain"> commit -m </span><span class="token string" style="color:#8dc891">&#x27;Can now retrieve search results&#x27;</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">And we&#x27;re done! Of course, you may want to expand on this by plotting each gig venue on a map, or something like that, in which case there&#x27;s plenty of methods of doing so - you can retrieve the latitude and longitude in the template and use Google Maps to display them. I&#x27;ll leave doing so as an exercise for the reader.</p><p class="py-2">I can&#x27;t say that working with GeoDjango isn&#x27;t a bit of a struggle at times, but being able to make spatial queries in this fashion is very useful. With more and more people carrying smartphones, you&#x27;re more likely than ever to be asked to build applications that return data based on someone&#x27;s geographical location, and GeoDjango is a great way to do this with a Django application. You can find the source on <a href="https://github.com/matthewbdaly/gigfinder" class="border-b-2 border-green-400">Github</a>.</p></section><hr/><div class="py-4"><a class="p-category" href="/blog/categories/python/"><span class="inline-block px-4 py-2 my-2 mr-2 text-sm font-bold text-gray-900 bg-purple-200 rounded-full hover:bg-purple-800 hover:text-gray-200 transition-colors duration-500">python</span></a><a class="p-category" href="/blog/categories/django/"><span class="inline-block px-4 py-2 my-2 mr-2 text-sm font-bold text-gray-900 bg-purple-200 rounded-full hover:bg-purple-800 hover:text-gray-200 transition-colors duration-500">django</span></a><a class="p-category" href="/blog/categories/tdd/"><span class="inline-block px-4 py-2 my-2 mr-2 text-sm font-bold text-gray-900 bg-purple-200 rounded-full hover:bg-purple-800 hover:text-gray-200 transition-colors duration-500">tdd</span></a><a class="p-category" href="/blog/categories/postgres/"><span class="inline-block px-4 py-2 my-2 mr-2 text-sm font-bold text-gray-900 bg-purple-200 rounded-full hover:bg-purple-800 hover:text-gray-200 transition-colors duration-500">postgres</span></a><a class="p-category" href="/blog/categories/geo/"><span class="inline-block px-4 py-2 my-2 mr-2 text-sm font-bold text-gray-900 bg-purple-200 rounded-full hover:bg-purple-800 hover:text-gray-200 transition-colors duration-500">geo</span></a><a class="p-category" href="/blog/categories/geodjango/"><span class="inline-block px-4 py-2 my-2 mr-2 text-sm font-bold text-gray-900 bg-purple-200 rounded-full hover:bg-purple-800 hover:text-gray-200 transition-colors duration-500">geodjango</span></a></div><nav class="pt-4 clear-both box-border"><a rel="prev" class="float-left w-1/2 p-2 shadow-sm hover:bg-gray-200 dark:hover:bg-gray-800 transition duration-300 ease-in-out" href="/blog/2016/03/18/my-experience-using-php-7-in-production/"><p><strong class="font-bold clear-both">← Previous page</strong></p><p class="pl-6">My experience using PHP 7 in production</p></a><a rel="next" class="float-right w-1/2 p-2 shadow-sm hover:bg-gray-200 dark:hover:bg-gray-800 transition duration-300 ease-in-out" href="/blog/2016/04/04/writing-faster-laravel-tests/"><p><strong>→ Next page</strong></p><p class="pl-6">Writing faster Laravel tests</p></a></nav><div id="disqus_thread"></div></article></main></div><footer class="w-full p-4 text-gray-100 bg-gray-800"><ul class="flex flex-row flex-wrap justify-center w-full p-2 mx-auto text-center md:w-2/3 box-border"><li class="w-1/3 my-2 md:w-1/6"><a href="/posts/1">Blog</a></li><li class="w-1/3 my-2 md:w-1/6"><a href="/about">About</a></li><li class="w-1/3 my-2 md:w-1/6"><a href="/contact">Contact</a></li><li class="w-1/3 my-2 md:w-1/6"><a href="https://twitter.com/mattbd">Twitter</a></li><li class="w-1/3 my-2 md:w-1/6"><a href="https://github.com/matthewbdaly">Github</a></li><li class="w-1/3 my-2 md:w-1/6"><a href="/rss.xml">Feed</a></li></ul><div class="w-full p-4 mx-auto text-center md:w-2/3"><p>© Matthew Daly <!-- -->2023</p></div></footer></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-17043630-1', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/2016/03/26/building-a-location-aware-web-app-with-geodjango/";window.___webpackCompilationHash="b9af523062f6eabcf4be";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-292603999ddf931fbc86.js"],"app":["/app-8ef96426d66185cd6801.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-37b4064d2301b772dd78.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-2a96a556d79ec68ca5ba.js"],"component---src-pages-search-tsx":["/component---src-pages-search-tsx-70464b9f9e03151151f4.js"],"component---src-templates-404-tsx":["/component---src-templates-404-tsx-f9380642b46958eac878.js"],"component---src-templates-archives-tsx":["/component---src-templates-archives-tsx-8b016c619a73e033ac36.js"],"component---src-templates-categories-tsx":["/component---src-templates-categories-tsx-bf6c75af4b505ad059e7.js"],"component---src-templates-category-tsx":["/component---src-templates-category-tsx-f85e55cd0ab88c0868f7.js"],"component---src-templates-chunk-tsx":["/component---src-templates-chunk-tsx-d23f1a5875602efb5d40.js"],"component---src-templates-page-tsx":["/component---src-templates-page-tsx-5929b8a25568ce4f90b8.js"],"component---src-templates-post-tsx":["/component---src-templates-post-tsx-788762f28ad7a0a75572.js"]};/*]]>*/</script><script src="/polyfill-292603999ddf931fbc86.js" nomodule=""></script><script src="/app-8ef96426d66185cd6801.js" async=""></script><script src="/532a2f07-b2bcfc1100f9b94937a1.js" async=""></script><script src="/framework-a6e7e2d9b047634414ab.js" async=""></script><script src="/webpack-runtime-166415513656f083d970.js" async=""></script></body></html>