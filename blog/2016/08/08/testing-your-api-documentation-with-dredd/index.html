<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta http-equiv="Content-Security-Policy" content="base-uri &#x27;self&#x27;; default-src &#x27;self&#x27; *.google-analytics.com disqus.com *.disqus.com *.disquscdn.com getform.io; script-src &#x27;self&#x27; localhost:* *.addthis.com *.google-analytics.com *.disquscdn.com *.disqus.com disqus.com *.addthisedge.com graph.facebook.com &#x27;unsafe-inline&#x27; &#x27;unsafe-eval&#x27;; style-src &#x27;self&#x27; fonts.googleapis.com *.addthis.com google-analytics.com *.disquscdn.com *.disqus.com &#x27;unsafe-inline&#x27;; object-src &#x27;none&#x27;; form-action &#x27;self&#x27; getform.io; font-src &#x27;self&#x27; data: fonts.google-apis.com fonts.gstatic.com; connect-src &#x27;self&#x27; ws://localhost:* *.google-analytics.com stats.g.doubleclick.net; img-src &#x27;self&#x27; *.google-analytics.com *.disquscdn.com *.disqus.com stats.g.doubleclick.net; child-src &#x27;self&#x27;; frame-src disqus.com *.addthis.com;"/><style data-href="/styles.897d8ad474270ae74787.css" data-identity="gatsby-global-css">/* ! tailwindcss v3.0.7 | MIT License | https://tailwindcss.com */*,:after,:before{border:0 solid;box-sizing:border-box}:after,:before{--tw-content:""}html{-webkit-text-size-adjust:100%;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4}body{line-height:inherit;margin:0}hr{border-top-width:1px;color:inherit;height:0}abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{border-collapse:collapse;border-color:inherit;text-indent:0}button,input,optgroup,select,textarea{color:inherit;font-family:inherit;font-size:100%;line-height:inherit;margin:0;padding:0}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0}fieldset,legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:#9ca3af;opacity:1}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:#9ca3af;opacity:1}input::placeholder,textarea::placeholder{color:#9ca3af;opacity:1}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{height:auto;max-width:100%}[hidden]{display:none}*,:after,:before{--tw-border-opacity:1;--tw-ring-inset:var(--tw-empty,/*!*/ /*!*/);--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur:var(--tw-empty,/*!*/ /*!*/);--tw-brightness:var(--tw-empty,/*!*/ /*!*/);--tw-contrast:var(--tw-empty,/*!*/ /*!*/);--tw-grayscale:var(--tw-empty,/*!*/ /*!*/);--tw-hue-rotate:var(--tw-empty,/*!*/ /*!*/);--tw-invert:var(--tw-empty,/*!*/ /*!*/);--tw-saturate:var(--tw-empty,/*!*/ /*!*/);--tw-sepia:var(--tw-empty,/*!*/ /*!*/);--tw-drop-shadow:var(--tw-empty,/*!*/ /*!*/);--tw-filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);border-color:rgb(229 231 235/var(--tw-border-opacity))}.float-right{float:right}.float-left{float:left}.float-none{float:none}.clear-both{clear:both}.m-0{margin:0}.mx-auto{margin-left:auto;margin-right:auto}.my-8{margin-bottom:2rem;margin-top:2rem}.my-4{margin-bottom:1rem;margin-top:1rem}.my-2{margin-bottom:.5rem;margin-top:.5rem}.mx-0{margin-left:0;margin-right:0}.mt-2{margin-top:.5rem}.-mb-8{margin-bottom:-2rem}.-mb-4{margin-bottom:-1rem}.mt-8{margin-top:2rem}.mr-8{margin-right:2rem}.mt-16{margin-top:4rem}.mr-2{margin-right:.5rem}.box-border{box-sizing:border-box}.block{display:block}.inline-block{display:inline-block}.flex{display:flex}.hidden{display:none}.h-2{height:.5rem}.h-4{height:1rem}.min-h-screen{min-height:100vh}.w-full{width:100%}.w-1\/3{width:33.333333%}.w-2\/3{width:66.666667%}.w-1\/2{width:50%}.w-3\/4{width:75%}.w-1\/4{width:25%}.flex-grow{flex-grow:1}.resize-none{resize:none}.list-disc{list-style-type:disc}.flex-row{flex-direction:row}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.justify-center{justify-content:center}.space-y-32>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-bottom:calc(8rem*var(--tw-space-y-reverse));margin-top:calc(8rem*(1 - var(--tw-space-y-reverse)))}.space-y-16>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-bottom:calc(4rem*var(--tw-space-y-reverse));margin-top:calc(4rem*(1 - var(--tw-space-y-reverse)))}.space-y-8>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-bottom:calc(2rem*var(--tw-space-y-reverse));margin-top:calc(2rem*(1 - var(--tw-space-y-reverse)))}.divide-y>:not([hidden])~:not([hidden]){--tw-divide-y-reverse:0;border-bottom-width:calc(1px*var(--tw-divide-y-reverse));border-top-width:calc(1px*(1 - var(--tw-divide-y-reverse)))}.divide-gray-800>:not([hidden])~:not([hidden]){--tw-divide-opacity:1;border-color:rgb(31 41 55/var(--tw-divide-opacity))}.overflow-x-auto{overflow-x:auto}.overflow-x-scroll{overflow-x:scroll}.rounded-lg{border-radius:.5rem}.rounded-full{border-radius:9999px}.rounded-t-lg{border-top-left-radius:.5rem;border-top-right-radius:.5rem}.border-2{border-width:2px}.border-b-2{border-bottom-width:2px}.border-l-8{border-left-width:8px}.border-b-4{border-bottom-width:4px}.border-green-400{--tw-border-opacity:1;border-color:rgb(74 222 128/var(--tw-border-opacity))}.border-gray-500{--tw-border-opacity:1;border-color:rgb(107 114 128/var(--tw-border-opacity))}.border-gray-800{--tw-border-opacity:1;border-color:rgb(31 41 55/var(--tw-border-opacity))}.border-white{--tw-border-opacity:1;border-color:rgb(255 255 255/var(--tw-border-opacity))}.border-transparent{border-color:transparent}.border-gray-100{--tw-border-opacity:1;border-color:rgb(243 244 246/var(--tw-border-opacity))}.bg-gray-100{--tw-bg-opacity:1;background-color:rgb(243 244 246/var(--tw-bg-opacity))}.bg-gray-300{--tw-bg-opacity:1;background-color:rgb(209 213 219/var(--tw-bg-opacity))}.bg-blue-600{--tw-bg-opacity:1;background-color:rgb(37 99 235/var(--tw-bg-opacity))}.bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255/var(--tw-bg-opacity))}.bg-gray-800{--tw-bg-opacity:1;background-color:rgb(31 41 55/var(--tw-bg-opacity))}.bg-gray-50{--tw-bg-opacity:1;background-color:rgb(249 250 251/var(--tw-bg-opacity))}.bg-purple-200{--tw-bg-opacity:1;background-color:rgb(233 213 255/var(--tw-bg-opacity))}.bg-gradient-to-b{background-image:linear-gradient(to bottom,var(--tw-gradient-stops))}.bg-gradient-to-r{background-image:linear-gradient(to right,var(--tw-gradient-stops))}.from-gray-200{--tw-gradient-from:#e5e7eb;--tw-gradient-stops:var(--tw-gradient-from),var(--tw-gradient-to,rgba(229,231,235,0))}.from-green-400{--tw-gradient-from:#4ade80;--tw-gradient-stops:var(--tw-gradient-from),var(--tw-gradient-to,rgba(74,222,128,0))}.via-blue-500{--tw-gradient-stops:var(--tw-gradient-from),#3b82f6,var(--tw-gradient-to,rgba(59,130,246,0))}.to-gray-300{--tw-gradient-to:#d1d5db}.to-purple-500{--tw-gradient-to:#a855f7}.p-4{padding:1rem}.p-2{padding:.5rem}.px-8{padding-left:2rem;padding-right:2rem}.py-4{padding-bottom:1rem;padding-top:1rem}.py-2{padding-bottom:.5rem;padding-top:.5rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-4{padding-right:1rem}.pl-4,.px-4{padding-left:1rem}.pb-16{padding-bottom:4rem}.pt-4{padding-top:1rem}.pl-6{padding-left:1.5rem}.text-center{text-align:center}.font-mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.font-sans{font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji}.text-sm{font-size:.875rem;line-height:1.25rem}.text-4xl{font-size:2.25rem;line-height:2.5rem}.text-2xl{font-size:1.5rem;line-height:2rem}.text-xl{font-size:1.25rem}.text-lg,.text-xl{line-height:1.75rem}.text-lg{font-size:1.125rem}.font-bold{font-weight:700}.font-semibold{font-weight:600}.lowercase{text-transform:lowercase}.italic{font-style:italic}.leading-6{line-height:1.5rem}.text-gray-200{--tw-text-opacity:1;color:rgb(229 231 235/var(--tw-text-opacity))}.text-gray-900{--tw-text-opacity:1;color:rgb(17 24 39/var(--tw-text-opacity))}.text-gray-800{--tw-text-opacity:1;color:rgb(31 41 55/var(--tw-text-opacity))}.text-white{--tw-text-opacity:1;color:rgb(255 255 255/var(--tw-text-opacity))}.text-black{--tw-text-opacity:1;color:rgb(0 0 0/var(--tw-text-opacity))}.text-gray-100{--tw-text-opacity:1;color:rgb(243 244 246/var(--tw-text-opacity))}.antialiased{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.shadow-lg{--tw-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -4px rgba(0,0,0,.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color),0 4px 6px -4px var(--tw-shadow-color)}.shadow-lg,.shadow-sm{box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.shadow-sm{--tw-shadow:0 1px 2px 0 rgba(0,0,0,.05);--tw-shadow-colored:0 1px 2px 0 var(--tw-shadow-color)}.filter{filter:var(--tw-filter)}.transition-colors{transition-duration:.15s;transition-property:color,background-color,border-color,fill,stroke,-webkit-text-decoration-color;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,-webkit-text-decoration-color;transition-timing-function:cubic-bezier(.4,0,.2,1)}.transition{transition-duration:.15s;transition-property:color,background-color,border-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-text-decoration-color,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-text-decoration-color,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1)}.duration-500{transition-duration:.5s}.duration-300{transition-duration:.3s}.ease-in-out{transition-timing-function:cubic-bezier(.4,0,.2,1)}code[class*=language-],pre[class*=language-]{display:block}.hover\:border-green-400:hover{--tw-border-opacity:1;border-color:rgb(74 222 128/var(--tw-border-opacity))}.hover\:bg-gray-200:hover{--tw-bg-opacity:1;background-color:rgb(229 231 235/var(--tw-bg-opacity))}.hover\:bg-purple-800:hover{--tw-bg-opacity:1;background-color:rgb(107 33 168/var(--tw-bg-opacity))}.hover\:text-gray-200:hover{--tw-text-opacity:1;color:rgb(229 231 235/var(--tw-text-opacity))}.focus\:border-blue-300:focus{--tw-border-opacity:1;border-color:rgb(147 197 253/var(--tw-border-opacity))}.focus\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.focus\:ring:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(3px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}@media (prefers-color-scheme:dark){.dark\:divide-gray-200>:not([hidden])~:not([hidden]){--tw-divide-opacity:1;border-color:rgb(229 231 235/var(--tw-divide-opacity))}.dark\:border-black{--tw-border-opacity:1;border-color:rgb(0 0 0/var(--tw-border-opacity))}.dark\:bg-gray-800{--tw-bg-opacity:1;background-color:rgb(31 41 55/var(--tw-bg-opacity))}.dark\:bg-gray-900{--tw-bg-opacity:1;background-color:rgb(17 24 39/var(--tw-bg-opacity))}.dark\:bg-gray-700{--tw-bg-opacity:1;background-color:rgb(55 65 81/var(--tw-bg-opacity))}.dark\:text-gray-300{--tw-text-opacity:1;color:rgb(209 213 219/var(--tw-text-opacity))}.dark\:text-gray-100{--tw-text-opacity:1;color:rgb(243 244 246/var(--tw-text-opacity))}.dark\:text-gray-200{--tw-text-opacity:1;color:rgb(229 231 235/var(--tw-text-opacity))}.dark\:hover\:bg-gray-800:hover{--tw-bg-opacity:1;background-color:rgb(31 41 55/var(--tw-bg-opacity))}}@media (min-width:768px){.md\:float-none{float:none}.md\:block{display:block}.md\:w-40{width:10rem}.md\:w-2\/3{width:66.666667%}.md\:w-1\/6{width:16.666667%}}@media (min-width:1024px){.lg\:float-right{float:right}.lg\:float-left{float:left}.lg\:mt-4{margin-top:1rem}.lg\:text-left{text-align:left}}.prism-code{-webkit-overflow-scrolling:touch;background-color:transparent;border-radius:.2em;float:left;font-size:1rem;margin-bottom:1rem;margin-top:1rem;overflow:initial;padding-bottom:1rem;padding-top:1rem;position:relative}.prism-code.title{border-radius:0 0 .2em .2em}pre.prism-code{float:left;min-width:100%;overflow:initial;padding:20px}.token{display:inline-block}li>code,p>code{word-wrap:break-word;background:#011627;border-radius:.2em;color:#d6deeb;padding:.2em;white-space:pre-wrap}.gatsby-highlight{-webkit-overflow-scrolling:touch;font-size:1rem;overflow:auto;position:relative}.gatsby-highlight::-webkit-scrollbar{display:none}.gatsby-highlight>code[class*=language-],.gatsby>pre[class*=language-]{-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;line-height:1.5;overflow-wrap:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-break:normal;word-spacing:normal}.gatsby-highlight .token-line{border-left:4px solid transparent;margin-left:-20px;margin-right:-20px}.line-number-style{display:inline-block;opacity:.3;padding-left:1em;padding-right:2em;position:relative;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1.2em}.gatsby-highlight .token-line.highlight-line{background-color:#023751;border-left:4px solid #029bce}.gatsby-highlight .token-line.highlight-line .line-number-style{left:0;opacity:.5;width:calc(1.2em - 4px)}</style><meta name="generator" content="Gatsby 4.4.0"/><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){if(void 0===e.target.dataset.mainImage)return;if(void 0===e.target.dataset.gatsbyImageSsr)return;const t=e.target;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link rel="search" type="application/opensearchdescription+xml" crossorigin="anonymous" href="/opensearch.xml"/><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><title data-react-helmet="true">Testing your API documentation with Dredd | Matthew Daly</title><link data-react-helmet="true" href="https://matthewdaly.co.uk/blog/2016/08/08/testing-your-api-documentation-with-dredd/" rel="canonical"/><link data-react-helmet="true" href="https://twitter.com/mattbd" rel="me"/><link data-react-helmet="true" href="https://github.com/matthewbdaly" rel="me"/><link data-react-helmet="true" href="mailto:matthew@matthewdaly.co.uk" rel="me"/><link data-react-helmet="true" href="/key.pub" rel="pgpkey"/><link data-react-helmet="true" href="https://webmention.io/matthewdaly.co.uk/xmlrpc" rel="pingback"/><link data-react-helmet="true" href="https://webmention.io/matthewdaly.co.uk/webmention" rel="webmention"/><link data-react-helmet="true" rel="authorization_endpoint" href="https://indieauth.com/auth"/><link data-react-helmet="true" rel="token_endpoint" href="https://tokens.indieauth.com/token"/><link data-react-helmet="true" rel="openid.delegate" href="https://matthewdaly.co.uk"/><link data-react-helmet="true" rel="openid.server" href="https://openid.indieauth.com/openid"/><link data-react-helmet="true" rel="alternate" type="application/rss+xml" title="Matthew Daly - feed" href="/rss.xml"/><link data-react-helmet="true" rel="alternate" type="application/atom+xml" title="Matthew Daly - feed" href="/atom.xml"/><link data-react-helmet="true" rel="alternate" type="application/feed+json" title="Matthew Daly - feed" href="/feed.json"/><meta data-react-helmet="true" name="description" content="Documenting your API is something most developers agree is generally a Good Thing, but it&#x27;s a pain in the backside, and somewhat boring to do. What you really need is a tool that…"/><meta data-react-helmet="true" property="og:title" content="Testing your API documentation with Dredd"/><meta data-react-helmet="true" property="og:description" content="Documenting your API is something most developers agree is generally a Good Thing, but it&#x27;s a pain in the backside, and somewhat boring to do. What you really need is a tool that…"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="mattbd"/><meta data-react-helmet="true" name="twitter:title" content="Testing your API documentation with Dredd"/><meta data-react-helmet="true" name="twitter:description" content="Documenting your API is something most developers agree is generally a Good Thing, but it&#x27;s a pain in the backside, and somewhat boring to do. What you really need is a tool that…"/><link rel="sitemap" type="application/xml" href="/sitemap/sitemap-index.xml"/><link rel="icon" href="/favicon-32x32.png?v=53aa06cf17e4239d0dba6ffd09854e02" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#3b82f6"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=53aa06cf17e4239d0dba6ffd09854e02"/><link as="script" rel="preload" href="/webpack-runtime-261a46458a2174c3d65d.js"/><link as="script" rel="preload" href="/framework-20258163f1bb460ca28d.js"/><link as="script" rel="preload" href="/app-7732d1bced30b102af67.js"/><link as="script" rel="preload" href="/f0e45107-1ab5e6e9877396d2cf44.js"/><link as="script" rel="preload" href="/e87769ff526c098a69bffbfff9ee9d57397fcb93-8f87856d74c913e45c49.js"/><link as="script" rel="preload" href="/15a3be27178e285ff113e12c60c30466a8f4d4c5-c660223fcd21390a96b2.js"/><link as="script" rel="preload" href="/7840d69eefded84ab93ff6e879351e9a3a16821f-3cc77dc4aa7437d407dd.js"/><link as="script" rel="preload" href="/component---src-templates-post-tsx-1c8e5dda5cc39be35388.js"/><link as="fetch" rel="preload" href="/page-data/blog/2016/08/08/testing-your-api-documentation-with-dredd/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/290055352.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2909664151.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="flex flex-col min-h-screen pb-16 font-sans text-lg antialiased text-gray-800 bg-gray-50 dark:text-gray-100 dark:bg-gray-700 leading-6"><div class="w-full h-2 bg-gradient-to-r from-green-400 via-blue-500 to-purple-500"></div><nav class="w-full p-4 mx-auto lowercase md:w-2/3"><h1 class="block float-none py-4 text-4xl text-center lg:float-left lg:text-left"><a href="/">Matthew Daly</a></h1><ul class="py-2 text-center lg:float-right md:block lg:text-left"><li class="inline-block pr py-2 mr-8 lg:mt-4 text-sm text-gray-900 dark:text-gray-200 border-b-4 border-transparent hover:border-green-400 transition-colors duration-500"><a href="/blog/archives">Archives</a></li><li class="inline-block pr py-2 mr-8 lg:mt-4 text-sm text-gray-900 dark:text-gray-200 border-b-4 border-transparent hover:border-green-400 transition-colors duration-500"><a href="/about">About</a></li><li class="inline-block pr py-2 mr-8 lg:mt-4 text-sm text-gray-900 dark:text-gray-200 border-b-4 border-transparent hover:border-green-400 transition-colors duration-500"><a href="/uses">Uses</a></li><li class="inline-block pr py-2 mr-8 lg:mt-4 text-sm text-gray-900 dark:text-gray-200 border-b-4 border-transparent hover:border-green-400 transition-colors duration-500"><a href="/posts/1">Blog</a></li><li class="inline-block pr py-2 mr-8 lg:mt-4 text-sm text-gray-900 dark:text-gray-200 border-b-4 border-transparent hover:border-green-400 transition-colors duration-500"><a href="/blog/categories">Categories</a></li><li class="inline-block pr py-2 mr-8 lg:mt-4 text-sm text-gray-900 dark:text-gray-200 border-b-4 border-transparent hover:border-green-400 transition-colors duration-500"><a href="/search">Search</a></li></ul></nav><div class="w-full h-4 clear"></div><main class="flex-grow w-full p-4 mx-auto md:w-2/3"><article class="h-entry"><header><h2 class="py-4 text-2xl font-bold e-content p-name"><a class="u-url" href="https://matthewdaly.co.uk/blog/2016/08/08/testing-your-api-documentation-with-dredd/">Testing your API documentation with Dredd</a></h2><p class="my-4 text-lg font-semibold">Published by <a href="/" rel="author">Matthew Daly</a> at <!-- -->8th August 2016 4:05 pm</p><time class="hidden dt-published">2016-08-08T16:05:00+00:00</time></header><section><p class="py-2">Documenting your API is something most developers agree is generally a Good Thing, but it&#x27;s a pain in the backside, and somewhat boring to do. What you really need is a tool that allows you to specify the details of your API before you start work, generate documentation from that specification, and test your implementation against that specification.</p><p class="py-2">Fortunately, such a tool exists. The <a href="https://apiblueprint.org/" class="border-b-2 border-green-400">Blueprint</a> specification allows you to document your API using a Markdown-like syntax. You can then create HTML documentation using a tool like <a href="https://github.com/danielgtaylor/aglio" class="border-b-2 border-green-400">Aglio</a> or <a href="https://apiary.io/" class="border-b-2 border-green-400">Apiary</a>, and test it against your implementation using <a href="https://github.com/apiaryio/dredd" class="border-b-2 border-green-400">Dredd</a>.</p><p class="py-2">In this tutorial we&#x27;ll implement a very basic REST API using the Lumen framework. We&#x27;ll first specify our API, then we&#x27;ll implement routes to match the implementation. In the process, we&#x27;ll demonstrate the Blueprint specification in action.</p><h2 class="py-4 text-2xl font-bold">Getting started</h2><p class="py-2">Assuming you already have PHP 5.6 or better and Composer installed, run the following command to create our Lumen app skeleton:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style"></span><span class="token plain">$ </span><span class="token function" style="color:#79b6f2">composer</span><span class="token plain"> create-project --prefer-dist laravel/lumen demoapi</span></div></pre></div></pre><p class="py-2">Once it has finished installing, we&#x27;ll also need to add the Dredd hooks:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ </span><span class="token builtin class-name" style="color:#FAC863">cd</span><span class="token plain"> demoapi</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">$ </span><span class="token function" style="color:#79b6f2">composer</span><span class="token plain"> require ddelnano/dredd-hooks-php</span></div></pre></div></pre><p class="py-2">We need to install Dredd. It&#x27;s a Node.js tool, so you&#x27;ll need to have that installed. We&#x27;ll also install Aglio to generate HTML versions of our documentation:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style"></span><span class="token plain">$ </span><span class="token function" style="color:#79b6f2">npm</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">install</span><span class="token plain"> -g aglio dredd</span></div></pre></div></pre><p class="py-2">We also need to create a configuration file for Dredd, which you can do by running <code>dredd init</code>. Or you can just copy the one below:</p><pre><div class="gatsby-highlight" data-language="yml"><pre class="prism-code language-yml" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token key atrule">dry-run</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> </span><span class="token null important" style="font-weight:400">null</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain"></span><span class="token key atrule">hookfiles</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> </span><span class="token null important" style="font-weight:400">null</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain"></span><span class="token key atrule">language</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> php</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain"></span><span class="token key atrule">sandbox</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#ff8b50;font-weight:400">false</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain"></span><span class="token key atrule">server</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;php -S localhost:3000 -t public/&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain"></span><span class="token key atrule">server-wait</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">3</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain"></span><span class="token key atrule">init</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#ff8b50;font-weight:400">false</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain"></span><span class="token key atrule">custom</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">  </span><span class="token key atrule">apiaryApiKey</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain"></span><span class="token key atrule">names</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#ff8b50;font-weight:400">false</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain"></span><span class="token key atrule">only</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain"></span><span class="token key atrule">reporter</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> apiary</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain"></span><span class="token key atrule">output</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain"></span><span class="token key atrule">header</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain"></span><span class="token key atrule">sorted</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#ff8b50;font-weight:400">false</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token plain"></span><span class="token key atrule">user</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> </span><span class="token null important" style="font-weight:400">null</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token plain"></span><span class="token key atrule">inline-errors</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#ff8b50;font-weight:400">false</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token plain"></span><span class="token key atrule">details</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#ff8b50;font-weight:400">false</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token plain"></span><span class="token key atrule">method</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token plain"></span><span class="token key atrule">color</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#ff8b50;font-weight:400">true</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">21</span><span class="token plain"></span><span class="token key atrule">level</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> info</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">22</span><span class="token plain"></span><span class="token key atrule">timestamp</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#ff8b50;font-weight:400">false</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">23</span><span class="token plain"></span><span class="token key atrule">silent</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#ff8b50;font-weight:400">false</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">24</span><span class="token plain"></span><span class="token key atrule">path</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">25</span><span class="token plain"></span><span class="token key atrule">hooks-worker-timeout</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">5000</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">26</span><span class="token plain"></span><span class="token key atrule">hooks-worker-connect-timeout</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">1500</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">27</span><span class="token plain"></span><span class="token key atrule">hooks-worker-connect-retry</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">500</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">28</span><span class="token plain"></span><span class="token key atrule">hooks-worker-after-connect-wait</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">100</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">29</span><span class="token plain"></span><span class="token key atrule">hooks-worker-term-timeout</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">5000</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">30</span><span class="token plain"></span><span class="token key atrule">hooks-worker-term-retry</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">500</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">31</span><span class="token plain"></span><span class="token key atrule">hooks-worker-handler-host</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> localhost</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">32</span><span class="token plain"></span><span class="token key atrule">hooks-worker-handler-port</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">61321</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">33</span><span class="token plain"></span><span class="token key atrule">config</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> ./dredd.yml</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">34</span><span class="token plain"></span><span class="token key atrule">blueprint</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> apiary.apib</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">35</span><span class="token plain"></span><span class="token key atrule">endpoint</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;http://localhost:3000&#x27;</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">If you choose to run <code>dredd init</code>, you&#x27;ll see prompts for a number of things, including:</p><ul class="py-2 pl-4"><li class="list-disc">The server command</li><li class="list-disc">The blueprint file name</li><li class="list-disc">The endpoint</li><li class="list-disc">Any Apiary API key</li><li class="list-disc">The language you want to use</li></ul><p class="py-2">There are Dredd hooks for many languages, so if you&#x27;re planning on building a REST API in a language other than PHP, don&#x27;t worry - you can still test it with Dredd, you&#x27;ll just get prompted to install different hooks.</p><p class="py-2">Note the <code>hookfiles</code> section, which specifies a hookfile to run during the test in order to set up the API. We&#x27;ll touch on that in a moment. Also, note the <code>server</code> setting - this specifies the command we should call to run the server. In this case we&#x27;re using the PHP development server.</p><p class="py-2">If you&#x27;re using Apiary with your API (which I highly recommend), you can also set the following parameter to ensure that every time you run Dredd, it submits the results to Apiary:</p><pre><div class="gatsby-highlight" data-language="yml"><pre class="prism-code language-yml" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token key atrule">custom</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">  </span><span class="token key atrule">apiaryApiKey</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> &lt;API KEY HERE</span><span class="token punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">  </span><span class="token key atrule">apiaryApiName</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> &lt;API NAME HERE</span><span class="token punctuation" style="color:#8dc891">&gt;</span><span class="token plain"></span></div></pre></div></pre><h2 class="py-4 text-2xl font-bold">Hookfiles</h2><p class="py-2">As mentioned, the hooks allow you to set up your API. In our case, we&#x27;ll need to set up some fixtures for our tests.  Save this file at <code>tests/dredd/hooks/hookfile.php</code>:</p><pre><div class="gatsby-highlight" data-language="php"><pre class="prism-code language-php" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token delimiter important" style="font-weight:400">&lt;?php</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">use</span><span class="token plain"> </span><span class="token package">Dredd</span><span class="token package punctuation" style="color:#8dc891">\</span><span class="token package">Hooks</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">use</span><span class="token plain"> </span><span class="token package">Illuminate</span><span class="token package punctuation" style="color:#8dc891">\</span><span class="token package">Support</span><span class="token package punctuation" style="color:#8dc891">\</span><span class="token package">Facades</span><span class="token package punctuation" style="color:#8dc891">\</span><span class="token package">Artisan</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">require</span><span class="token plain"> </span><span class="token constant" style="color:#5a9bcf">__DIR__</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">.</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;/../../../vendor/autoload.php&#x27;</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain"></span><span class="token variable" style="color:#d7deea">$app</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">require</span><span class="token plain"> </span><span class="token constant" style="color:#5a9bcf">__DIR__</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">.</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;/../../../bootstrap/app.php&#x27;</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain"></span><span class="token variable" style="color:#d7deea">$app</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">make</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token class-name class-name-fully-qualified static-context punctuation" style="color:#8dc891">\</span><span class="token class-name class-name-fully-qualified static-context" style="color:#FAC863">Illuminate</span><span class="token class-name class-name-fully-qualified static-context punctuation" style="color:#8dc891">\</span><span class="token class-name class-name-fully-qualified static-context" style="color:#FAC863">Contracts</span><span class="token class-name class-name-fully-qualified static-context punctuation" style="color:#8dc891">\</span><span class="token class-name class-name-fully-qualified static-context" style="color:#FAC863">Console</span><span class="token class-name class-name-fully-qualified static-context punctuation" style="color:#8dc891">\</span><span class="token class-name class-name-fully-qualified static-context" style="color:#FAC863">Kernel</span><span class="token operator" style="color:#d7deea">::</span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">bootstrap</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain"></span><span class="token class-name static-context" style="color:#FAC863">Hooks</span><span class="token operator" style="color:#d7deea">::</span><span class="token function" style="color:#79b6f2">beforeAll</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token keyword" style="color:#c5a5c5">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token operator" style="color:#d7deea">&amp;</span><span class="token variable" style="color:#d7deea">$transaction</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">use</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token variable" style="color:#d7deea">$app</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain">   </span><span class="token function" style="color:#79b6f2">putenv</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;DB_CONNECTION=sqlite&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain">   </span><span class="token function" style="color:#79b6f2">putenv</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;DB_DATABASE=:memory:&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain">   </span><span class="token class-name static-context" style="color:#FAC863">Artisan</span><span class="token operator" style="color:#d7deea">::</span><span class="token function" style="color:#79b6f2">call</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;migrate:refresh&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token plain">   </span><span class="token class-name static-context" style="color:#FAC863">Artisan</span><span class="token operator" style="color:#d7deea">::</span><span class="token function" style="color:#79b6f2">call</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;db:seed&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token plain"></span><span class="token class-name static-context" style="color:#FAC863">Hooks</span><span class="token operator" style="color:#d7deea">::</span><span class="token function" style="color:#79b6f2">beforeEach</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token keyword" style="color:#c5a5c5">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token operator" style="color:#d7deea">&amp;</span><span class="token variable" style="color:#d7deea">$transaction</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">use</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token variable" style="color:#d7deea">$app</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token plain">   </span><span class="token class-name static-context" style="color:#FAC863">Artisan</span><span class="token operator" style="color:#d7deea">::</span><span class="token function" style="color:#79b6f2">call</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;migrate:refresh&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token plain">   </span><span class="token class-name static-context" style="color:#FAC863">Artisan</span><span class="token operator" style="color:#d7deea">::</span><span class="token function" style="color:#79b6f2">call</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;db:seed&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">21</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Before the tests run, we set the environment up to use an in-memory SQLite database. We also migrate and seed the database, so we&#x27;re working with a clean database. As part of this tutorial, we&#x27;ll create seed files for the fixtures we need in the database.</p><p class="py-2">This hookfile assumes that the user does not need to be authenticated to communicate with the API. If that&#x27;s not the case for your API, you may want to include something like this in your hookfile&#x27;s <code>beforeEach</code> callback:</p><pre><div class="gatsby-highlight" data-language="php"><pre class="prism-code language-php" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">   </span><span class="token variable" style="color:#d7deea">$user</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token class-name class-name-fully-qualified static-context" style="color:#FAC863">App</span><span class="token class-name class-name-fully-qualified static-context punctuation" style="color:#8dc891">\</span><span class="token class-name class-name-fully-qualified static-context" style="color:#FAC863">User</span><span class="token operator" style="color:#d7deea">::</span><span class="token function" style="color:#79b6f2">first</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">   </span><span class="token variable" style="color:#d7deea">$token</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token class-name static-context" style="color:#FAC863">JWTAuth</span><span class="token operator" style="color:#d7deea">::</span><span class="token function" style="color:#79b6f2">fromUser</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token variable" style="color:#d7deea">$user</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">   </span><span class="token variable" style="color:#d7deea">$transaction</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token property" style="color:#5a9bcf">request</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token property" style="color:#5a9bcf">headers</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token property" style="color:#5a9bcf">Authorization</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;Bearer &#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">.</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$token</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Here we&#x27;re using the <a href="https://github.com/tymondesigns/jwt-auth" class="border-b-2 border-green-400">JWT Auth</a> package for Laravel to authenticate users of our API, and we need to set the <code>Authorization</code> header to contain a valid JSON web token for the given user. If you&#x27;re using a different method, such as HTTP Basic authentication, you&#x27;ll need to amend this code to reflect that.</p><p class="py-2">With that done, we need to create the Blueprint file for our API. Recall the following line in <code>dredd.yml</code>:</p><pre><div class="gatsby-highlight" data-language="yml"><pre class="prism-code language-yml" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style"></span><span class="token key atrule">blueprint</span><span class="token punctuation" style="color:#8dc891">:</span><span class="token plain"> apiary.apib</span></div></pre></div></pre><p class="py-2">This specifies the path to our documentation. Let&#x27;s create that file:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style"></span><span class="token plain">$ </span><span class="token function" style="color:#79b6f2">touch</span><span class="token plain"> apiary.apib</span></div></pre></div></pre><p class="py-2">Once this is done, you should be able to run Dredd:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ dredd</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">info: Configuration </span><span class="token string" style="color:#8dc891">&#x27;./dredd.yml&#x27;</span><span class="token plain"> found, ignoring other arguments.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">info: Using apiary reporter.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">info: Starting server with command: php -S localhost:3000 -t public/</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">info: Waiting </span><span class="token number" style="color:#5a9bcf">3</span><span class="token plain"> seconds </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> server </span><span class="token builtin class-name" style="color:#FAC863">command</span><span class="token plain"> to start</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">warn: Parser warning </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">file</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;apiary.apib&#x27;</span><span class="token builtin class-name" style="color:#FAC863">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">warning code undefined</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> Could not recognize API description format. Falling back to API Blueprint by default.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">info: Beginning Dredd testing</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain">complete: Tests took 619ms</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">complete: See results </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> Apiary at: https://app.apiary.io/public/tests/run/4aab4155-cfc4-4fda-983a-fea280933ad4</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain">info: Sending SIGTERM to the backend server</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain">info: Backend server was killed</span></div></pre></div></pre><p class="py-2">With that done, we&#x27;re ready to start work on our API.</p><h2 class="py-4 text-2xl font-bold">Our first route</h2><p class="py-2">Dredd is not a testing tool in the usual sense. Under no circumstances should you use it as a substitute for something like PHPUnit - that&#x27;s not what it&#x27;s for. It&#x27;s for ensuring that your documentation and your implementation remain in sync. However, it&#x27;s not entirely impractical to use it as a Behaviour-driven development tool in the same vein as Cucumber or Behat - you can use it to plan out the endpoints your API will have, the requests they accept, and the responses they return, and then verify your implementation against the documentation.</p><p class="py-2">We will only have a single endpoint, in order to keep this tutorial as simple and concise as possible. Our endpoint will expose products for a shop, and will allow users to fetch, create, edit and delete products. Note that we won&#x27;t be implementing any kind of authentication, which in production is almost certainly not what you want - we&#x27;re just going for the simplest possible implementation.</p><p class="py-2">First, we&#x27;ll implement getting a list of products:</p><pre><div class="gatsby-highlight" data-language="markdown"><pre class="prism-code language-markdown" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">FORMAT: 1A</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain"></span><span class="token title important punctuation" style="font-weight:400;color:#8dc891">#</span><span class="token title important" style="font-weight:400"> Demo API</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain"></span><span class="token title important punctuation" style="font-weight:400;color:#8dc891">#</span><span class="token title important" style="font-weight:400"> Products [/api/products]</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">Product object representation</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain"></span><span class="token title important punctuation" style="font-weight:400;color:#8dc891">##</span><span class="token title important" style="font-weight:400"> Get products [GET /api/products]</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">Get a list of products</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain"></span><span class="token list punctuation" style="color:#8dc891">+</span><span class="token plain"> Request (application/json)</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain"></span><span class="token list punctuation" style="color:#8dc891">+</span><span class="token plain"> Response 200 (application/json)</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain">    </span><span class="token list punctuation" style="color:#8dc891">+</span><span class="token plain"> Body</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token plain"></span><span class="token code keyword" style="color:#c5a5c5">            {</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token code keyword" style="color:#c5a5c5">                &quot;id&quot;: 1,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token code keyword" style="color:#c5a5c5">                &quot;name&quot;: &quot;Purple widget&quot;,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token code keyword" style="color:#c5a5c5">                &quot;description&quot;: &quot;A purple widget&quot;,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token code keyword" style="color:#c5a5c5">                &quot;price&quot;: 5.99,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">21</span><span class="token code keyword" style="color:#c5a5c5">                &quot;attributes&quot;: {</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">22</span><span class="token code keyword" style="color:#c5a5c5">                    &quot;colour&quot;: &quot;Purple&quot;,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">23</span><span class="token code keyword" style="color:#c5a5c5">                    &quot;size&quot;: &quot;Small&quot;</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">24</span><span class="token code keyword" style="color:#c5a5c5">                }</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">25</span><span class="token code keyword" style="color:#c5a5c5">            }</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">A little explanation is called for. First the <code>FORMAT</code> section denotes the version of the API. Then, the <code># Demo API</code> section denotes the name of the API.</p><p class="py-2">Next, we define the <code>Products</code> endpoint, followed by our first method. Then we define what should be contained in the request, and what the response should look like. Blueprint is a little more complex than that, but that&#x27;s sufficient to get us started.</p><p class="py-2">Then we run <code>dredd</code> again:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ dredd.yml</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">info: Configuration </span><span class="token string" style="color:#8dc891">&#x27;./dredd.yml&#x27;</span><span class="token plain"> found, ignoring other arguments.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">info: Using apiary reporter.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">info: Starting server with command: php -S localhost:3000 -t public/</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">info: Waiting </span><span class="token number" style="color:#5a9bcf">3</span><span class="token plain"> seconds </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> server </span><span class="token builtin class-name" style="color:#FAC863">command</span><span class="token plain"> to start</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">info: Beginning Dredd testing</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">fail: GET /api/products duration: 61ms</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain">info: Displaying failed tests</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">fail: GET /api/products duration: 61ms</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain">fail: headers: Header </span><span class="token string" style="color:#8dc891">&#x27;content-type&#x27;</span><span class="token plain"> has value </span><span class="token string" style="color:#8dc891">&#x27;text/html; charset=UTF-8&#x27;</span><span class="token plain"> instead of </span><span class="token string" style="color:#8dc891">&#x27;application/json&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain">body: Can</span><span class="token string" style="color:#8dc891">&#x27;t validate real media type &#x27;</span><span class="token plain">text/plain</span><span class="token string" style="color:#8dc891">&#x27; against expected media type &#x27;</span><span class="token plain">application/json</span><span class="token string" style="color:#8dc891">&#x27;.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token string" style="color:#8dc891">statusCode: Status code is not &#x27;</span><span class="token number" style="color:#5a9bcf">200</span><span class="token string" style="color:#8dc891">&#x27;</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token string" style="display:inline-block;color:#8dc891">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token string" style="color:#8dc891">request: </span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token string" style="color:#8dc891">method: GET</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token string" style="color:#8dc891">uri: /api/products</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token string" style="color:#8dc891">headers: </span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token string" style="color:#8dc891">    Content-Type: application/json</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token string" style="color:#8dc891">    User-Agent: Dredd/1.5.0 (Linux 4.4.0-31-generic; x64)</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token string" style="display:inline-block;color:#8dc891">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">21</span><span class="token string" style="color:#8dc891">body: </span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">22</span><span class="token string" style="display:inline-block;color:#8dc891">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">23</span><span class="token string" style="display:inline-block;color:#8dc891">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">24</span><span class="token string" style="display:inline-block;color:#8dc891">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">25</span><span class="token string" style="color:#8dc891">expected: </span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">26</span><span class="token string" style="color:#8dc891">headers: </span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">27</span><span class="token string" style="color:#8dc891">    Content-Type: application/json</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">28</span><span class="token string" style="display:inline-block;color:#8dc891">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">29</span><span class="token string" style="color:#8dc891">body: </span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">30</span><span class="token string" style="color:#8dc891">{</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">31</span><span class="token string" style="color:#8dc891">  &quot;id&quot;: 1,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">32</span><span class="token string" style="color:#8dc891">  &quot;name&quot;: &quot;Purple widget&quot;,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">33</span><span class="token string" style="color:#8dc891">  &quot;description&quot;: &quot;A purple widget&quot;,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">34</span><span class="token string" style="color:#8dc891">  &quot;price&quot;: 5.99,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">35</span><span class="token string" style="color:#8dc891">  &quot;attributes&quot;: {</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">36</span><span class="token string" style="color:#8dc891">    &quot;colour&quot;: &quot;Purple&quot;,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">37</span><span class="token string" style="color:#8dc891">    &quot;size&quot;: &quot;Small&quot;</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">38</span><span class="token string" style="color:#8dc891">  }</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">39</span><span class="token string" style="color:#8dc891">}</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">40</span><span class="token string" style="color:#8dc891">statusCode: 200</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">41</span><span class="token string" style="display:inline-block;color:#8dc891">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">42</span><span class="token string" style="display:inline-block;color:#8dc891">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">43</span><span class="token string" style="color:#8dc891">actual: </span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">44</span><span class="token string" style="color:#8dc891">statusCode: 404</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">45</span><span class="token string" style="color:#8dc891">headers: </span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">46</span><span class="token string" style="color:#8dc891">    host: localhost:3000</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">47</span><span class="token string" style="color:#8dc891">    connection: close</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">48</span><span class="token string" style="color:#8dc891">    x-powered-by: PHP/7.0.8-0ubuntu0.16.04.2</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">49</span><span class="token string" style="color:#8dc891">    cache-control: no-cache</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">50</span><span class="token string" style="color:#8dc891">    date: Mon, 08 Aug 2016 10:30:33 GMT</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">51</span><span class="token string" style="color:#8dc891">    content-type: text/html; charset=UTF-8</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">52</span><span class="token string" style="display:inline-block;color:#8dc891">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">53</span><span class="token string" style="color:#8dc891">body: </span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">54</span><span class="token string" style="color:#8dc891">&lt;!DOCTYPE html&gt;</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">55</span><span class="token string" style="color:#8dc891">&lt;html&gt;</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">56</span><span class="token string" style="color:#8dc891">    &lt;head&gt;</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">57</span><span class="token string" style="color:#8dc891">        &lt;meta name=&quot;robots&quot; content=&quot;noindex,nofollow&quot; /&gt;</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">58</span><span class="token string" style="color:#8dc891">        &lt;style&gt;</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">59</span><span class="token string" style="color:#8dc891">            /* Copyright (c) 2010, Yahoo! Inc. All rights reserved. Code licensed under the BSD License: http://developer.yahoo.com/yui/license.html */</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">60</span><span class="token string" style="color:#8dc891">            html{color:#000;background:#FFF;}body,div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,code,form,fieldset,legend,input,textarea,p,blockquote,th,td{margin:0;padding:0;}table{border-collapse:collapse;border-spacing:0;}fieldset,img{border:0;}address,caption,cite,code,dfn,em,strong,th,var{font-style:normal;font-weight:normal;}li{list-style:none;}caption,th{text-align:left;}h1,h2,h3,h4,h5,h6{font-size:100%;font-weight:normal;}q:before,q:after{content:&#x27;</span><span class="token plain">&#x27;</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain">abbr,acronym</span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain">border:0</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain">font-variant:normal</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain">sup</span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain">vertical-align:text-top</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain">sub</span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain">vertical-align:text-bottom</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain">input,textarea,select</span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain">font-family:inherit</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain">font-size:inherit</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain">font-weight:inherit</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain">input,textarea,select</span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain">*font-size:100%</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain">legend</span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain">color:</span><span class="token comment" style="color:#999999">#000;}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">61</span><span class="token plain">            html </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"> background: </span><span class="token comment" style="color:#999999">#eee; padding: 10px }</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">62</span><span class="token plain">            img </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"> border: </span><span class="token number" style="color:#5a9bcf">0</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">63</span><span class="token plain">            </span><span class="token comment" style="color:#999999">#sf-resetcontent { width:970px; margin:0 auto; }</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">64</span><span class="token plain">                        .sf-reset </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"> font: 11px Verdana, Arial, sans-serif</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"> color: </span><span class="token comment" style="color:#999999">#333 }</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">65</span><span class="token plain">            .sf-reset .clear </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"> clear:both</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"> height:0</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"> font-size:0</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"> line-height:0</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">66</span><span class="token plain">            .sf-reset .clear_fix:after </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"> display:block</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"> height:0</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"> clear:both</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"> visibility:hidden</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">67</span><span class="token plain">            .sf-reset .clear_fix </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"> display:inline-block</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">68</span><span class="token plain">            .sf-reset * html .clear_fix </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"> height:1%</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">69</span><span class="token plain">            .sf-reset .clear_fix </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"> display:block</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">70</span><span class="token plain">            .sf-reset, .sf-reset .block </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"> margin: auto </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">71</span><span class="token plain">            .sf-reset abbr </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"> border-bottom: 1px dotted </span><span class="token comment" style="color:#999999">#000; cursor: help; }</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">72</span><span class="token plain">            .sf-reset p </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"> font-size:14px</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"> line-height:20px</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"> color:</span><span class="token comment" style="color:#999999">#868686; padding-bottom:20px }</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">73</span><span class="token plain">            .sf-reset strong </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"> font-weight:bold</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">74</span><span class="token plain">            .sf-reset a </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"> color:</span><span class="token comment" style="color:#999999">#6c6159; cursor: default; }</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">75</span><span class="token plain">            .sf-reset a img </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"> border:none</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">76</span><span class="token plain">            .sf-reset a:hover </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"> text-decoration:underline</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">77</span><span class="token plain">            .sf-reset em </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"> font-style:italic</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">78</span><span class="token plain">            .sf-reset h1, .sf-reset h2 </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"> font: 20px Georgia, </span><span class="token string" style="color:#8dc891">&quot;Times New Roman&quot;</span><span class="token plain">, Times, serif </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">79</span><span class="token plain">            .sf-reset .exception_counter </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"> background-color: </span><span class="token comment" style="color:#999999">#fff; color: #333; padding: 6px; float: left; margin-right: 10px; float: left; display: block; }</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">80</span><span class="token plain">            .sf-reset .exception_title </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"> margin-left: 3em</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"> margin-bottom: </span><span class="token number" style="color:#5a9bcf">0</span><span class="token plain">.7em</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"> display: block</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">81</span><span class="token plain">            .sf-reset .exception_message </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"> margin-left: 3em</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"> display: block</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">82</span><span class="token plain">            .sf-reset .traces li </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"> font-size:12px</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"> padding: 2px 4px</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"> list-style-type:decimal</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"> margin-left:20px</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">83</span><span class="token plain">            .sf-reset .block </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"> background-color:</span><span class="token comment" style="color:#999999">#FFFFFF; padding:10px 28px; margin-bottom:20px;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">84</span><span class="token plain">                -webkit-border-bottom-right-radius: 16px</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">85</span><span class="token plain">                -webkit-border-bottom-left-radius: 16px</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">86</span><span class="token plain">                -moz-border-radius-bottomright: 16px</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">87</span><span class="token plain">                -moz-border-radius-bottomleft: 16px</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">88</span><span class="token plain">                border-bottom-right-radius: 16px</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">89</span><span class="token plain">                border-bottom-left-radius: 16px</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">90</span><span class="token plain">                border-bottom:1px solid </span><span class="token comment" style="color:#999999">#ccc;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">91</span><span class="token plain">                border-right:1px solid </span><span class="token comment" style="color:#999999">#ccc;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">92</span><span class="token plain">                border-left:1px solid </span><span class="token comment" style="color:#999999">#ccc;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">93</span><span class="token plain">            </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">94</span><span class="token plain">            .sf-reset .block_exception </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"> background-color:</span><span class="token comment" style="color:#999999">#ddd; color: #333; padding:20px;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">95</span><span class="token plain">                -webkit-border-top-left-radius: 16px</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">96</span><span class="token plain">                -webkit-border-top-right-radius: 16px</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">97</span><span class="token plain">                -moz-border-radius-topleft: 16px</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">98</span><span class="token plain">                -moz-border-radius-topright: 16px</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">99</span><span class="token plain">                border-top-left-radius: 16px</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">100</span><span class="token plain">                border-top-right-radius: 16px</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">101</span><span class="token plain">                border-top:1px solid </span><span class="token comment" style="color:#999999">#ccc;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">102</span><span class="token plain">                border-right:1px solid </span><span class="token comment" style="color:#999999">#ccc;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">103</span><span class="token plain">                border-left:1px solid </span><span class="token comment" style="color:#999999">#ccc;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">104</span><span class="token plain">                overflow: hidden</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">105</span><span class="token plain">                word-wrap: break-word</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">106</span><span class="token plain">            </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">107</span><span class="token plain">            .sf-reset a </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"> background:none</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"> color:</span><span class="token comment" style="color:#999999">#868686; text-decoration:none; }</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">108</span><span class="token plain">            .sf-reset a:hover </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"> background:none</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"> color:</span><span class="token comment" style="color:#999999">#313131; text-decoration:underline; }</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">109</span><span class="token plain">            .sf-reset ol </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"> padding: 10px </span><span class="token number" style="color:#5a9bcf">0</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">110</span><span class="token plain">            .sf-reset h1 </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"> background-color:</span><span class="token comment" style="color:#999999">#FFFFFF; padding: 15px 28px; margin-bottom: 20px;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">111</span><span class="token plain">                -webkit-border-radius: 10px</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">112</span><span class="token plain">                -moz-border-radius: 10px</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">113</span><span class="token plain">                border-radius: 10px</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">114</span><span class="token plain">                border: 1px solid </span><span class="token comment" style="color:#999999">#ccc;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">115</span><span class="token plain">            </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">116</span><span class="token plain">        </span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">/style</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">117</span><span class="token plain">    </span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">/head</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">118</span><span class="token plain">    </span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">body</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">119</span><span class="token plain">                    </span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">div </span><span class="token assign-left variable" style="color:#d7deea">id</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&quot;sf-resetcontent&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#d7deea">class</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&quot;sf-reset&quot;</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">120</span><span class="token plain">                </span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">h</span><span class="token operator file-descriptor important" style="color:#d7deea;font-weight:400">1</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain">Sorry, the page you are looking </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> could not be found.</span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">/h</span><span class="token operator file-descriptor important" style="color:#d7deea;font-weight:400">1</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">121</span><span class="token plain">                                        </span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">h2 </span><span class="token assign-left variable" style="color:#d7deea">class</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&quot;block_exception clear_fix&quot;</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">122</span><span class="token plain">                            </span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">span </span><span class="token assign-left variable" style="color:#d7deea">class</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&quot;exception_counter&quot;</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token number" style="color:#5a9bcf">1</span><span class="token plain">/</span><span class="token operator file-descriptor important" style="color:#d7deea;font-weight:400">1</span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">/span</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">123</span><span class="token plain">                            </span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">span </span><span class="token assign-left variable" style="color:#d7deea">class</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&quot;exception_title&quot;</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">abbr </span><span class="token assign-left variable" style="color:#d7deea">title</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&quot;Symfony\Component\HttpKernel</span><span class="token string entity" style="color:#d7deea">\E</span><span class="token string" style="color:#8dc891">xception\NotFoundHttpException&quot;</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain">NotFoundHttpException</span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">/abbr</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">a </span><span class="token assign-left variable" style="color:#d7deea">title</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&quot;/home/matthew/Projects/demoapi/vendor/laravel/lumen-framework/src/Concerns/RoutesRequests.php line 450&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#d7deea">ondblclick</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&quot;var f=this.innerHTML;this.innerHTML=this.title;this.title=f;&quot;</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain">RoutesRequests.php line </span><span class="token number" style="color:#5a9bcf">45</span><span class="token operator file-descriptor important" style="color:#d7deea;font-weight:400">0</span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">/a</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain">:</span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">/span</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">124</span><span class="token plain">                            </span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">span </span><span class="token assign-left variable" style="color:#d7deea">class</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&quot;exception_message&quot;</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">/span</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">125</span><span class="token plain">                        </span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">/h</span><span class="token operator file-descriptor important" style="color:#d7deea;font-weight:400">2</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">126</span><span class="token plain">                        </span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">div </span><span class="token assign-left variable" style="color:#d7deea">class</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&quot;block&quot;</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">127</span><span class="token plain">                            </span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">ol </span><span class="token assign-left variable" style="color:#d7deea">class</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&quot;traces list_exception&quot;</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">128</span><span class="token plain">       </span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">li</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">a </span><span class="token assign-left variable" style="color:#d7deea">title</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&quot;/home/matthew/Projects/demoapi/vendor/laravel/lumen-framework/src/Concerns/RoutesRequests.php line 450&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#d7deea">ondblclick</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&quot;var f=this.innerHTML;this.innerHTML=this.title;this.title=f;&quot;</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain">RoutesRequests.php line </span><span class="token number" style="color:#5a9bcf">45</span><span class="token operator file-descriptor important" style="color:#d7deea;font-weight:400">0</span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">/a</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">/li</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">129</span><span class="token plain">       </span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">li</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain">at </span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">abbr </span><span class="token assign-left variable" style="color:#d7deea">title</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&quot;Laravel\Lumen\Application&quot;</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain">Application</span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">/abbr</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain">-</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain">handleDispatcherResponse</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">em</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain">array</span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">/em</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string" style="color:#8dc891">&#x27;0&#x27;</span><span class="token punctuation" style="color:#8dc891">))</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">a </span><span class="token assign-left variable" style="color:#d7deea">title</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&quot;/home/matthew/Projects/demoapi/vendor/laravel/lumen-framework/src/Concerns/RoutesRequests.php line 387&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#d7deea">ondblclick</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&quot;var f=this.innerHTML;this.innerHTML=this.title;this.title=f;&quot;</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain">RoutesRequests.php line </span><span class="token number" style="color:#5a9bcf">38</span><span class="token operator file-descriptor important" style="color:#d7deea;font-weight:400">7</span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">/a</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">/li</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">130</span><span class="token plain">       </span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">li</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain">at </span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">abbr </span><span class="token assign-left variable" style="color:#d7deea">title</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&quot;Laravel\Lumen\Application&quot;</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain">Application</span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">/abbr</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain">-</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain">Laravel</span><span class="token punctuation" style="color:#8dc891">\</span><span class="token plain">Lumen</span><span class="token punctuation" style="color:#8dc891">\</span><span class="token plain">Concerns</span><span class="token punctuation" style="color:#8dc891">\</span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain">closure</span><span class="token punctuation" style="color:#8dc891">}</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">a </span><span class="token assign-left variable" style="color:#d7deea">title</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&quot;/home/matthew/Projects/demoapi/vendor/laravel/lumen-framework/src/Concerns/RoutesRequests.php line 636&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#d7deea">ondblclick</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&quot;var f=this.innerHTML;this.innerHTML=this.title;this.title=f;&quot;</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain">RoutesRequests.php line </span><span class="token number" style="color:#5a9bcf">63</span><span class="token operator file-descriptor important" style="color:#d7deea;font-weight:400">6</span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">/a</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">/li</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">131</span><span class="token plain">       </span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">li</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain">at </span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">abbr </span><span class="token assign-left variable" style="color:#d7deea">title</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&quot;Laravel\Lumen\Application&quot;</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain">Application</span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">/abbr</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain">-</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain">sendThroughPipeline</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">em</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain">array</span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">/em</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain">, </span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">em</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain">object</span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">/em</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">abbr </span><span class="token assign-left variable" style="color:#d7deea">title</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&quot;Closure&quot;</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain">Closure</span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">/abbr</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token punctuation" style="color:#8dc891">))</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">a </span><span class="token assign-left variable" style="color:#d7deea">title</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&quot;/home/matthew/Projects/demoapi/vendor/laravel/lumen-framework/src/Concerns/RoutesRequests.php line 389&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#d7deea">ondblclick</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&quot;var f=this.innerHTML;this.innerHTML=this.title;this.title=f;&quot;</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain">RoutesRequests.php line </span><span class="token number" style="color:#5a9bcf">38</span><span class="token operator file-descriptor important" style="color:#d7deea;font-weight:400">9</span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">/a</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">/li</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">132</span><span class="token plain">       </span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">li</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain">at </span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">abbr </span><span class="token assign-left variable" style="color:#d7deea">title</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&quot;Laravel\Lumen\Application&quot;</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain">Application</span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">/abbr</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain">-</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain">dispatch</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">em</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain">null</span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">/em</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">a </span><span class="token assign-left variable" style="color:#d7deea">title</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&quot;/home/matthew/Projects/demoapi/vendor/laravel/lumen-framework/src/Concerns/RoutesRequests.php line 334&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#d7deea">ondblclick</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&quot;var f=this.innerHTML;this.innerHTML=this.title;this.title=f;&quot;</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain">RoutesRequests.php line </span><span class="token number" style="color:#5a9bcf">33</span><span class="token operator file-descriptor important" style="color:#d7deea;font-weight:400">4</span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">/a</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">/li</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">133</span><span class="token plain">       </span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">li</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain">at </span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">abbr </span><span class="token assign-left variable" style="color:#d7deea">title</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&quot;Laravel\Lumen\Application&quot;</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain">Application</span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">/abbr</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain">-</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain">run</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">a </span><span class="token assign-left variable" style="color:#d7deea">title</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&quot;/home/matthew/Projects/demoapi/public/index.php line 28&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#d7deea">ondblclick</span><span class="token operator" style="color:#d7deea">=</span><span class="token string" style="color:#8dc891">&quot;var f=this.innerHTML;this.innerHTML=this.title;this.title=f;&quot;</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain">index.php line </span><span class="token number" style="color:#5a9bcf">2</span><span class="token operator file-descriptor important" style="color:#d7deea;font-weight:400">8</span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">/a</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">/li</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">134</span><span class="token plain">    </span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">/ol</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">135</span><span class="token plain"></span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">/div</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">136</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">137</span><span class="token plain">            </span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">/div</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">138</span><span class="token plain">    </span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">/body</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">139</span><span class="token plain"></span><span class="token operator" style="color:#d7deea">&lt;</span><span class="token plain">/html</span><span class="token operator" style="color:#d7deea">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">140</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">141</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">142</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">143</span><span class="token plain">complete: </span><span class="token number" style="color:#5a9bcf">0</span><span class="token plain"> passing, </span><span class="token number" style="color:#5a9bcf">1</span><span class="token plain"> failing, </span><span class="token number" style="color:#5a9bcf">0</span><span class="token plain"> errors, </span><span class="token number" style="color:#5a9bcf">0</span><span class="token plain"> skipped, </span><span class="token number" style="color:#5a9bcf">1</span><span class="token plain"> total</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">144</span><span class="token plain">complete: Tests took 533ms</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">145</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">[</span><span class="token plain">Mon Aug  </span><span class="token number" style="color:#5a9bcf">8</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">11</span><span class="token plain">:30:33 </span><span class="token number" style="color:#5a9bcf">2016</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">127.0</span><span class="token plain">.0.1:44472 </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token number" style="color:#5a9bcf">404</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain">: /api/products</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">146</span><span class="token plain">complete: See results </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> Apiary at: https://app.apiary.io/public/tests/run/0153d5bf-6efa-4fdb-b02a-246ddd75cb14</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">147</span><span class="token plain">info: Sending SIGTERM to the backend server</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">148</span><span class="token plain">info: Backend server was killed</span></div></pre></div></pre><p class="py-2">Our route is returning HTML, not JSON, and is also raising a 404 error. So let&#x27;s fix that. First, let&#x27;s create our <code>Product</code> model at <code>app/Product.php</code>:</p><pre><div class="gatsby-highlight" data-language="php"><pre class="prism-code language-php" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token delimiter important" style="font-weight:400">&lt;?php</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">namespace</span><span class="token plain"> </span><span class="token package">App</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">use</span><span class="token plain"> </span><span class="token package">Illuminate</span><span class="token package punctuation" style="color:#8dc891">\</span><span class="token package">Database</span><span class="token package punctuation" style="color:#8dc891">\</span><span class="token package">Eloquent</span><span class="token package punctuation" style="color:#8dc891">\</span><span class="token package">Model</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name-definition class-name" style="color:#FAC863">Product</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">extends</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">Model</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">    </span><span class="token comment" style="color:#999999">//</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Next, we need to create a migration for the database tables for the <code>Product</code> model:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ php artisan make:migration create_product_table</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">Created Migration: 2016_08_08_105737_create_product_table</span></div></pre></div></pre><p class="py-2">This will create a new file under <code>database/migrations</code>. Open this file and paste in the following:</p><pre><div class="gatsby-highlight" data-language="php"><pre class="prism-code language-php" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token delimiter important" style="font-weight:400">&lt;?php</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">use</span><span class="token plain"> </span><span class="token package">Illuminate</span><span class="token package punctuation" style="color:#8dc891">\</span><span class="token package">Database</span><span class="token package punctuation" style="color:#8dc891">\</span><span class="token package">Schema</span><span class="token package punctuation" style="color:#8dc891">\</span><span class="token package">Blueprint</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">use</span><span class="token plain"> </span><span class="token package">Illuminate</span><span class="token package punctuation" style="color:#8dc891">\</span><span class="token package">Database</span><span class="token package punctuation" style="color:#8dc891">\</span><span class="token package">Migrations</span><span class="token package punctuation" style="color:#8dc891">\</span><span class="token package">Migration</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name-definition class-name" style="color:#FAC863">CreateProductTable</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">extends</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">Migration</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain">    </span><span class="token comment" style="color:#999999">/**</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token comment" style="color:#999999">     * Run the migrations.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token comment" style="color:#999999">     *</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token comment" style="color:#999999">     * @return void</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token comment" style="color:#999999">     */</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">public</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">function</span><span class="token plain"> </span><span class="token function-definition function" style="color:#79b6f2">up</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain">        </span><span class="token comment" style="color:#999999">// Create products table</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token plain">        </span><span class="token class-name static-context" style="color:#FAC863">Schema</span><span class="token operator" style="color:#d7deea">::</span><span class="token function" style="color:#79b6f2">create</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;products&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token class-name type-declaration" style="color:#FAC863">Blueprint</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$table</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token plain">            </span><span class="token variable" style="color:#d7deea">$table</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">increments</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;id&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token plain">            </span><span class="token variable" style="color:#d7deea">$table</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token keyword type-declaration" style="color:#c5a5c5">string</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;name&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token plain">            </span><span class="token variable" style="color:#d7deea">$table</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">text</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;description&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token plain">            </span><span class="token variable" style="color:#d7deea">$table</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token keyword type-declaration" style="color:#c5a5c5">float</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;price&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">21</span><span class="token plain">            </span><span class="token variable" style="color:#d7deea">$table</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">json</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;attributes&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">22</span><span class="token plain">            </span><span class="token variable" style="color:#d7deea">$table</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">timestamps</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">23</span><span class="token plain">        </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">24</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">25</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">26</span><span class="token plain">    </span><span class="token comment" style="color:#999999">/**</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">27</span><span class="token comment" style="color:#999999">     * Reverse the migrations.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">28</span><span class="token comment" style="color:#999999">     *</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">29</span><span class="token comment" style="color:#999999">     * @return void</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">30</span><span class="token comment" style="color:#999999">     */</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">31</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">public</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">function</span><span class="token plain"> </span><span class="token function-definition function" style="color:#79b6f2">down</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">32</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">33</span><span class="token plain">        </span><span class="token comment" style="color:#999999">// Drop products table</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">34</span><span class="token plain">        </span><span class="token class-name static-context" style="color:#FAC863">Schema</span><span class="token operator" style="color:#d7deea">::</span><span class="token function" style="color:#79b6f2">drop</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;products&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">35</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">36</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Note that we create fields that map to the attributes our API exposes. Also, note the use of the JSON field. In databases that support it, like PostgreSQL, it uses the native JSON support, otherwise it works like a text field. Next, we run the migration to create the table:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ php artisan migrate</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">Migrated: 2016_08_08_105737_create_product_table</span></div></pre></div></pre><p class="py-2">With our model done, we now need to ensure that when Dredd runs, there is some data in the database, so we&#x27;ll create a seeder file at <code>database/seeds/ProductSeeder</code>:</p><pre><div class="gatsby-highlight" data-language="php"><pre class="prism-code language-php" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token delimiter important" style="font-weight:400">&lt;?php</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">use</span><span class="token plain"> </span><span class="token package">Illuminate</span><span class="token package punctuation" style="color:#8dc891">\</span><span class="token package">Database</span><span class="token package punctuation" style="color:#8dc891">\</span><span class="token package">Seeder</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">use</span><span class="token plain"> </span><span class="token package">Carbon</span><span class="token package punctuation" style="color:#8dc891">\</span><span class="token package">Carbon</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name-definition class-name" style="color:#FAC863">ProductSeeder</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">extends</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">Seeder</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain">    </span><span class="token comment" style="color:#999999">/**</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token comment" style="color:#999999">     * Run the database seeds.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token comment" style="color:#999999">     *</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token comment" style="color:#999999">     * @return void</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token comment" style="color:#999999">     */</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">public</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">function</span><span class="token plain"> </span><span class="token function-definition function" style="color:#79b6f2">run</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain">        </span><span class="token comment" style="color:#999999">// Add product</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token plain">        </span><span class="token class-name static-context" style="color:#FAC863">DB</span><span class="token operator" style="color:#d7deea">::</span><span class="token function" style="color:#79b6f2">table</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;products&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">insert</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">[</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token plain">            </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;name&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=&gt;</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;Purple widget&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token plain">            </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;description&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=&gt;</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;A purple widget&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token plain">            </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;price&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=&gt;</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">5.99</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token plain">            </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;attributes&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">json_encode</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">[</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">21</span><span class="token plain">                </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;colour&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=&gt;</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;purple&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">22</span><span class="token plain">                </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;size&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=&gt;</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;Small&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">23</span><span class="token plain">            </span><span class="token punctuation" style="color:#8dc891">]</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">24</span><span class="token plain">            </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;created_at&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=&gt;</span><span class="token plain"> </span><span class="token class-name static-context" style="color:#FAC863">Carbon</span><span class="token operator" style="color:#d7deea">::</span><span class="token function" style="color:#79b6f2">now</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">25</span><span class="token plain">            </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;updated_at&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=&gt;</span><span class="token plain"> </span><span class="token class-name static-context" style="color:#FAC863">Carbon</span><span class="token operator" style="color:#d7deea">::</span><span class="token function" style="color:#79b6f2">now</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">26</span><span class="token plain">        </span><span class="token punctuation" style="color:#8dc891">]</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">27</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">28</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">You also need to amend <code>database/seeds/DatabaseSeeder</code> to call it:</p><pre><div class="gatsby-highlight" data-language="php"><pre class="prism-code language-php" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token delimiter important" style="font-weight:400">&lt;?php</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">use</span><span class="token plain"> </span><span class="token package">Illuminate</span><span class="token package punctuation" style="color:#8dc891">\</span><span class="token package">Database</span><span class="token package punctuation" style="color:#8dc891">\</span><span class="token package">Seeder</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name-definition class-name" style="color:#FAC863">DatabaseSeeder</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">extends</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">Seeder</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">    </span><span class="token comment" style="color:#999999">/**</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token comment" style="color:#999999">     * Run the database seeds.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token comment" style="color:#999999">     *</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token comment" style="color:#999999">     * @return void</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token comment" style="color:#999999">     */</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">public</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">function</span><span class="token plain"> </span><span class="token function-definition function" style="color:#79b6f2">run</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain">        </span><span class="token variable" style="color:#d7deea">$this</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">call</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;ProductSeeder&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">I found I also had to run the following command to find the new seeder:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style"></span><span class="token plain">$ </span><span class="token function" style="color:#79b6f2">composer</span><span class="token plain"> dump-autoload</span></div></pre></div></pre><p class="py-2">Then, call the seeder:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ php artisan db:seed</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">Seeded: ProductSeeder</span></div></pre></div></pre><p class="py-2">We also need to enable Eloquent, as Lumen disables it by default. Uncomment the following line in <code>bootstrap/app.php</code>:</p><pre><div class="gatsby-highlight" data-language="php"><pre class="prism-code language-php" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style"></span><span class="token variable" style="color:#d7deea">$app</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">withEloquent</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">With that done, we can move onto the controller.</p><h2 class="py-4 text-2xl font-bold">Creating the controller</h2><p class="py-2">Create the following file at <code>app/Http/Controllers/ProductController</code>:</p><pre><div class="gatsby-highlight" data-language="php"><pre class="prism-code language-php" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token delimiter important" style="font-weight:400">&lt;?php</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">namespace</span><span class="token plain"> </span><span class="token package">App</span><span class="token package punctuation" style="color:#8dc891">\</span><span class="token package">Http</span><span class="token package punctuation" style="color:#8dc891">\</span><span class="token package">Controllers</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">use</span><span class="token plain"> </span><span class="token package">Illuminate</span><span class="token package punctuation" style="color:#8dc891">\</span><span class="token package">Http</span><span class="token package punctuation" style="color:#8dc891">\</span><span class="token package">Request</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">use</span><span class="token plain"> </span><span class="token package">App</span><span class="token package punctuation" style="color:#8dc891">\</span><span class="token package">Product</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">class</span><span class="token plain"> </span><span class="token class-name-definition class-name" style="color:#FAC863">ProductController</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">extends</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">Controller</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">private</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$product</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">public</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">function</span><span class="token plain"> </span><span class="token function-definition function" style="color:#79b6f2">__construct</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token class-name type-declaration" style="color:#FAC863">Product</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$product</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain">        </span><span class="token variable" style="color:#d7deea">$this</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token property" style="color:#5a9bcf">product</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$product</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">public</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">function</span><span class="token plain"> </span><span class="token function-definition function" style="color:#79b6f2">index</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token plain">        </span><span class="token comment" style="color:#999999">// Get all products</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token plain">        </span><span class="token variable" style="color:#d7deea">$products</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$this</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token property" style="color:#5a9bcf">product</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">all</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">21</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">22</span><span class="token plain">        </span><span class="token comment" style="color:#999999">// Send response</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">23</span><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">response</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">json</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token variable" style="color:#d7deea">$products</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">200</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">24</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">25</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">This implements the <code>index</code> route. Note that we inject the <code>Product</code> instance into the controller. Next, we need to hook it up in <code>app/Http/routes.php</code>:</p><pre><div class="gatsby-highlight" data-language="php"><pre class="prism-code language-php" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token delimiter important" style="font-weight:400">&lt;?php</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain"></span><span class="token comment" style="color:#999999">/*</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token comment" style="color:#999999">|--------------------------------------------------------------------------</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token comment" style="color:#999999">| Application Routes</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token comment" style="color:#999999">|--------------------------------------------------------------------------</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token comment" style="color:#999999">|</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token comment" style="color:#999999">| Here is where you can register all of the routes for an application.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token comment" style="color:#999999">| It is a breeze. Simply tell Lumen the URIs it should respond to</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token comment" style="color:#999999">| and give it the Closure to call when that URI is requested.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token comment" style="color:#999999">|</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token comment" style="color:#999999">*/</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain"></span><span class="token variable" style="color:#d7deea">$app</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">get</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;/api/products&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;ProductController@index&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Then we run Dredd again:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ dredd</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">info: Configuration </span><span class="token string" style="color:#8dc891">&#x27;./dredd.yml&#x27;</span><span class="token plain"> found, ignoring other arguments.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">info: Using apiary reporter.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">info: Starting server with command: php -S localhost:3000 -t public/</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">info: Waiting </span><span class="token number" style="color:#5a9bcf">3</span><span class="token plain"> seconds </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> server </span><span class="token builtin class-name" style="color:#FAC863">command</span><span class="token plain"> to start</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">info: Beginning Dredd testing</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">[</span><span class="token plain">Mon Aug  </span><span class="token number" style="color:#5a9bcf">8</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">12</span><span class="token plain">:36:28 </span><span class="token number" style="color:#5a9bcf">2016</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">127.0</span><span class="token plain">.0.1:45466 </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token number" style="color:#5a9bcf">200</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain">: /api/products</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain">fail: GET /api/products duration: 131ms</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">info: Displaying failed tests</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain">fail: GET /api/products duration: 131ms</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain">fail: body: At </span><span class="token string" style="color:#8dc891">&#x27;&#x27;</span><span class="token plain"> Invalid type: array </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">expected object</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain">request: </span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain">method: GET</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain">uri: /api/products</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token plain">headers: </span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token plain">    Content-Type: application/json</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token plain">    User-Agent: Dredd/1.5.0 </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">Linux </span><span class="token number" style="color:#5a9bcf">4.4</span><span class="token plain">.0-31-generic</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"> x64</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token plain">body: </span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">21</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">22</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">23</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">24</span><span class="token plain">expected: </span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">25</span><span class="token plain">headers: </span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">26</span><span class="token plain">    Content-Type: application/json</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">27</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">28</span><span class="token plain">body: </span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">29</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">30</span><span class="token plain">  </span><span class="token string" style="color:#8dc891">&quot;id&quot;</span><span class="token builtin class-name" style="color:#FAC863">:</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">1</span><span class="token plain">,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">31</span><span class="token plain">  </span><span class="token string" style="color:#8dc891">&quot;name&quot;</span><span class="token builtin class-name" style="color:#FAC863">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;Purple widget&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">32</span><span class="token plain">  </span><span class="token string" style="color:#8dc891">&quot;description&quot;</span><span class="token builtin class-name" style="color:#FAC863">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;A purple widget&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">33</span><span class="token plain">  </span><span class="token string" style="color:#8dc891">&quot;price&quot;</span><span class="token builtin class-name" style="color:#FAC863">:</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">5.99</span><span class="token plain">,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">34</span><span class="token plain">  </span><span class="token string" style="color:#8dc891">&quot;attributes&quot;</span><span class="token builtin class-name" style="color:#FAC863">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">35</span><span class="token plain">    </span><span class="token string" style="color:#8dc891">&quot;colour&quot;</span><span class="token builtin class-name" style="color:#FAC863">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;Purple&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">36</span><span class="token plain">    </span><span class="token string" style="color:#8dc891">&quot;size&quot;</span><span class="token builtin class-name" style="color:#FAC863">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;Small&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">37</span><span class="token plain">  </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">38</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">39</span><span class="token plain">statusCode: </span><span class="token number" style="color:#5a9bcf">200</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">40</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">41</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">42</span><span class="token plain">actual:</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">43</span><span class="token plain">statusCode: </span><span class="token number" style="color:#5a9bcf">200</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">44</span><span class="token plain">headers:</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">45</span><span class="token plain">    host: localhost:3000</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">46</span><span class="token plain">    connection: close</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">47</span><span class="token plain">    x-powered-by: PHP/7.0.8-0ubuntu0.16.04.2</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">48</span><span class="token plain">    cache-control: no-cache</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">49</span><span class="token plain">    content-type: application/json</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">50</span><span class="token plain">    date: Mon, 08 Aug </span><span class="token number" style="color:#5a9bcf">2016</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">11</span><span class="token plain">:36:28 GMT</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">51</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">52</span><span class="token plain">body:</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">53</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">[</span><span class="token plain"> </span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">54</span><span class="token plain">  </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"> </span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">55</span><span class="token plain">    </span><span class="token string" style="color:#8dc891">&quot;id&quot;</span><span class="token builtin class-name" style="color:#FAC863">:</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">1</span><span class="token plain">,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">56</span><span class="token plain">    </span><span class="token string" style="color:#8dc891">&quot;name&quot;</span><span class="token builtin class-name" style="color:#FAC863">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;Purple widget&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">57</span><span class="token plain">    </span><span class="token string" style="color:#8dc891">&quot;description&quot;</span><span class="token builtin class-name" style="color:#FAC863">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;A purple widget&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">58</span><span class="token plain">    </span><span class="token string" style="color:#8dc891">&quot;price&quot;</span><span class="token builtin class-name" style="color:#FAC863">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;5.99&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">59</span><span class="token plain">    </span><span class="token string" style="color:#8dc891">&quot;attributes&quot;</span><span class="token builtin class-name" style="color:#FAC863">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;{</span><span class="token string entity" style="color:#d7deea">\&quot;</span><span class="token string" style="color:#8dc891">colour</span><span class="token string entity" style="color:#d7deea">\&quot;</span><span class="token string" style="color:#8dc891">:</span><span class="token string entity" style="color:#d7deea">\&quot;</span><span class="token string" style="color:#8dc891">purple</span><span class="token string entity" style="color:#d7deea">\&quot;</span><span class="token string" style="color:#8dc891">,</span><span class="token string entity" style="color:#d7deea">\&quot;</span><span class="token string" style="color:#8dc891">size</span><span class="token string entity" style="color:#d7deea">\&quot;</span><span class="token string" style="color:#8dc891">:</span><span class="token string entity" style="color:#d7deea">\&quot;</span><span class="token string" style="color:#8dc891">Small</span><span class="token string entity" style="color:#d7deea">\&quot;</span><span class="token string" style="color:#8dc891">}&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">60</span><span class="token plain">    </span><span class="token string" style="color:#8dc891">&quot;created_at&quot;</span><span class="token builtin class-name" style="color:#FAC863">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;2016-08-08 11:32:24&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">61</span><span class="token plain">    </span><span class="token string" style="color:#8dc891">&quot;updated_at&quot;</span><span class="token builtin class-name" style="color:#FAC863">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;2016-08-08 11:32:24&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">62</span><span class="token plain">  </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">63</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">64</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">65</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">66</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">67</span><span class="token plain">complete: </span><span class="token number" style="color:#5a9bcf">0</span><span class="token plain"> passing, </span><span class="token number" style="color:#5a9bcf">1</span><span class="token plain"> failing, </span><span class="token number" style="color:#5a9bcf">0</span><span class="token plain"> errors, </span><span class="token number" style="color:#5a9bcf">0</span><span class="token plain"> skipped, </span><span class="token number" style="color:#5a9bcf">1</span><span class="token plain"> total</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">68</span><span class="token plain">complete: Tests took 582ms</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">69</span><span class="token plain">complete: See results </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> Apiary at: https://app.apiary.io/public/tests/run/83da2d67-c846-4356-a3b8-4d7c32daa7ef</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">70</span><span class="token plain">info: Sending SIGTERM to the backend server</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">71</span><span class="token plain">info: Backend server was killed</span></div></pre></div></pre><p class="py-2">Whoops, looks like we made a mistake here. The index route returns an array of objects, but we&#x27;re looking for a single object in the blueprint. We also need to wrap our attributes in quotes, and add the <code>created_at</code> and <code>updated_at</code> attributes. Let&#x27;s fix the blueprint:</p><pre><div class="gatsby-highlight" data-language="markdown"><pre class="prism-code language-markdown" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">FORMAT: 1A</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain"></span><span class="token title important punctuation" style="font-weight:400;color:#8dc891">#</span><span class="token title important" style="font-weight:400"> Demo API</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain"></span><span class="token title important punctuation" style="font-weight:400;color:#8dc891">#</span><span class="token title important" style="font-weight:400"> Products [/api/products]</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">Product object representation</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain"></span><span class="token title important punctuation" style="font-weight:400;color:#8dc891">##</span><span class="token title important" style="font-weight:400"> Get products [GET /api/products]</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">Get a list of products</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain"></span><span class="token list punctuation" style="color:#8dc891">+</span><span class="token plain"> Request (application/json)</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain"></span><span class="token list punctuation" style="color:#8dc891">+</span><span class="token plain"> Response 200 (application/json)</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain">    </span><span class="token list punctuation" style="color:#8dc891">+</span><span class="token plain"> Body</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token plain"></span><span class="token code keyword" style="color:#c5a5c5">            [</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token code keyword" style="color:#c5a5c5">                {</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token code keyword" style="color:#c5a5c5">                    &quot;id&quot;: 1,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token code keyword" style="color:#c5a5c5">                    &quot;name&quot;: &quot;Purple widget&quot;,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token code keyword" style="color:#c5a5c5">                    &quot;description&quot;: &quot;A purple widget&quot;,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">21</span><span class="token code keyword" style="color:#c5a5c5">                    &quot;price&quot;: 5.99,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">22</span><span class="token code keyword" style="color:#c5a5c5">                    &quot;attributes&quot;: &quot;{\&quot;colour\&quot;: \&quot;Purple\&quot;,\&quot;size\&quot;: \&quot;Small\&quot;}&quot;,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">23</span><span class="token code keyword" style="color:#c5a5c5">                    &quot;created_at&quot;: &quot;*&quot;,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">24</span><span class="token code keyword" style="color:#c5a5c5">                    &quot;updated_at&quot;: &quot;*&quot;</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">25</span><span class="token code keyword" style="color:#c5a5c5">                }</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">26</span><span class="token code keyword" style="color:#c5a5c5">            ]</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Let&#x27;s run Dredd again:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ dredd</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">info: Configuration </span><span class="token string" style="color:#8dc891">&#x27;./dredd.yml&#x27;</span><span class="token plain"> found, ignoring other arguments.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">info: Using apiary reporter.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">info: Starting server with command: php -S localhost:3000 -t public/</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">info: Waiting </span><span class="token number" style="color:#5a9bcf">3</span><span class="token plain"> seconds </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> server </span><span class="token builtin class-name" style="color:#FAC863">command</span><span class="token plain"> to start</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">info: Beginning Dredd testing</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">pass: GET /api/products duration: 65ms</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain">complete: </span><span class="token number" style="color:#5a9bcf">1</span><span class="token plain"> passing, </span><span class="token number" style="color:#5a9bcf">0</span><span class="token plain"> failing, </span><span class="token number" style="color:#5a9bcf">0</span><span class="token plain"> errors, </span><span class="token number" style="color:#5a9bcf">0</span><span class="token plain"> skipped, </span><span class="token number" style="color:#5a9bcf">1</span><span class="token plain"> total</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">complete: Tests took 501ms</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">[</span><span class="token plain">Mon Aug  </span><span class="token number" style="color:#5a9bcf">8</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">13</span><span class="token plain">:05:54 </span><span class="token number" style="color:#5a9bcf">2016</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">127.0</span><span class="token plain">.0.1:45618 </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token number" style="color:#5a9bcf">200</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain">: /api/products</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain">complete: See results </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> Apiary at: https://app.apiary.io/public/tests/run/7c23d4ae-aff2-4daf-bbdf-9fd76fc58b97</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain">info: Sending SIGTERM to the backend server</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain">info: Backend server was killed</span></div></pre></div></pre><p class="py-2">And now we can see that our test passes.</p><p class="py-2">Next, we&#x27;ll implement a test for fetching a single product:</p><pre><div class="gatsby-highlight" data-language="markdown"><pre class="prism-code language-markdown" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token title important punctuation" style="font-weight:400;color:#8dc891">##</span><span class="token title important" style="font-weight:400"> Get a product [GET /api/products/1]</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">Get a single product</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain"></span><span class="token list punctuation" style="color:#8dc891">+</span><span class="token plain"> Request (application/json)</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain"></span><span class="token list punctuation" style="color:#8dc891">+</span><span class="token plain"> Response 200 (application/json)</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">    </span><span class="token list punctuation" style="color:#8dc891">+</span><span class="token plain"> Body</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain"></span><span class="token code keyword" style="color:#c5a5c5">            {</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token code keyword" style="color:#c5a5c5">              &quot;id&quot;: 1,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token code keyword" style="color:#c5a5c5">              &quot;name&quot;: &quot;Purple widget&quot;,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token code keyword" style="color:#c5a5c5">              &quot;description&quot;: &quot;A purple widget&quot;,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token code keyword" style="color:#c5a5c5">              &quot;price&quot;: 5.99,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token code keyword" style="color:#c5a5c5">              &quot;attributes&quot;: &quot;{\&quot;colour\&quot;: \&quot;Purple\&quot;,\&quot;size\&quot;: \&quot;Small\&quot;}&quot;,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token code keyword" style="color:#c5a5c5">              &quot;created_at&quot;: &quot;*&quot;,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token code keyword" style="color:#c5a5c5">              &quot;updated_at&quot;: &quot;*&quot;</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token code keyword" style="color:#c5a5c5">            }</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Note the same basic format - we define the URL that should be fetched, the content of the request, and the response, including the status code.</p><p class="py-2">Let&#x27;s hook up our route in <code>app/Http/routes.php</code>:</p><pre><div class="gatsby-highlight" data-language="php"><pre class="prism-code language-php" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style"></span><span class="token variable" style="color:#d7deea">$app</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">get</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;/api/products/{id}&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;ProductController@show&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">And add the <code>show()</code> method to the controller:</p><pre><div class="gatsby-highlight" data-language="php"><pre class="prism-code language-php" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">public</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">function</span><span class="token plain"> </span><span class="token function-definition function" style="color:#79b6f2">show</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token variable" style="color:#d7deea">$id</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">        </span><span class="token comment" style="color:#999999">// Get individual product</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">        </span><span class="token variable" style="color:#d7deea">$product</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$this</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token property" style="color:#5a9bcf">product</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">findOrFail</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token variable" style="color:#d7deea">$id</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">        </span><span class="token comment" style="color:#999999">// Send response</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">response</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">json</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token variable" style="color:#d7deea">$product</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">200</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Running Dredd again should show this method has been implemented:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ dredd</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">info: Configuration </span><span class="token string" style="color:#8dc891">&#x27;./dredd.yml&#x27;</span><span class="token plain"> found, ignoring other arguments.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">info: Using apiary reporter.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">info: Starting server with command: php -S localhost:3000 -t public/</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">info: Waiting </span><span class="token number" style="color:#5a9bcf">3</span><span class="token plain"> seconds </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> server </span><span class="token builtin class-name" style="color:#FAC863">command</span><span class="token plain"> to start</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">info: Beginning Dredd testing</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">pass: GET /api/products duration: 66ms</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">[</span><span class="token plain">Mon Aug  </span><span class="token number" style="color:#5a9bcf">8</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">13</span><span class="token plain">:21:31 </span><span class="token number" style="color:#5a9bcf">2016</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">127.0</span><span class="token plain">.0.1:45750 </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token number" style="color:#5a9bcf">200</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain">: /api/products</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">pass: GET /api/products/1 duration: 17ms</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain">complete: </span><span class="token number" style="color:#5a9bcf">2</span><span class="token plain"> passing, </span><span class="token number" style="color:#5a9bcf">0</span><span class="token plain"> failing, </span><span class="token number" style="color:#5a9bcf">0</span><span class="token plain"> errors, </span><span class="token number" style="color:#5a9bcf">0</span><span class="token plain"> skipped, </span><span class="token number" style="color:#5a9bcf">2</span><span class="token plain"> total</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain">complete: Tests took 521ms</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">[</span><span class="token plain">Mon Aug  </span><span class="token number" style="color:#5a9bcf">8</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">13</span><span class="token plain">:21:31 </span><span class="token number" style="color:#5a9bcf">2016</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">127.0</span><span class="token plain">.0.1:45752 </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token number" style="color:#5a9bcf">200</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain">: /api/products/1</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain">complete: See results </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> Apiary at: https://app.apiary.io/public/tests/run/bb6d03c3-8fad-477c-b140-af6e0cc8b96c</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain">info: Sending SIGTERM to the backend server</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain">info: Backend server was killed</span></div></pre></div></pre><p class="py-2">That&#x27;s our read support done. We just need to add support for <code>POST</code>, <code>PATCH</code> and <code>DELETE</code> methods.</p><h2 class="py-4 text-2xl font-bold">Our remaining methods</h2><p class="py-2">Let&#x27;s set up the test for our <code>POST</code> method first:</p><pre><div class="gatsby-highlight" data-language="markdown"><pre class="prism-code language-markdown" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token title important punctuation" style="font-weight:400;color:#8dc891">##</span><span class="token title important" style="font-weight:400"> Create products [POST /api/products]</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">Create a new product</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain"></span><span class="token list punctuation" style="color:#8dc891">+</span><span class="token plain"> name (string) - The product name</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain"></span><span class="token list punctuation" style="color:#8dc891">+</span><span class="token plain"> description (string) - The product description</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain"></span><span class="token list punctuation" style="color:#8dc891">+</span><span class="token plain"> price (float) - The product price</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain"></span><span class="token list punctuation" style="color:#8dc891">+</span><span class="token plain"> attributes (string) - The product attributes</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain"></span><span class="token list punctuation" style="color:#8dc891">+</span><span class="token plain"> Request (application/json)</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain">    </span><span class="token list punctuation" style="color:#8dc891">+</span><span class="token plain"> Body</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain"></span><span class="token code keyword" style="color:#c5a5c5">            {</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token code keyword" style="color:#c5a5c5">                &quot;name&quot;: &quot;Blue widget&quot;,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token code keyword" style="color:#c5a5c5">                &quot;description&quot;: &quot;A blue widget&quot;,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token code keyword" style="color:#c5a5c5">                &quot;price&quot;: 5.99,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token code keyword" style="color:#c5a5c5">                &quot;attributes&quot;: &quot;{\&quot;colour\&quot;: \&quot;blue\&quot;,\&quot;size\&quot;: \&quot;Small\&quot;}&quot;</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token code keyword" style="color:#c5a5c5">            }</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token plain"></span><span class="token list punctuation" style="color:#8dc891">+</span><span class="token plain"> Response 201 (application/json)</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token plain">    </span><span class="token list punctuation" style="color:#8dc891">+</span><span class="token plain"> Body</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">21</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">22</span><span class="token plain"></span><span class="token code keyword" style="color:#c5a5c5">            {</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">23</span><span class="token code keyword" style="color:#c5a5c5">              &quot;id&quot;: 2,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">24</span><span class="token code keyword" style="color:#c5a5c5">              &quot;name&quot;: &quot;Blue widget&quot;,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">25</span><span class="token code keyword" style="color:#c5a5c5">              &quot;description&quot;: &quot;A blue widget&quot;,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">26</span><span class="token code keyword" style="color:#c5a5c5">              &quot;price&quot;: 5.99,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">27</span><span class="token code keyword" style="color:#c5a5c5">              &quot;attributes&quot;: &quot;{\&quot;colour\&quot;: \&quot;blue\&quot;,\&quot;size\&quot;: \&quot;Small\&quot;}&quot;,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">28</span><span class="token code keyword" style="color:#c5a5c5">              &quot;created_at&quot;: &quot;*&quot;,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">29</span><span class="token code keyword" style="color:#c5a5c5">              &quot;updated_at&quot;: &quot;*&quot;</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">30</span><span class="token code keyword" style="color:#c5a5c5">            }</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Note we specify the format of the parameters that should be passed through, and that our status code should be 201, not 200 - this is arguably a more correct choice for creating a resource. Be careful of the whitespace - I had some odd issues with it. Next, we add our route:</p><pre><div class="gatsby-highlight" data-language="php"><pre class="prism-code language-php" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style"></span><span class="token variable" style="color:#d7deea">$app</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">post</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;/api/products&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;ProductController@store&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">And the <code>store()</code> method in the controller:</p><pre><div class="gatsby-highlight" data-language="php"><pre class="prism-code language-php" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">public</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">function</span><span class="token plain"> </span><span class="token function-definition function" style="color:#79b6f2">store</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token class-name type-declaration" style="color:#FAC863">Request</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$request</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">        </span><span class="token comment" style="color:#999999">// Validate request</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">        </span><span class="token variable" style="color:#d7deea">$valid</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$this</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">validate</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token variable" style="color:#d7deea">$request</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">            </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;name&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=&gt;</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;required|string&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">            </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;description&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=&gt;</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;required|string&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">            </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;price&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=&gt;</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;required|numeric&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain">            </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;attributes&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=&gt;</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;string&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">        </span><span class="token punctuation" style="color:#8dc891">]</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain">        </span><span class="token comment" style="color:#999999">// Create product</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain">        </span><span class="token variable" style="color:#d7deea">$product</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">new</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$this</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token property" style="color:#5a9bcf">product</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain">        </span><span class="token variable" style="color:#d7deea">$product</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token property" style="color:#5a9bcf">name</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$request</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">input</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;name&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain">        </span><span class="token variable" style="color:#d7deea">$product</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token property" style="color:#5a9bcf">description</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$request</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">input</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;description&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain">        </span><span class="token variable" style="color:#d7deea">$product</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token property" style="color:#5a9bcf">price</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$request</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">input</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;price&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token plain">        </span><span class="token variable" style="color:#d7deea">$product</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token property" style="color:#5a9bcf">attributes</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$request</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">input</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;attributes&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token plain">        </span><span class="token comment" style="color:#999999">// Save product</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token plain">        </span><span class="token variable" style="color:#d7deea">$product</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">save</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">21</span><span class="token plain">        </span><span class="token comment" style="color:#999999">// Send response</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">22</span><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">response</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">json</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token variable" style="color:#d7deea">$product</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">201</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">23</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Note that we validate the attributes, to ensure they are correct and that the required ones exist. Running Dredd again should show the route is now in place:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ dredd</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">info: Configuration </span><span class="token string" style="color:#8dc891">&#x27;./dredd.yml&#x27;</span><span class="token plain"> found, ignoring other arguments.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">info: Using apiary reporter.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">info: Starting server with command: php -S localhost:3000 -t public/</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">info: Waiting </span><span class="token number" style="color:#5a9bcf">3</span><span class="token plain"> seconds </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> server </span><span class="token builtin class-name" style="color:#FAC863">command</span><span class="token plain"> to start</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">info: Beginning Dredd testing</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">pass: GET /api/products duration: 69ms</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">[</span><span class="token plain">Mon Aug  </span><span class="token number" style="color:#5a9bcf">8</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">15</span><span class="token plain">:17:35 </span><span class="token number" style="color:#5a9bcf">2016</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">127.0</span><span class="token plain">.0.1:47316 </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token number" style="color:#5a9bcf">200</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain">: /api/products</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">pass: GET /api/products/1 duration: 18ms</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">[</span><span class="token plain">Mon Aug  </span><span class="token number" style="color:#5a9bcf">8</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">15</span><span class="token plain">:17:35 </span><span class="token number" style="color:#5a9bcf">2016</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">127.0</span><span class="token plain">.0.1:47318 </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token number" style="color:#5a9bcf">200</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain">: /api/products/1</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain">pass: POST /api/products duration: 42ms</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain">complete: </span><span class="token number" style="color:#5a9bcf">3</span><span class="token plain"> passing, </span><span class="token number" style="color:#5a9bcf">0</span><span class="token plain"> failing, </span><span class="token number" style="color:#5a9bcf">0</span><span class="token plain"> errors, </span><span class="token number" style="color:#5a9bcf">0</span><span class="token plain"> skipped, </span><span class="token number" style="color:#5a9bcf">3</span><span class="token plain"> total</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain">complete: Tests took 575ms</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">[</span><span class="token plain">Mon Aug  </span><span class="token number" style="color:#5a9bcf">8</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">15</span><span class="token plain">:17:35 </span><span class="token number" style="color:#5a9bcf">2016</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">127.0</span><span class="token plain">.0.1:47322 </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token number" style="color:#5a9bcf">201</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain">: /api/products</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain">complete: See results </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> Apiary at: https://app.apiary.io/public/tests/run/cb5971cf-180d-47ed-abf4-002378941134</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token plain">info: Sending SIGTERM to the backend server</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token plain">info: Backend server was killed</span></div></pre></div></pre><p class="py-2">Next, we&#x27;ll implement <code>PATCH</code>. This targets an existing object, but accepts parameters in the same way as <code>POST</code>:</p><pre><div class="gatsby-highlight" data-language="markdown"><pre class="prism-code language-markdown" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token title important punctuation" style="font-weight:400;color:#8dc891">##</span><span class="token title important" style="font-weight:400"> Update existing products [PATCH /api/products/1]</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">Update an existing product</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain"></span><span class="token list punctuation" style="color:#8dc891">+</span><span class="token plain"> name (string) - The product name</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain"></span><span class="token list punctuation" style="color:#8dc891">+</span><span class="token plain"> description (string) - The product description</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain"></span><span class="token list punctuation" style="color:#8dc891">+</span><span class="token plain"> price (float) - The product price</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain"></span><span class="token list punctuation" style="color:#8dc891">+</span><span class="token plain"> attributes (string) - The product attributes</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain"></span><span class="token list punctuation" style="color:#8dc891">+</span><span class="token plain"> Request (application/json)</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain">    </span><span class="token list punctuation" style="color:#8dc891">+</span><span class="token plain"> Body</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain"></span><span class="token code keyword" style="color:#c5a5c5">            {</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token code keyword" style="color:#c5a5c5">                &quot;name&quot;: &quot;Blue widget&quot;,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token code keyword" style="color:#c5a5c5">                &quot;description&quot;: &quot;A blue widget&quot;,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token code keyword" style="color:#c5a5c5">                &quot;price&quot;: 5.99,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token code keyword" style="color:#c5a5c5">                &quot;attributes&quot;: &quot;{\&quot;colour\&quot;: \&quot;blue\&quot;,\&quot;size\&quot;: \&quot;Small\&quot;}&quot;</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token code keyword" style="color:#c5a5c5">            }</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token plain"></span><span class="token list punctuation" style="color:#8dc891">+</span><span class="token plain"> Response 200 (application/json)</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token plain">    </span><span class="token list punctuation" style="color:#8dc891">+</span><span class="token plain"> Body</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">21</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">22</span><span class="token plain"></span><span class="token code keyword" style="color:#c5a5c5">            {</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">23</span><span class="token code keyword" style="color:#c5a5c5">              &quot;id&quot;: 2,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">24</span><span class="token code keyword" style="color:#c5a5c5">              &quot;name&quot;: &quot;Blue widget&quot;,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">25</span><span class="token code keyword" style="color:#c5a5c5">              &quot;description&quot;: &quot;A blue widget&quot;,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">26</span><span class="token code keyword" style="color:#c5a5c5">              &quot;price&quot;: 5.99,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">27</span><span class="token code keyword" style="color:#c5a5c5">              &quot;attributes&quot;: &quot;{\&quot;colour\&quot;: \&quot;blue\&quot;,\&quot;size\&quot;: \&quot;Small\&quot;}&quot;,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">28</span><span class="token code keyword" style="color:#c5a5c5">              &quot;created_at&quot;: &quot;*&quot;,</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">29</span><span class="token code keyword" style="color:#c5a5c5">              &quot;updated_at&quot;: &quot;*&quot;</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">30</span><span class="token code keyword" style="color:#c5a5c5">            }</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">We add our new route:</p><pre><div class="gatsby-highlight" data-language="php"><pre class="prism-code language-php" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style"></span><span class="token variable" style="color:#d7deea">$app</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">patch</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;/api/products/{id}&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;ProductController@update&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">And our <code>update()</code> method:</p><pre><div class="gatsby-highlight" data-language="php"><pre class="prism-code language-php" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">public</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">function</span><span class="token plain"> </span><span class="token function-definition function" style="color:#79b6f2">update</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token class-name type-declaration" style="color:#FAC863">Request</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$request</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$id</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">        </span><span class="token comment" style="color:#999999">// Validate request</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">        </span><span class="token variable" style="color:#d7deea">$valid</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$this</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">validate</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token variable" style="color:#d7deea">$request</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">            </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;name&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=&gt;</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;string&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">            </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;description&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=&gt;</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;string&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">            </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;price&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=&gt;</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;numeric&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain">            </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;attributes&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=&gt;</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;string&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">        </span><span class="token punctuation" style="color:#8dc891">]</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain">        </span><span class="token comment" style="color:#999999">// Get product</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain">        </span><span class="token variable" style="color:#d7deea">$product</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$this</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token property" style="color:#5a9bcf">product</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">findOrFail</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token variable" style="color:#d7deea">$id</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain">        </span><span class="token comment" style="color:#999999">// Update it</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token variable" style="color:#d7deea">$request</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">has</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;name&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token plain">            </span><span class="token variable" style="color:#d7deea">$product</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token property" style="color:#5a9bcf">name</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$request</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">input</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;name&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token plain">        </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token variable" style="color:#d7deea">$request</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">has</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;description&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token plain">            </span><span class="token variable" style="color:#d7deea">$product</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token property" style="color:#5a9bcf">description</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$request</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">input</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;description&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token plain">        </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">21</span><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token variable" style="color:#d7deea">$request</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">has</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;price&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">22</span><span class="token plain">            </span><span class="token variable" style="color:#d7deea">$product</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token property" style="color:#5a9bcf">price</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$request</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">input</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;price&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">23</span><span class="token plain">        </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">24</span><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token variable" style="color:#d7deea">$request</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">has</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;attributes&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">25</span><span class="token plain">            </span><span class="token variable" style="color:#d7deea">$product</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token property" style="color:#5a9bcf">attributes</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$request</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">input</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;attributes&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">26</span><span class="token plain">        </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">27</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">28</span><span class="token plain">        </span><span class="token comment" style="color:#999999">// Save product</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">29</span><span class="token plain">        </span><span class="token variable" style="color:#d7deea">$product</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">save</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">30</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">31</span><span class="token plain">        </span><span class="token comment" style="color:#999999">// Send response</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">32</span><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">response</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">json</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token variable" style="color:#d7deea">$product</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">200</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">33</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Here we can&#x27;t guarantee every parameter will exist, so we test for it. We run Dredd again:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ dredd</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">info: Configuration </span><span class="token string" style="color:#8dc891">&#x27;./dredd.yml&#x27;</span><span class="token plain"> found, ignoring other arguments.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">info: Using apiary reporter.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">info: Starting server with command: php -S localhost:3000 -t public/</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">info: Waiting </span><span class="token number" style="color:#5a9bcf">3</span><span class="token plain"> seconds </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> server </span><span class="token builtin class-name" style="color:#FAC863">command</span><span class="token plain"> to start</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">info: Beginning Dredd testing</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">pass: GET /api/products duration: 74ms</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">[</span><span class="token plain">Mon Aug  </span><span class="token number" style="color:#5a9bcf">8</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">15</span><span class="token plain">:27:14 </span><span class="token number" style="color:#5a9bcf">2016</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">127.0</span><span class="token plain">.0.1:47464 </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token number" style="color:#5a9bcf">200</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain">: /api/products</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">pass: GET /api/products/1 duration: 19ms</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">[</span><span class="token plain">Mon Aug  </span><span class="token number" style="color:#5a9bcf">8</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">15</span><span class="token plain">:27:14 </span><span class="token number" style="color:#5a9bcf">2016</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">127.0</span><span class="token plain">.0.1:47466 </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token number" style="color:#5a9bcf">200</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain">: /api/products/1</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain">pass: POST /api/products duration: 36ms</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">[</span><span class="token plain">Mon Aug  </span><span class="token number" style="color:#5a9bcf">8</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">15</span><span class="token plain">:27:14 </span><span class="token number" style="color:#5a9bcf">2016</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">127.0</span><span class="token plain">.0.1:47470 </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token number" style="color:#5a9bcf">201</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain">: /api/products</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">[</span><span class="token plain">Mon Aug  </span><span class="token number" style="color:#5a9bcf">8</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">15</span><span class="token plain">:27:14 </span><span class="token number" style="color:#5a9bcf">2016</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">127.0</span><span class="token plain">.0.1:47474 </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token number" style="color:#5a9bcf">200</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain">: /api/products/1</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain">pass: PATCH /api/products/1 duration: 34ms</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain">complete: </span><span class="token number" style="color:#5a9bcf">4</span><span class="token plain"> passing, </span><span class="token number" style="color:#5a9bcf">0</span><span class="token plain"> failing, </span><span class="token number" style="color:#5a9bcf">0</span><span class="token plain"> errors, </span><span class="token number" style="color:#5a9bcf">0</span><span class="token plain"> skipped, </span><span class="token number" style="color:#5a9bcf">4</span><span class="token plain"> total</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token plain">complete: Tests took 2579ms</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token plain">complete: See results </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> Apiary at: https://app.apiary.io/public/tests/run/eae98644-44ad-432f-90fc-5f73fa674f66</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token plain">info: Sending SIGTERM to the backend server</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token plain">info: Backend server was killed</span></div></pre></div></pre><p class="py-2">One last method to implement - the <code>DELETE</code> method. Add this to <code>apiary.apib</code>:</p><pre><div class="gatsby-highlight" data-language="markdown"><pre class="prism-code language-markdown" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token title important punctuation" style="font-weight:400;color:#8dc891">##</span><span class="token title important" style="font-weight:400"> Delete products [DELETE /api/products/1]</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">Delete an existing product</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain"></span><span class="token list punctuation" style="color:#8dc891">+</span><span class="token plain"> Request (application/json)</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain"></span><span class="token list punctuation" style="color:#8dc891">+</span><span class="token plain"> Response 200 (application/json)</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">    </span><span class="token list punctuation" style="color:#8dc891">+</span><span class="token plain"> Body</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain"></span><span class="token code keyword" style="color:#c5a5c5">            {</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token code keyword" style="color:#c5a5c5">                &quot;status&quot;: &quot;Deleted&quot;</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token code keyword" style="color:#c5a5c5">            }</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">Next, add the route:</p><pre><div class="gatsby-highlight" data-language="php"><pre class="prism-code language-php" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style"></span><span class="token variable" style="color:#d7deea">$app</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">delete</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;/api/products/{id}&#x27;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;ProductController@destroy&#x27;</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">And the <code>destroy()</code> method in the controller:</p><pre><div class="gatsby-highlight" data-language="php"><pre class="prism-code language-php" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">public</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">function</span><span class="token plain"> </span><span class="token function-definition function" style="color:#79b6f2">destroy</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token variable" style="color:#d7deea">$id</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">        </span><span class="token comment" style="color:#999999">// Get product</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">        </span><span class="token variable" style="color:#d7deea">$product</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token variable" style="color:#d7deea">$this</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token property" style="color:#5a9bcf">product</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">findOrFail</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token variable" style="color:#d7deea">$id</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">        </span><span class="token comment" style="color:#999999">// Delete product</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">        </span><span class="token variable" style="color:#d7deea">$product</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">delete</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">        </span><span class="token comment" style="color:#999999">// Return empty response</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">response</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token operator" style="color:#d7deea">-&gt;</span><span class="token function" style="color:#79b6f2">json</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">[</span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;status&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#d7deea">=&gt;</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#8dc891">&#x27;deleted&#x27;</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">200</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span></div></pre></div></pre><p class="py-2">And let&#x27;s run Dredd again:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style">1</span><span class="token plain">$ dredd</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">2</span><span class="token plain">info: Configuration </span><span class="token string" style="color:#8dc891">&#x27;./dredd.yml&#x27;</span><span class="token plain"> found, ignoring other arguments.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">3</span><span class="token plain">info: Using apiary reporter.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">4</span><span class="token plain">info: Starting server with command: php -S localhost:3000 -t public/</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">5</span><span class="token plain">info: Waiting </span><span class="token number" style="color:#5a9bcf">3</span><span class="token plain"> seconds </span><span class="token keyword" style="color:#c5a5c5">for</span><span class="token plain"> server </span><span class="token builtin class-name" style="color:#FAC863">command</span><span class="token plain"> to start</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">6</span><span class="token plain">info: Beginning Dredd testing</span><span class="token punctuation" style="color:#8dc891">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">7</span><span class="token plain">pass: GET /api/products duration: 66ms</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">8</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">[</span><span class="token plain">Mon Aug  </span><span class="token number" style="color:#5a9bcf">8</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">15</span><span class="token plain">:57:44 </span><span class="token number" style="color:#5a9bcf">2016</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">127.0</span><span class="token plain">.0.1:48664 </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token number" style="color:#5a9bcf">200</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain">: /api/products</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">9</span><span class="token plain">pass: GET /api/products/1 duration: 19ms</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">10</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">[</span><span class="token plain">Mon Aug  </span><span class="token number" style="color:#5a9bcf">8</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">15</span><span class="token plain">:57:44 </span><span class="token number" style="color:#5a9bcf">2016</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">127.0</span><span class="token plain">.0.1:48666 </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token number" style="color:#5a9bcf">200</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain">: /api/products/1</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">11</span><span class="token plain">pass: POST /api/products duration: 45ms</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">12</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">[</span><span class="token plain">Mon Aug  </span><span class="token number" style="color:#5a9bcf">8</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">15</span><span class="token plain">:57:44 </span><span class="token number" style="color:#5a9bcf">2016</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">127.0</span><span class="token plain">.0.1:48670 </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token number" style="color:#5a9bcf">201</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain">: /api/products</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">13</span><span class="token plain">pass: PATCH /api/products/1 duration: 24ms</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">14</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">[</span><span class="token plain">Mon Aug  </span><span class="token number" style="color:#5a9bcf">8</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">15</span><span class="token plain">:57:44 </span><span class="token number" style="color:#5a9bcf">2016</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">127.0</span><span class="token plain">.0.1:48674 </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token number" style="color:#5a9bcf">200</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain">: /api/products/1</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">15</span><span class="token plain">pass: DELETE /api/products/1 duration: 27ms</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">16</span><span class="token plain">complete: </span><span class="token number" style="color:#5a9bcf">5</span><span class="token plain"> passing, </span><span class="token number" style="color:#5a9bcf">0</span><span class="token plain"> failing, </span><span class="token number" style="color:#5a9bcf">0</span><span class="token plain"> errors, </span><span class="token number" style="color:#5a9bcf">0</span><span class="token plain"> skipped, </span><span class="token number" style="color:#5a9bcf">5</span><span class="token plain"> total</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">17</span><span class="token plain">complete: Tests took 713ms</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">18</span><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">[</span><span class="token plain">Mon Aug  </span><span class="token number" style="color:#5a9bcf">8</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">15</span><span class="token plain">:57:44 </span><span class="token number" style="color:#5a9bcf">2016</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">127.0</span><span class="token plain">.0.1:48678 </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token number" style="color:#5a9bcf">200</span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain">: /api/products/1</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">19</span><span class="token plain">complete: See results </span><span class="token keyword" style="color:#c5a5c5">in</span><span class="token plain"> Apiary at: https://app.apiary.io/public/tests/run/a3e11d59-1dad-404b-9319-61ca5c0fcd15</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">20</span><span class="token plain">info: Sending SIGTERM to the backend server</span></div><div class="token-line" style="color:#ffffff"><span class="line-number-style">21</span><span class="token plain">info: Backend server was killed</span></div></pre></div></pre><p class="py-2">Our REST API is now finished.</p><h2 class="py-4 text-2xl font-bold">Generating HTML version of your documentation</h2><p class="py-2">Now we have finished documenting and implementing our API, we need to generate an HTML version of it. One way is to use <code>aglio</code>:</p><pre><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="background-color:#282c34;color:#ffffff"><div class="token-line" style="color:#ffffff"><span class="line-number-style"></span><span class="token plain">$ aglio -i apiary.apib -o output.html</span></div></pre></div></pre><p class="py-2">This will write the documentation to <code>output.html</code>. There&#x27;s also scope for choosing different themes if you wish.</p><p class="py-2">You can also use Apiary, which has the advantage that they&#x27;ll create a stub of your API so that if you need to work with the API before it&#x27;s finished being implemented, you can use that as a placeholder.</p><h2 class="py-4 text-2xl font-bold">Summary</h2><p class="py-2">The Blueprint language is a useful way of documenting your API, and makes it simple enough that it&#x27;s hard to weasel out of doing so. It&#x27;s worth taking a closer look at <a href="https://apiblueprint.org/" class="border-b-2 border-green-400">the specification</a> as it goes into quite a lot of detail. It&#x27;s hard to ensure that the documentation and implementation remain in sync, so it&#x27;s a good idea to use Dredd to ensure that any changes you make don&#x27;t invalidate the documentation. With Aglio or Apiary, you can easily convert the documentation into a more attractive format.</p><p class="py-2">You&#x27;ll find the source code for this demo API <a href="https://github.com/matthewbdaly/demoapi" class="border-b-2 border-green-400">on Github</a>, so if you get stuck, take a look at that. I did have a fair few issues with whitespace, so bear that in mind if it behaves oddly. I&#x27;ve also noticed a few quirks, such as Dredd not working properly if a route returns a 204 response code, which is why I couldn&#x27;t use that for deleting - this <a href="https://github.com/apiaryio/dredd/issues/468" class="border-b-2 border-green-400">appears to be a bug</a>, but hopefully this will be resolved soon.</p><p class="py-2">I&#x27;ll say it again, Dredd is not a substitute for proper unit tests, and under no circumstances should you use it as one. However, it can be very useful as a way to plan how your API will work and ensure that it complies with that plan, and to ensure that the implementation and documentation don&#x27;t diverge. Used as part of your normal continuous integration setup, Dredd can make sure that any divergence between the docs and the application is picked up on and fixed as quickly as possible, while also making writing documentation less onerous.</p></section><hr/><div class="py-4"><a class="p-category" href="/blog/categories/api/"><span class="inline-block px-4 py-2 my-2 mr-2 text-sm font-bold text-gray-900 bg-purple-200 rounded-full hover:bg-purple-800 hover:text-gray-200 transition-colors duration-500">api</span></a><a class="p-category" href="/blog/categories/documentation/"><span class="inline-block px-4 py-2 my-2 mr-2 text-sm font-bold text-gray-900 bg-purple-200 rounded-full hover:bg-purple-800 hover:text-gray-200 transition-colors duration-500">documentation</span></a><a class="p-category" href="/blog/categories/php/"><span class="inline-block px-4 py-2 my-2 mr-2 text-sm font-bold text-gray-900 bg-purple-200 rounded-full hover:bg-purple-800 hover:text-gray-200 transition-colors duration-500">php</span></a><a class="p-category" href="/blog/categories/lumen/"><span class="inline-block px-4 py-2 my-2 mr-2 text-sm font-bold text-gray-900 bg-purple-200 rounded-full hover:bg-purple-800 hover:text-gray-200 transition-colors duration-500">lumen</span></a><a class="p-category" href="/blog/categories/laravel/"><span class="inline-block px-4 py-2 my-2 mr-2 text-sm font-bold text-gray-900 bg-purple-200 rounded-full hover:bg-purple-800 hover:text-gray-200 transition-colors duration-500">laravel</span></a><a class="p-category" href="/blog/categories/testing/"><span class="inline-block px-4 py-2 my-2 mr-2 text-sm font-bold text-gray-900 bg-purple-200 rounded-full hover:bg-purple-800 hover:text-gray-200 transition-colors duration-500">testing</span></a></div><nav class="pt-4 clear-both box-border"><a rel="prev" class="float-left w-1/2 p-2 shadow-sm hover:bg-gray-200 dark:hover:bg-gray-800 transition duration-300 ease-in-out" href="/blog/2016/06/05/using-jenkins-pipelines/"><p><strong class="font-bold clear-both">← Previous page</strong></p><p class="pl-6">Using Jenkins pipelines</p></a><a rel="next" class="float-right w-1/2 p-2 shadow-sm hover:bg-gray-200 dark:hover:bg-gray-800 transition duration-300 ease-in-out" href="/blog/2016/08/10/an-introduction-to-managing-your-servers-with-ansible/"><p><strong>→ Next page</strong></p><p class="pl-6">An introduction to managing your servers with Ansible</p></a></nav><div id="disqus_thread"></div></article></main></div><footer class="w-full p-4 text-gray-100 bg-gray-800"><ul class="flex flex-row flex-wrap justify-center w-full p-2 mx-auto text-center md:w-2/3 box-border"><li class="w-1/3 my-2 md:w-1/6"><a href="/posts/1">Blog</a></li><li class="w-1/3 my-2 md:w-1/6"><a href="/about">About</a></li><li class="w-1/3 my-2 md:w-1/6"><a href="/contact">Contact</a></li><li class="w-1/3 my-2 md:w-1/6"><a href="https://twitter.com/mattbd">Twitter</a></li><li class="w-1/3 my-2 md:w-1/6"><a href="https://github.com/matthewbdaly">Github</a></li><li class="w-1/3 my-2 md:w-1/6"><a href="/rss.xml">Feed</a></li></ul><div class="w-full p-4 mx-auto text-center md:w-2/3"><p>© Matthew Daly <!-- -->2021</p></div></footer></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-17043630-1', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/2016/08/08/testing-your-api-documentation-with-dredd/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-6bb0cc96a95a512dc6d7.js"],"app":["/app-7732d1bced30b102af67.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-f73ba0fd1f8ccd9c9e51.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-5205a883277333822a72.js"],"component---src-pages-search-tsx":["/component---src-pages-search-tsx-73edb3a3894897c2442d.js"],"component---src-templates-404-tsx":["/component---src-templates-404-tsx-ab0075b3d63edf37ce8b.js"],"component---src-templates-archives-tsx":["/component---src-templates-archives-tsx-d6565df0adcf40921e81.js"],"component---src-templates-categories-tsx":["/component---src-templates-categories-tsx-9d8c91434e407a29b108.js"],"component---src-templates-category-tsx":["/component---src-templates-category-tsx-c4b49257550e7ce69c55.js"],"component---src-templates-chunk-tsx":["/component---src-templates-chunk-tsx-8964f592e3e995933e96.js"],"component---src-templates-page-tsx":["/component---src-templates-page-tsx-27dfbb7eb1d03bf854f2.js"],"component---src-templates-post-tsx":["/component---src-templates-post-tsx-1c8e5dda5cc39be35388.js"]};/*]]>*/</script><script src="/polyfill-6bb0cc96a95a512dc6d7.js" nomodule=""></script><script src="/component---src-templates-post-tsx-1c8e5dda5cc39be35388.js" async=""></script><script src="/7840d69eefded84ab93ff6e879351e9a3a16821f-3cc77dc4aa7437d407dd.js" async=""></script><script src="/15a3be27178e285ff113e12c60c30466a8f4d4c5-c660223fcd21390a96b2.js" async=""></script><script src="/e87769ff526c098a69bffbfff9ee9d57397fcb93-8f87856d74c913e45c49.js" async=""></script><script src="/f0e45107-1ab5e6e9877396d2cf44.js" async=""></script><script src="/app-7732d1bced30b102af67.js" async=""></script><script src="/framework-20258163f1bb460ca28d.js" async=""></script><script src="/webpack-runtime-261a46458a2174c3d65d.js" async=""></script></body></html>