{"componentChunkName":"component---src-templates-post-tsx","path":"/blog/2016/11/26/easy-static-asset-versioning-in-php/","result":{"data":{"site":{"siteMetadata":{"title":"Matthew Daly","siteUrl":"https://matthewdaly.co.uk"}},"mdx":{"id":"0888de4e-e6ea-597d-b4fe-d7f35213aacb","body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Easy static asset versioning in PHP\",\n  \"date\": \"2016-11-26 21:40:39 +0000\",\n  \"layout\": \"post\",\n  \"categories\": [\"php\", \"static\"],\n  \"comments\": true\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"It's prudent to cache static assets such as images, Javascript and CSS to improve performance, but that raises the issue of changes not being reflected in your site due to visitor's browsers retaining the cached versions. Many content management systems and frameworks already handle this for you (such as Laravel's Elixir build system), but what if you have to work with a legacy application that doesn't do this?\"), mdx(\"p\", null, \"Fortunately there's a quite easy solution in PHP. Using the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"filemtime()\"), \" function described \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"http://php.net/manual/en/function.filemtime.php\"\n  }, \"here\"), \", we can get a Unix timestamp for when a file was last altered. This is perfect to use to identify when a file last changed, because by appending a new query string to the file name when loading it, we can trick the browser into thinking it's a new file when it's not, as in this example for a CodeIgniter application:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-php\"\n  }, \"<link rel=\\\"stylesheet\\\" type=\\\"text/css\\\" href=\\\"<?=$path?>?v=<?=filemtime($path)?>\\\">\\n\")), mdx(\"p\", null, \"   Obviously, this is a bit repetitive, so you may want to refactor this into some kind of template helper to make it easier to use, but the underlying principle applies to most programming languages. For instance, if you wanted to do so in a Handlebars template, you might want to create a helper something like this:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, \"var fs = require('fs');\\nvar Handlebars = require('handlebars');\\nHandlebars.registerHelper('version', function (path) {\\n   return path + '?v=' + fs.statSync(path).mtime.getTime();\\n});\\n\")), mdx(\"p\", null, \"Where more robust solutions such as Elixir are already available, I'd advise making full use of them. However, this technique is a quick and easy way to implement versioning for static assets in existing projects.\"));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"It's prudent to cache static assets such as images, Javascript and CSS to improve performance, but that raises the issue of changes not being reflected in your site due to visitorâ€¦","frontmatter":{"title":"Easy static asset versioning in PHP","date":"26th November 2016 9:40 pm","isoDate":"2016-11-26T21:40:39+00:00","categories":["php","static"]},"fields":{"path":"/blog/2016/11/26/easy-static-asset-versioning-in-php/"}}},"pageContext":{"previous":{"fields":{"path":"/blog/2016/11/13/building-a-phonegap-app-with-laravel-and-angular-part-4/"},"frontmatter":{"title":"Building a Phonegap App with Laravel and Angular - Part 4","date":"2016-11-13 16:15:00 +0000","layout":"post"}},"next":{"fields":{"path":"/blog/2016/11/29/testing-laravel-middleware/"},"frontmatter":{"title":"Testing Laravel Middleware","date":"2016-11-29 23:00:38 +0000","layout":"post"}}}},"staticQueryHashes":["290055352","2909664151"]}